var Rx=Object.defineProperty;var Uw=h=>{throw TypeError(h)};var Lx=(h,e,t)=>e in h?Rx(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t;var Ce=(h,e,t)=>Lx(h,typeof e!="symbol"?e+"":e,t),ay=(h,e,t)=>e.has(h)||Uw("Cannot "+t);var u=(h,e,t)=>(ay(h,e,"read from private field"),t?t.call(h):e.get(h)),T=(h,e,t)=>e.has(h)?Uw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(h):e.set(h,t),b=(h,e,t,i)=>(ay(h,e,"write to private field"),i?i.call(h,t):e.set(h,t),t),k=(h,e,t)=>(ay(h,e,"access private method"),t);var yn=(h,e,t,i)=>({set _(s){b(h,e,s,t)},get _(){return u(h,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function oE(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}function Mx(h){if(h.__esModule)return h;var e=h.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(h).forEach(function(i){var s=Object.getOwnPropertyDescriptor(h,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return h[i]}})}),t}var oy={exports:{}},Lc={},ly={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w;function Ix(){if($w)return De;$w=1;var h=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function x(D,W,re){this.props=D,this.context=W,this.refs=E,this.updater=re||w}x.prototype.isReactComponent={},x.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},x.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function S(){}S.prototype=x.prototype;function R(D,W,re){this.props=D,this.context=W,this.refs=E,this.updater=re||w}var P=R.prototype=new S;P.constructor=R,A(P,x.prototype),P.isPureReactComponent=!0;var M=Array.isArray,N=Object.prototype.hasOwnProperty,F={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function V(D,W,re){var fe,we={},ge=null,ce=null;if(W!=null)for(fe in W.ref!==void 0&&(ce=W.ref),W.key!==void 0&&(ge=""+W.key),W)N.call(W,fe)&&!H.hasOwnProperty(fe)&&(we[fe]=W[fe]);var xe=arguments.length-2;if(xe===1)we.children=re;else if(1<xe){for(var Te=Array(xe),rt=0;rt<xe;rt++)Te[rt]=arguments[rt+2];we.children=Te}if(D&&D.defaultProps)for(fe in xe=D.defaultProps,xe)we[fe]===void 0&&(we[fe]=xe[fe]);return{$$typeof:h,type:D,key:ge,ref:ce,props:we,_owner:F.current}}function B(D,W){return{$$typeof:h,type:D.type,key:W,ref:D.ref,props:D.props,_owner:D._owner}}function Y(D){return typeof D=="object"&&D!==null&&D.$$typeof===h}function X(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(re){return W[re]})}var ie=/\/+/g;function ne(D,W){return typeof D=="object"&&D!==null&&D.key!=null?X(""+D.key):W.toString(36)}function pe(D,W,re,fe,we){var ge=typeof D;(ge==="undefined"||ge==="boolean")&&(D=null);var ce=!1;if(D===null)ce=!0;else switch(ge){case"string":case"number":ce=!0;break;case"object":switch(D.$$typeof){case h:case e:ce=!0}}if(ce)return ce=D,we=we(ce),D=fe===""?"."+ne(ce,0):fe,M(we)?(re="",D!=null&&(re=D.replace(ie,"$&/")+"/"),pe(we,W,re,"",function(rt){return rt})):we!=null&&(Y(we)&&(we=B(we,re+(!we.key||ce&&ce.key===we.key?"":(""+we.key).replace(ie,"$&/")+"/")+D)),W.push(we)),1;if(ce=0,fe=fe===""?".":fe+":",M(D))for(var xe=0;xe<D.length;xe++){ge=D[xe];var Te=fe+ne(ge,xe);ce+=pe(ge,W,re,Te,we)}else if(Te=v(D),typeof Te=="function")for(D=Te.call(D),xe=0;!(ge=D.next()).done;)ge=ge.value,Te=fe+ne(ge,xe++),ce+=pe(ge,W,re,Te,we);else if(ge==="object")throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return ce}function de(D,W,re){if(D==null)return D;var fe=[],we=0;return pe(D,fe,"","",function(ge){return W.call(re,ge,we++)}),fe}function ue(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(re){(D._status===0||D._status===-1)&&(D._status=1,D._result=re)},function(re){(D._status===0||D._status===-1)&&(D._status=2,D._result=re)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var G={current:null},$={transition:null},ee={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:$,ReactCurrentOwner:F};function Q(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:de,forEach:function(D,W,re){de(D,function(){W.apply(this,arguments)},re)},count:function(D){var W=0;return de(D,function(){W++}),W},toArray:function(D){return de(D,function(W){return W})||[]},only:function(D){if(!Y(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},De.Component=x,De.Fragment=t,De.Profiler=s,De.PureComponent=R,De.StrictMode=i,De.Suspense=d,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,De.act=Q,De.cloneElement=function(D,W,re){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var fe=A({},D.props),we=D.key,ge=D.ref,ce=D._owner;if(W!=null){if(W.ref!==void 0&&(ge=W.ref,ce=F.current),W.key!==void 0&&(we=""+W.key),D.type&&D.type.defaultProps)var xe=D.type.defaultProps;for(Te in W)N.call(W,Te)&&!H.hasOwnProperty(Te)&&(fe[Te]=W[Te]===void 0&&xe!==void 0?xe[Te]:W[Te])}var Te=arguments.length-2;if(Te===1)fe.children=re;else if(1<Te){xe=Array(Te);for(var rt=0;rt<Te;rt++)xe[rt]=arguments[rt+2];fe.children=xe}return{$$typeof:h,type:D.type,key:we,ref:ge,props:fe,_owner:ce}},De.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:a,_context:D},D.Consumer=D},De.createElement=V,De.createFactory=function(D){var W=V.bind(null,D);return W.type=D,W},De.createRef=function(){return{current:null}},De.forwardRef=function(D){return{$$typeof:c,render:D}},De.isValidElement=Y,De.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:ue}},De.memo=function(D,W){return{$$typeof:p,type:D,compare:W===void 0?null:W}},De.startTransition=function(D){var W=$.transition;$.transition={};try{D()}finally{$.transition=W}},De.unstable_act=Q,De.useCallback=function(D,W){return G.current.useCallback(D,W)},De.useContext=function(D){return G.current.useContext(D)},De.useDebugValue=function(){},De.useDeferredValue=function(D){return G.current.useDeferredValue(D)},De.useEffect=function(D,W){return G.current.useEffect(D,W)},De.useId=function(){return G.current.useId()},De.useImperativeHandle=function(D,W,re){return G.current.useImperativeHandle(D,W,re)},De.useInsertionEffect=function(D,W){return G.current.useInsertionEffect(D,W)},De.useLayoutEffect=function(D,W){return G.current.useLayoutEffect(D,W)},De.useMemo=function(D,W){return G.current.useMemo(D,W)},De.useReducer=function(D,W,re){return G.current.useReducer(D,W,re)},De.useRef=function(D){return G.current.useRef(D)},De.useState=function(D){return G.current.useState(D)},De.useSyncExternalStore=function(D,W,re){return G.current.useSyncExternalStore(D,W,re)},De.useTransition=function(){return G.current.useTransition()},De.version="18.3.1",De}var Ww;function Dt(){return Ww||(Ww=1,ly.exports=Ix()),ly.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function Dx(){if(Vw)return Lc;Vw=1;var h=Dt(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,p){var g,y={},v=null,w=null;p!==void 0&&(v=""+p),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(w=d.ref);for(g in d)i.call(d,g)&&!a.hasOwnProperty(g)&&(y[g]=d[g]);if(c&&c.defaultProps)for(g in d=c.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:c,key:v,ref:w,props:y,_owner:s.current}}return Lc.Fragment=t,Lc.jsx=l,Lc.jsxs=l,Lc}var Gw;function bi(){return Gw||(Gw=1,oy.exports=Dx()),oy.exports}var ze=bi(),q=Dt();const Ox=oE(q);var Wf={},uy={exports:{}},Rn={},cy={exports:{}},hy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qw;function Fx(){return qw||(qw=1,function(h){function e($,ee){var Q=$.length;$.push(ee);e:for(;0<Q;){var D=Q-1>>>1,W=$[D];if(0<s(W,ee))$[D]=ee,$[Q]=W,Q=D;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ee=$[0],Q=$.pop();if(Q!==ee){$[0]=Q;e:for(var D=0,W=$.length,re=W>>>1;D<re;){var fe=2*(D+1)-1,we=$[fe],ge=fe+1,ce=$[ge];if(0>s(we,Q))ge<W&&0>s(ce,we)?($[D]=ce,$[ge]=Q,D=ge):($[D]=we,$[fe]=Q,D=fe);else if(ge<W&&0>s(ce,Q))$[D]=ce,$[ge]=Q,D=ge;else break e}}return ee}function s($,ee){var Q=$.sortIndex-ee.sortIndex;return Q!==0?Q:$.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;h.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();h.unstable_now=function(){return l.now()-c}}var d=[],p=[],g=1,y=null,v=3,w=!1,A=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P($){for(var ee=t(p);ee!==null;){if(ee.callback===null)i(p);else if(ee.startTime<=$)i(p),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(p)}}function M($){if(E=!1,P($),!A)if(t(d)!==null)A=!0,ue(N);else{var ee=t(p);ee!==null&&G(M,ee.startTime-$)}}function N($,ee){A=!1,E&&(E=!1,S(V),V=-1),w=!0;var Q=v;try{for(P(ee),y=t(d);y!==null&&(!(y.expirationTime>ee)||$&&!X());){var D=y.callback;if(typeof D=="function"){y.callback=null,v=y.priorityLevel;var W=D(y.expirationTime<=ee);ee=h.unstable_now(),typeof W=="function"?y.callback=W:y===t(d)&&i(d),P(ee)}else i(d);y=t(d)}if(y!==null)var re=!0;else{var fe=t(p);fe!==null&&G(M,fe.startTime-ee),re=!1}return re}finally{y=null,v=Q,w=!1}}var F=!1,H=null,V=-1,B=5,Y=-1;function X(){return!(h.unstable_now()-Y<B)}function ie(){if(H!==null){var $=h.unstable_now();Y=$;var ee=!0;try{ee=H(!0,$)}finally{ee?ne():(F=!1,H=null)}}else F=!1}var ne;if(typeof R=="function")ne=function(){R(ie)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,de=pe.port2;pe.port1.onmessage=ie,ne=function(){de.postMessage(null)}}else ne=function(){x(ie,0)};function ue($){H=$,F||(F=!0,ne())}function G($,ee){V=x(function(){$(h.unstable_now())},ee)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function($){$.callback=null},h.unstable_continueExecution=function(){A||w||(A=!0,ue(N))},h.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<$?Math.floor(1e3/$):5},h.unstable_getCurrentPriorityLevel=function(){return v},h.unstable_getFirstCallbackNode=function(){return t(d)},h.unstable_next=function($){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var Q=v;v=ee;try{return $()}finally{v=Q}},h.unstable_pauseExecution=function(){},h.unstable_requestPaint=function(){},h.unstable_runWithPriority=function($,ee){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=v;v=$;try{return ee()}finally{v=Q}},h.unstable_scheduleCallback=function($,ee,Q){var D=h.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?D+Q:D):Q=D,$){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Q+W,$={id:g++,callback:ee,priorityLevel:$,startTime:Q,expirationTime:W,sortIndex:-1},Q>D?($.sortIndex=Q,e(p,$),t(d)===null&&$===t(p)&&(E?(S(V),V=-1):E=!0,G(M,Q-D))):($.sortIndex=W,e(d,$),A||w||(A=!0,ue(N))),$},h.unstable_shouldYield=X,h.unstable_wrapCallback=function($){var ee=v;return function(){var Q=v;v=ee;try{return $.apply(this,arguments)}finally{v=Q}}}}(hy)),hy}var Xw;function Nx(){return Xw||(Xw=1,cy.exports=Fx()),cy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw;function jx(){if(Yw)return Rn;Yw=1;var h=Dt(),e=Nx();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function a(n,r){l(n,r),l(n+"Capture",r)}function l(n,r){for(s[n]=r,n=0;n<r.length;n++)i.add(r[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(n){return d.call(y,n)?!0:d.call(g,n)?!1:p.test(n)?y[n]=!0:(g[n]=!0,!1)}function w(n,r,o,f){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return f?!1:o!==null?!o.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function A(n,r,o,f){if(r===null||typeof r>"u"||w(n,r,o,f))return!0;if(f)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function E(n,r,o,f,m,_,C){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=o,this.propertyName=n,this.type=r,this.sanitizeURL=_,this.removeEmptyString=C}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){x[n]=new E(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];x[r]=new E(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){x[n]=new E(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){x[n]=new E(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){x[n]=new E(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){x[n]=new E(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){x[n]=new E(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){x[n]=new E(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){x[n]=new E(n,5,!1,n.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function R(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(S,R);x[r]=new E(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(S,R);x[r]=new E(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(S,R);x[r]=new E(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){x[n]=new E(n,1,!1,n.toLowerCase(),null,!1,!1)}),x.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){x[n]=new E(n,1,!1,n.toLowerCase(),null,!0,!0)});function P(n,r,o,f){var m=x.hasOwnProperty(r)?x[r]:null;(m!==null?m.type!==0:f||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(A(r,o,m,f)&&(o=null),f||m===null?v(r)&&(o===null?n.removeAttribute(r):n.setAttribute(r,""+o)):m.mustUseProperty?n[m.propertyName]=o===null?m.type===3?!1:"":o:(r=m.attributeName,f=m.attributeNamespace,o===null?n.removeAttribute(r):(m=m.type,o=m===3||m===4&&o===!0?"":""+o,f?n.setAttributeNS(f,r,o):n.setAttribute(r,o))))}var M=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),F=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),X=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),$=Symbol.iterator;function ee(n){return n===null||typeof n!="object"?null:(n=$&&n[$]||n["@@iterator"],typeof n=="function"?n:null)}var Q=Object.assign,D;function W(n){if(D===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||""}return`
`+D+n}var re=!1;function fe(n,r){if(!n||re)return"";re=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var f=U}Reflect.construct(n,[],r)}else{try{r.call()}catch(U){f=U}n.call(r.prototype)}else{try{throw Error()}catch(U){f=U}n()}}catch(U){if(U&&f&&typeof U.stack=="string"){for(var m=U.stack.split(`
`),_=f.stack.split(`
`),C=m.length-1,L=_.length-1;1<=C&&0<=L&&m[C]!==_[L];)L--;for(;1<=C&&0<=L;C--,L--)if(m[C]!==_[L]){if(C!==1||L!==1)do if(C--,L--,0>L||m[C]!==_[L]){var I=`
`+m[C].replace(" at new "," at ");return n.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",n.displayName)),I}while(1<=C&&0<=L);break}}}finally{re=!1,Error.prepareStackTrace=o}return(n=n?n.displayName||n.name:"")?W(n):""}function we(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=fe(n.type,!1),n;case 11:return n=fe(n.type.render,!1),n;case 1:return n=fe(n.type,!0),n;default:return""}}function ge(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case F:return"Portal";case B:return"Profiler";case V:return"StrictMode";case ne:return"Suspense";case pe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case X:return(n.displayName||"Context")+".Consumer";case Y:return(n._context.displayName||"Context")+".Provider";case ie:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case de:return r=n.displayName||null,r!==null?r:ge(n.type)||"Memo";case ue:r=n._payload,n=n._init;try{return ge(n(r))}catch{}}return null}function ce(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(r);case 8:return r===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function xe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Te(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function rt(n){var r=Te(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),f=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,_=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return m.call(this)},set:function(C){f=""+C,_.call(this,C)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function jn(n){n._valueTracker||(n._valueTracker=rt(n))}function Hn(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),f="";return n&&(f=Te(n)?n.checked?"true":"false":n.value),n=f,n!==o?(r.setValue(n),!0):!1}function Si(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function dn(n,r){var o=r.checked;return Q({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??n._wrapperState.initialChecked})}function xt(n,r){var o=r.defaultValue==null?"":r.defaultValue,f=r.checked!=null?r.checked:r.defaultChecked;o=xe(r.value!=null?r.value:o),n._wrapperState={initialChecked:f,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function si(n,r){r=r.checked,r!=null&&P(n,"checked",r,!1)}function Sn(n,r){si(n,r);var o=xe(r.value),f=r.type;if(o!=null)f==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?wt(n,r.type,o):r.hasOwnProperty("defaultValue")&&wt(n,r.type,xe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function xi(n,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var f=r.type;if(!(f!=="submit"&&f!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,o||r===n.value||(n.value=r),n.defaultValue=r}o=n.name,o!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,o!==""&&(n.name=o)}function wt(n,r,o){(r!=="number"||Si(n.ownerDocument)!==n)&&(o==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+o&&(n.defaultValue=""+o))}var ai=Array.isArray;function fn(n,r,o,f){if(n=n.options,r){r={};for(var m=0;m<o.length;m++)r["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=r.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&f&&(n[o].defaultSelected=!0)}else{for(o=""+xe(o),r=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,f&&(n[m].defaultSelected=!0);return}r!==null||n[m].disabled||(r=n[m])}r!==null&&(r.selected=!0)}}function zn(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Zi(n,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(t(92));if(ai(o)){if(1<o.length)throw Error(t(93));o=o[0]}r=o}r==null&&(r=""),o=r}n._wrapperState={initialValue:xe(o)}}function Ci(n,r){var o=xe(r.value),f=xe(r.defaultValue);o!=null&&(o=""+o,o!==n.value&&(n.value=o),r.defaultValue==null&&n.defaultValue!==o&&(n.defaultValue=o)),f!=null&&(n.defaultValue=""+f)}function Pr(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Rr(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xs(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Rr(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Cs,ki=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,f,m){MSApp.execUnsafeLocalFunction(function(){return n(r,o,f,m)})}:n}(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Cs=Cs||document.createElement("div"),Cs.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Cs.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function qe(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Ti={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ks=["Webkit","ms","Moz","O"];Object.keys(Ti).forEach(function(n){ks.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Ti[r]=Ti[n]})});function Zt(n,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Ti.hasOwnProperty(n)&&Ti[n]?(""+r).trim():r+"px"}function Bn(n,r){n=n.style;for(var o in r)if(r.hasOwnProperty(o)){var f=o.indexOf("--")===0,m=Zt(o,r[o],f);o==="float"&&(o="cssFloat"),f?n.setProperty(o,m):n[o]=m}}var er=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wt(n,r){if(r){if(er[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Oa(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gt=null;function Vt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var pn=null,Ot=null,Un=null;function Ts(n){if(n=mc(n)){if(typeof pn!="function")throw Error(t(280));var r=n.stateNode;r&&(r=sf(r),pn(n.stateNode,n.type,r))}}function Id(n){Ot?Un?Un.push(n):Un=[n]:Ot=n}function Dd(){if(Ot){var n=Ot,r=Un;if(Un=Ot=null,Ts(n),r)for(n=0;n<r.length;n++)Ts(r[n])}}function Od(n,r){return n(r)}function Lr(){}var Ps=!1;function Fa(n,r,o){if(Ps)return n(r,o);Ps=!0;try{return Od(n,r,o)}finally{Ps=!1,(Ot!==null||Un!==null)&&(Lr(),Dd())}}function Mr(n,r){var o=n.stateNode;if(o===null)return null;var f=sf(o);if(f===null)return null;o=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(t(231,r,typeof o));return o}var Sg=!1;if(c)try{var Ku={};Object.defineProperty(Ku,"passive",{get:function(){Sg=!0}}),window.addEventListener("test",Ku,Ku),window.removeEventListener("test",Ku,Ku)}catch{Sg=!1}function NS(n,r,o,f,m,_,C,L,I){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(J){this.onError(J)}}var Qu=!1,Fd=null,Nd=!1,xg=null,jS={onError:function(n){Qu=!0,Fd=n}};function HS(n,r,o,f,m,_,C,L,I){Qu=!1,Fd=null,NS.apply(jS,arguments)}function zS(n,r,o,f,m,_,C,L,I){if(HS.apply(this,arguments),Qu){if(Qu){var U=Fd;Qu=!1,Fd=null}else throw Error(t(198));Nd||(Nd=!0,xg=U)}}function Na(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,r.flags&4098&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function h0(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d0(n){if(Na(n)!==n)throw Error(t(188))}function BS(n){var r=n.alternate;if(!r){if(r=Na(n),r===null)throw Error(t(188));return r!==n?null:n}for(var o=n,f=r;;){var m=o.return;if(m===null)break;var _=m.alternate;if(_===null){if(f=m.return,f!==null){o=f;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===o)return d0(m),n;if(_===f)return d0(m),r;_=_.sibling}throw Error(t(188))}if(o.return!==f.return)o=m,f=_;else{for(var C=!1,L=m.child;L;){if(L===o){C=!0,o=m,f=_;break}if(L===f){C=!0,f=m,o=_;break}L=L.sibling}if(!C){for(L=_.child;L;){if(L===o){C=!0,o=_,f=m;break}if(L===f){C=!0,f=_,o=m;break}L=L.sibling}if(!C)throw Error(t(189))}}if(o.alternate!==f)throw Error(t(190))}if(o.tag!==3)throw Error(t(188));return o.stateNode.current===o?n:r}function f0(n){return n=BS(n),n!==null?p0(n):null}function p0(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=p0(n);if(r!==null)return r;n=n.sibling}return null}var g0=e.unstable_scheduleCallback,m0=e.unstable_cancelCallback,US=e.unstable_shouldYield,$S=e.unstable_requestPaint,mt=e.unstable_now,WS=e.unstable_getCurrentPriorityLevel,Cg=e.unstable_ImmediatePriority,y0=e.unstable_UserBlockingPriority,jd=e.unstable_NormalPriority,VS=e.unstable_LowPriority,v0=e.unstable_IdlePriority,Hd=null,tr=null;function GS(n){if(tr&&typeof tr.onCommitFiberRoot=="function")try{tr.onCommitFiberRoot(Hd,n,void 0,(n.current.flags&128)===128)}catch{}}var Pi=Math.clz32?Math.clz32:YS,qS=Math.log,XS=Math.LN2;function YS(n){return n>>>=0,n===0?32:31-(qS(n)/XS|0)|0}var zd=64,Bd=4194304;function Ju(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ud(n,r){var o=n.pendingLanes;if(o===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes,C=o&268435455;if(C!==0){var L=C&~m;L!==0?f=Ju(L):(_&=C,_!==0&&(f=Ju(_)))}else C=o&~m,C!==0?f=Ju(C):_!==0&&(f=Ju(_));if(f===0)return 0;if(r!==0&&r!==f&&!(r&m)&&(m=f&-f,_=r&-r,m>=_||m===16&&(_&4194240)!==0))return r;if(f&4&&(f|=o&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=f;0<r;)o=31-Pi(r),m=1<<o,f|=n[o],r&=~m;return f}function KS(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QS(n,r){for(var o=n.suspendedLanes,f=n.pingedLanes,m=n.expirationTimes,_=n.pendingLanes;0<_;){var C=31-Pi(_),L=1<<C,I=m[C];I===-1?(!(L&o)||L&f)&&(m[C]=KS(L,r)):I<=r&&(n.expiredLanes|=L),_&=~L}}function kg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function _0(){var n=zd;return zd<<=1,!(zd&4194240)&&(zd=64),n}function Tg(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Zu(n,r,o){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Pi(r),n[r]=o}function JS(n,r){var o=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<o;){var m=31-Pi(o),_=1<<m;r[m]=0,f[m]=-1,n[m]=-1,o&=~_}}function Pg(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var f=31-Pi(o),m=1<<f;m&r|n[f]&r&&(n[f]|=r),o&=~m}}var $e=0;function w0(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var A0,Rg,E0,b0,S0,Lg=!1,$d=[],Rs=null,Ls=null,Ms=null,ec=new Map,tc=new Map,Is=[],ZS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x0(n,r){switch(n){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":ec.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(r.pointerId)}}function nc(n,r,o,f,m,_){return n===null||n.nativeEvent!==_?(n={blockedOn:r,domEventName:o,eventSystemFlags:f,nativeEvent:_,targetContainers:[m]},r!==null&&(r=mc(r),r!==null&&Rg(r)),n):(n.eventSystemFlags|=f,r=n.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),n)}function e1(n,r,o,f,m){switch(r){case"focusin":return Rs=nc(Rs,n,r,o,f,m),!0;case"dragenter":return Ls=nc(Ls,n,r,o,f,m),!0;case"mouseover":return Ms=nc(Ms,n,r,o,f,m),!0;case"pointerover":var _=m.pointerId;return ec.set(_,nc(ec.get(_)||null,n,r,o,f,m)),!0;case"gotpointercapture":return _=m.pointerId,tc.set(_,nc(tc.get(_)||null,n,r,o,f,m)),!0}return!1}function C0(n){var r=ja(n.target);if(r!==null){var o=Na(r);if(o!==null){if(r=o.tag,r===13){if(r=h0(o),r!==null){n.blockedOn=r,S0(n.priority,function(){E0(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Wd(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=Ig(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(o===null){o=n.nativeEvent;var f=new o.constructor(o.type,o);gt=f,o.target.dispatchEvent(f),gt=null}else return r=mc(o),r!==null&&Rg(r),n.blockedOn=o,!1;r.shift()}return!0}function k0(n,r,o){Wd(n)&&o.delete(r)}function t1(){Lg=!1,Rs!==null&&Wd(Rs)&&(Rs=null),Ls!==null&&Wd(Ls)&&(Ls=null),Ms!==null&&Wd(Ms)&&(Ms=null),ec.forEach(k0),tc.forEach(k0)}function ic(n,r){n.blockedOn===r&&(n.blockedOn=null,Lg||(Lg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,t1)))}function rc(n){function r(m){return ic(m,n)}if(0<$d.length){ic($d[0],n);for(var o=1;o<$d.length;o++){var f=$d[o];f.blockedOn===n&&(f.blockedOn=null)}}for(Rs!==null&&ic(Rs,n),Ls!==null&&ic(Ls,n),Ms!==null&&ic(Ms,n),ec.forEach(r),tc.forEach(r),o=0;o<Is.length;o++)f=Is[o],f.blockedOn===n&&(f.blockedOn=null);for(;0<Is.length&&(o=Is[0],o.blockedOn===null);)C0(o),o.blockedOn===null&&Is.shift()}var cl=M.ReactCurrentBatchConfig,Vd=!0;function n1(n,r,o,f){var m=$e,_=cl.transition;cl.transition=null;try{$e=1,Mg(n,r,o,f)}finally{$e=m,cl.transition=_}}function i1(n,r,o,f){var m=$e,_=cl.transition;cl.transition=null;try{$e=4,Mg(n,r,o,f)}finally{$e=m,cl.transition=_}}function Mg(n,r,o,f){if(Vd){var m=Ig(n,r,o,f);if(m===null)Kg(n,r,f,Gd,o),x0(n,f);else if(e1(m,n,r,o,f))f.stopPropagation();else if(x0(n,f),r&4&&-1<ZS.indexOf(n)){for(;m!==null;){var _=mc(m);if(_!==null&&A0(_),_=Ig(n,r,o,f),_===null&&Kg(n,r,f,Gd,o),_===m)break;m=_}m!==null&&f.stopPropagation()}else Kg(n,r,f,null,o)}}var Gd=null;function Ig(n,r,o,f){if(Gd=null,n=Vt(f),n=ja(n),n!==null)if(r=Na(n),r===null)n=null;else if(o=r.tag,o===13){if(n=h0(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Gd=n,null}function T0(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WS()){case Cg:return 1;case y0:return 4;case jd:case VS:return 16;case v0:return 536870912;default:return 16}default:return 16}}var Ds=null,Dg=null,qd=null;function P0(){if(qd)return qd;var n,r=Dg,o=r.length,f,m="value"in Ds?Ds.value:Ds.textContent,_=m.length;for(n=0;n<o&&r[n]===m[n];n++);var C=o-n;for(f=1;f<=C&&r[o-f]===m[_-f];f++);return qd=m.slice(n,1<f?1-f:void 0)}function Xd(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Yd(){return!0}function R0(){return!1}function $n(n){function r(o,f,m,_,C){this._reactName=o,this._targetInst=m,this.type=f,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var L in n)n.hasOwnProperty(L)&&(o=n[L],this[L]=o?o(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Yd:R0,this.isPropagationStopped=R0,this}return Q(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Yd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Yd)},persist:function(){},isPersistent:Yd}),r}var hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Og=$n(hl),sc=Q({},hl,{view:0,detail:0}),r1=$n(sc),Fg,Ng,ac,Kd=Q({},sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hg,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ac&&(ac&&n.type==="mousemove"?(Fg=n.screenX-ac.screenX,Ng=n.screenY-ac.screenY):Ng=Fg=0,ac=n),Fg)},movementY:function(n){return"movementY"in n?n.movementY:Ng}}),L0=$n(Kd),s1=Q({},Kd,{dataTransfer:0}),a1=$n(s1),o1=Q({},sc,{relatedTarget:0}),jg=$n(o1),l1=Q({},hl,{animationName:0,elapsedTime:0,pseudoElement:0}),u1=$n(l1),c1=Q({},hl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h1=$n(c1),d1=Q({},hl,{data:0}),M0=$n(d1),f1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m1(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=g1[n])?!!r[n]:!1}function Hg(){return m1}var y1=Q({},sc,{key:function(n){if(n.key){var r=f1[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Xd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?p1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hg,charCode:function(n){return n.type==="keypress"?Xd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),v1=$n(y1),_1=Q({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I0=$n(_1),w1=Q({},sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hg}),A1=$n(w1),E1=Q({},hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),b1=$n(E1),S1=Q({},Kd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),x1=$n(S1),C1=[9,13,27,32],zg=c&&"CompositionEvent"in window,oc=null;c&&"documentMode"in document&&(oc=document.documentMode);var k1=c&&"TextEvent"in window&&!oc,D0=c&&(!zg||oc&&8<oc&&11>=oc),O0=" ",F0=!1;function N0(n,r){switch(n){case"keyup":return C1.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j0(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var dl=!1;function T1(n,r){switch(n){case"compositionend":return j0(r);case"keypress":return r.which!==32?null:(F0=!0,O0);case"textInput":return n=r.data,n===O0&&F0?null:n;default:return null}}function P1(n,r){if(dl)return n==="compositionend"||!zg&&N0(n,r)?(n=P0(),qd=Dg=Ds=null,dl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return D0&&r.locale!=="ko"?null:r.data;default:return null}}var R1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H0(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!R1[n.type]:r==="textarea"}function z0(n,r,o,f){Id(f),r=tf(r,"onChange"),0<r.length&&(o=new Og("onChange","change",null,o,f),n.push({event:o,listeners:r}))}var lc=null,uc=null;function L1(n){r_(n,0)}function Qd(n){var r=yl(n);if(Hn(r))return n}function M1(n,r){if(n==="change")return r}var B0=!1;if(c){var Bg;if(c){var Ug="oninput"in document;if(!Ug){var U0=document.createElement("div");U0.setAttribute("oninput","return;"),Ug=typeof U0.oninput=="function"}Bg=Ug}else Bg=!1;B0=Bg&&(!document.documentMode||9<document.documentMode)}function $0(){lc&&(lc.detachEvent("onpropertychange",W0),uc=lc=null)}function W0(n){if(n.propertyName==="value"&&Qd(uc)){var r=[];z0(r,uc,n,Vt(n)),Fa(L1,r)}}function I1(n,r,o){n==="focusin"?($0(),lc=r,uc=o,lc.attachEvent("onpropertychange",W0)):n==="focusout"&&$0()}function D1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qd(uc)}function O1(n,r){if(n==="click")return Qd(r)}function F1(n,r){if(n==="input"||n==="change")return Qd(r)}function N1(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Ri=typeof Object.is=="function"?Object.is:N1;function cc(n,r){if(Ri(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),f=Object.keys(r);if(o.length!==f.length)return!1;for(f=0;f<o.length;f++){var m=o[f];if(!d.call(r,m)||!Ri(n[m],r[m]))return!1}return!0}function V0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function G0(n,r){var o=V0(n);n=0;for(var f;o;){if(o.nodeType===3){if(f=n+o.textContent.length,n<=r&&f>=r)return{node:o,offset:r-n};n=f}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=V0(o)}}function q0(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?q0(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function X0(){for(var n=window,r=Si();r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Si(n.document)}return r}function $g(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function j1(n){var r=X0(),o=n.focusedElem,f=n.selectionRange;if(r!==o&&o&&o.ownerDocument&&q0(o.ownerDocument.documentElement,o)){if(f!==null&&$g(o)){if(r=f.start,n=f.end,n===void 0&&(n=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(n,o.value.length);else if(n=(r=o.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var m=o.textContent.length,_=Math.min(f.start,m);f=f.end===void 0?_:Math.min(f.end,m),!n.extend&&_>f&&(m=f,f=_,_=m),m=G0(o,_);var C=G0(o,f);m&&C&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==C.node||n.focusOffset!==C.offset)&&(r=r.createRange(),r.setStart(m.node,m.offset),n.removeAllRanges(),_>f?(n.addRange(r),n.extend(C.node,C.offset)):(r.setEnd(C.node,C.offset),n.addRange(r)))}}for(r=[],n=o;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)n=r[o],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var H1=c&&"documentMode"in document&&11>=document.documentMode,fl=null,Wg=null,hc=null,Vg=!1;function Y0(n,r,o){var f=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Vg||fl==null||fl!==Si(f)||(f=fl,"selectionStart"in f&&$g(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),hc&&cc(hc,f)||(hc=f,f=tf(Wg,"onSelect"),0<f.length&&(r=new Og("onSelect","select",null,r,o),n.push({event:r,listeners:f}),r.target=fl)))}function Jd(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var pl={animationend:Jd("Animation","AnimationEnd"),animationiteration:Jd("Animation","AnimationIteration"),animationstart:Jd("Animation","AnimationStart"),transitionend:Jd("Transition","TransitionEnd")},Gg={},K0={};c&&(K0=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function Zd(n){if(Gg[n])return Gg[n];if(!pl[n])return n;var r=pl[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in K0)return Gg[n]=r[o];return n}var Q0=Zd("animationend"),J0=Zd("animationiteration"),Z0=Zd("animationstart"),e_=Zd("transitionend"),t_=new Map,n_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(n,r){t_.set(n,r),a(r,[n])}for(var qg=0;qg<n_.length;qg++){var Xg=n_[qg],z1=Xg.toLowerCase(),B1=Xg[0].toUpperCase()+Xg.slice(1);Os(z1,"on"+B1)}Os(Q0,"onAnimationEnd"),Os(J0,"onAnimationIteration"),Os(Z0,"onAnimationStart"),Os("dblclick","onDoubleClick"),Os("focusin","onFocus"),Os("focusout","onBlur"),Os(e_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U1=new Set("cancel close invalid load scroll toggle".split(" ").concat(dc));function i_(n,r,o){var f=n.type||"unknown-event";n.currentTarget=o,zS(f,r,void 0,n),n.currentTarget=null}function r_(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var f=n[o],m=f.event;f=f.listeners;e:{var _=void 0;if(r)for(var C=f.length-1;0<=C;C--){var L=f[C],I=L.instance,U=L.currentTarget;if(L=L.listener,I!==_&&m.isPropagationStopped())break e;i_(m,L,U),_=I}else for(C=0;C<f.length;C++){if(L=f[C],I=L.instance,U=L.currentTarget,L=L.listener,I!==_&&m.isPropagationStopped())break e;i_(m,L,U),_=I}}}if(Nd)throw n=xg,Nd=!1,xg=null,n}function Je(n,r){var o=r[nm];o===void 0&&(o=r[nm]=new Set);var f=n+"__bubble";o.has(f)||(s_(r,n,2,!1),o.add(f))}function Yg(n,r,o){var f=0;r&&(f|=4),s_(o,n,f,r)}var ef="_reactListening"+Math.random().toString(36).slice(2);function fc(n){if(!n[ef]){n[ef]=!0,i.forEach(function(o){o!=="selectionchange"&&(U1.has(o)||Yg(o,!1,n),Yg(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[ef]||(r[ef]=!0,Yg("selectionchange",!1,r))}}function s_(n,r,o,f){switch(T0(r)){case 1:var m=n1;break;case 4:m=i1;break;default:m=Mg}o=m.bind(null,r,o,n),m=void 0,!Sg||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),f?m!==void 0?n.addEventListener(r,o,{capture:!0,passive:m}):n.addEventListener(r,o,!0):m!==void 0?n.addEventListener(r,o,{passive:m}):n.addEventListener(r,o,!1)}function Kg(n,r,o,f,m){var _=f;if(!(r&1)&&!(r&2)&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var L=f.stateNode.containerInfo;if(L===m||L.nodeType===8&&L.parentNode===m)break;if(C===4)for(C=f.return;C!==null;){var I=C.tag;if((I===3||I===4)&&(I=C.stateNode.containerInfo,I===m||I.nodeType===8&&I.parentNode===m))return;C=C.return}for(;L!==null;){if(C=ja(L),C===null)return;if(I=C.tag,I===5||I===6){f=_=C;continue e}L=L.parentNode}}f=f.return}Fa(function(){var U=_,J=Vt(o),Z=[];e:{var K=t_.get(n);if(K!==void 0){var oe=Og,me=n;switch(n){case"keypress":if(Xd(o)===0)break e;case"keydown":case"keyup":oe=v1;break;case"focusin":me="focus",oe=jg;break;case"focusout":me="blur",oe=jg;break;case"beforeblur":case"afterblur":oe=jg;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=L0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=a1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=A1;break;case Q0:case J0:case Z0:oe=u1;break;case e_:oe=b1;break;case"scroll":oe=r1;break;case"wheel":oe=x1;break;case"copy":case"cut":case"paste":oe=h1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=I0}var ye=(r&4)!==0,yt=!ye&&n==="scroll",j=ye?K!==null?K+"Capture":null:K;ye=[];for(var O=U,z;O!==null;){z=O;var te=z.stateNode;if(z.tag===5&&te!==null&&(z=te,j!==null&&(te=Mr(O,j),te!=null&&ye.push(pc(O,te,z)))),yt)break;O=O.return}0<ye.length&&(K=new oe(K,me,null,o,J),Z.push({event:K,listeners:ye}))}}if(!(r&7)){e:{if(K=n==="mouseover"||n==="pointerover",oe=n==="mouseout"||n==="pointerout",K&&o!==gt&&(me=o.relatedTarget||o.fromElement)&&(ja(me)||me[Ir]))break e;if((oe||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,oe?(me=o.relatedTarget||o.toElement,oe=U,me=me?ja(me):null,me!==null&&(yt=Na(me),me!==yt||me.tag!==5&&me.tag!==6)&&(me=null)):(oe=null,me=U),oe!==me)){if(ye=L0,te="onMouseLeave",j="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(ye=I0,te="onPointerLeave",j="onPointerEnter",O="pointer"),yt=oe==null?K:yl(oe),z=me==null?K:yl(me),K=new ye(te,O+"leave",oe,o,J),K.target=yt,K.relatedTarget=z,te=null,ja(J)===U&&(ye=new ye(j,O+"enter",me,o,J),ye.target=z,ye.relatedTarget=yt,te=ye),yt=te,oe&&me)t:{for(ye=oe,j=me,O=0,z=ye;z;z=gl(z))O++;for(z=0,te=j;te;te=gl(te))z++;for(;0<O-z;)ye=gl(ye),O--;for(;0<z-O;)j=gl(j),z--;for(;O--;){if(ye===j||j!==null&&ye===j.alternate)break t;ye=gl(ye),j=gl(j)}ye=null}else ye=null;oe!==null&&a_(Z,K,oe,ye,!1),me!==null&&yt!==null&&a_(Z,yt,me,ye,!0)}}e:{if(K=U?yl(U):window,oe=K.nodeName&&K.nodeName.toLowerCase(),oe==="select"||oe==="input"&&K.type==="file")var ve=M1;else if(H0(K))if(B0)ve=F1;else{ve=D1;var Ee=I1}else(oe=K.nodeName)&&oe.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(ve=O1);if(ve&&(ve=ve(n,U))){z0(Z,ve,o,J);break e}Ee&&Ee(n,K,U),n==="focusout"&&(Ee=K._wrapperState)&&Ee.controlled&&K.type==="number"&&wt(K,"number",K.value)}switch(Ee=U?yl(U):window,n){case"focusin":(H0(Ee)||Ee.contentEditable==="true")&&(fl=Ee,Wg=U,hc=null);break;case"focusout":hc=Wg=fl=null;break;case"mousedown":Vg=!0;break;case"contextmenu":case"mouseup":case"dragend":Vg=!1,Y0(Z,o,J);break;case"selectionchange":if(H1)break;case"keydown":case"keyup":Y0(Z,o,J)}var be;if(zg)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else dl?N0(n,o)&&(Se="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Se="onCompositionStart");Se&&(D0&&o.locale!=="ko"&&(dl||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&dl&&(be=P0()):(Ds=J,Dg="value"in Ds?Ds.value:Ds.textContent,dl=!0)),Ee=tf(U,Se),0<Ee.length&&(Se=new M0(Se,n,null,o,J),Z.push({event:Se,listeners:Ee}),be?Se.data=be:(be=j0(o),be!==null&&(Se.data=be)))),(be=k1?T1(n,o):P1(n,o))&&(U=tf(U,"onBeforeInput"),0<U.length&&(J=new M0("onBeforeInput","beforeinput",null,o,J),Z.push({event:J,listeners:U}),J.data=be))}r_(Z,r)})}function pc(n,r,o){return{instance:n,listener:r,currentTarget:o}}function tf(n,r){for(var o=r+"Capture",f=[];n!==null;){var m=n,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=Mr(n,o),_!=null&&f.unshift(pc(n,_,m)),_=Mr(n,r),_!=null&&f.push(pc(n,_,m))),n=n.return}return f}function gl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function a_(n,r,o,f,m){for(var _=r._reactName,C=[];o!==null&&o!==f;){var L=o,I=L.alternate,U=L.stateNode;if(I!==null&&I===f)break;L.tag===5&&U!==null&&(L=U,m?(I=Mr(o,_),I!=null&&C.unshift(pc(o,I,L))):m||(I=Mr(o,_),I!=null&&C.push(pc(o,I,L)))),o=o.return}C.length!==0&&n.push({event:r,listeners:C})}var $1=/\r\n?/g,W1=/\u0000|\uFFFD/g;function o_(n){return(typeof n=="string"?n:""+n).replace($1,`
`).replace(W1,"")}function nf(n,r,o){if(r=o_(r),o_(n)!==r&&o)throw Error(t(425))}function rf(){}var Qg=null,Jg=null;function Zg(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var em=typeof setTimeout=="function"?setTimeout:void 0,V1=typeof clearTimeout=="function"?clearTimeout:void 0,l_=typeof Promise=="function"?Promise:void 0,G1=typeof queueMicrotask=="function"?queueMicrotask:typeof l_<"u"?function(n){return l_.resolve(null).then(n).catch(q1)}:em;function q1(n){setTimeout(function(){throw n})}function tm(n,r){var o=r,f=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(f===0){n.removeChild(m),rc(r);return}f--}else o!=="$"&&o!=="$?"&&o!=="$!"||f++;o=m}while(o);rc(r)}function Fs(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function u_(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}var ml=Math.random().toString(36).slice(2),nr="__reactFiber$"+ml,gc="__reactProps$"+ml,Ir="__reactContainer$"+ml,nm="__reactEvents$"+ml,X1="__reactListeners$"+ml,Y1="__reactHandles$"+ml;function ja(n){var r=n[nr];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Ir]||o[nr]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=u_(n);n!==null;){if(o=n[nr])return o;n=u_(n)}return r}n=o,o=n.parentNode}return null}function mc(n){return n=n[nr]||n[Ir],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function yl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function sf(n){return n[gc]||null}var im=[],vl=-1;function Ns(n){return{current:n}}function Ze(n){0>vl||(n.current=im[vl],im[vl]=null,vl--)}function Ke(n,r){vl++,im[vl]=n.current,n.current=r}var js={},en=Ns(js),xn=Ns(!1),Ha=js;function _l(n,r){var o=n.type.contextTypes;if(!o)return js;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===r)return f.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in o)m[_]=r[_];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=m),m}function Cn(n){return n=n.childContextTypes,n!=null}function af(){Ze(xn),Ze(en)}function c_(n,r,o){if(en.current!==js)throw Error(t(168));Ke(en,r),Ke(xn,o)}function h_(n,r,o){var f=n.stateNode;if(r=r.childContextTypes,typeof f.getChildContext!="function")return o;f=f.getChildContext();for(var m in f)if(!(m in r))throw Error(t(108,ce(n)||"Unknown",m));return Q({},o,f)}function of(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||js,Ha=en.current,Ke(en,n),Ke(xn,xn.current),!0}function d_(n,r,o){var f=n.stateNode;if(!f)throw Error(t(169));o?(n=h_(n,r,Ha),f.__reactInternalMemoizedMergedChildContext=n,Ze(xn),Ze(en),Ke(en,n)):Ze(xn),Ke(xn,o)}var Dr=null,lf=!1,rm=!1;function f_(n){Dr===null?Dr=[n]:Dr.push(n)}function K1(n){lf=!0,f_(n)}function Hs(){if(!rm&&Dr!==null){rm=!0;var n=0,r=$e;try{var o=Dr;for($e=1;n<o.length;n++){var f=o[n];do f=f(!0);while(f!==null)}Dr=null,lf=!1}catch(m){throw Dr!==null&&(Dr=Dr.slice(n+1)),g0(Cg,Hs),m}finally{$e=r,rm=!1}}return null}var wl=[],Al=0,uf=null,cf=0,oi=[],li=0,za=null,Or=1,Fr="";function Ba(n,r){wl[Al++]=cf,wl[Al++]=uf,uf=n,cf=r}function p_(n,r,o){oi[li++]=Or,oi[li++]=Fr,oi[li++]=za,za=n;var f=Or;n=Fr;var m=32-Pi(f)-1;f&=~(1<<m),o+=1;var _=32-Pi(r)+m;if(30<_){var C=m-m%5;_=(f&(1<<C)-1).toString(32),f>>=C,m-=C,Or=1<<32-Pi(r)+m|o<<m|f,Fr=_+n}else Or=1<<_|o<<m|f,Fr=n}function sm(n){n.return!==null&&(Ba(n,1),p_(n,1,0))}function am(n){for(;n===uf;)uf=wl[--Al],wl[Al]=null,cf=wl[--Al],wl[Al]=null;for(;n===za;)za=oi[--li],oi[li]=null,Fr=oi[--li],oi[li]=null,Or=oi[--li],oi[li]=null}var Wn=null,Vn=null,nt=!1,Li=null;function g_(n,r){var o=di(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=n,r=n.deletions,r===null?(n.deletions=[o],n.flags|=16):r.push(o)}function m_(n,r){switch(n.tag){case 5:var o=n.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Wn=n,Vn=Fs(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Wn=n,Vn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=za!==null?{id:Or,overflow:Fr}:null,n.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=di(18,null,null,0),o.stateNode=r,o.return=n,n.child=o,Wn=n,Vn=null,!0):!1;default:return!1}}function om(n){return(n.mode&1)!==0&&(n.flags&128)===0}function lm(n){if(nt){var r=Vn;if(r){var o=r;if(!m_(n,r)){if(om(n))throw Error(t(418));r=Fs(o.nextSibling);var f=Wn;r&&m_(n,r)?g_(f,o):(n.flags=n.flags&-4097|2,nt=!1,Wn=n)}}else{if(om(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,Wn=n}}}function y_(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Wn=n}function hf(n){if(n!==Wn)return!1;if(!nt)return y_(n),nt=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Zg(n.type,n.memoizedProps)),r&&(r=Vn)){if(om(n))throw v_(),Error(t(418));for(;r;)g_(n,r),r=Fs(r.nextSibling)}if(y_(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"){if(r===0){Vn=Fs(n.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}n=n.nextSibling}Vn=null}}else Vn=Wn?Fs(n.stateNode.nextSibling):null;return!0}function v_(){for(var n=Vn;n;)n=Fs(n.nextSibling)}function El(){Vn=Wn=null,nt=!1}function um(n){Li===null?Li=[n]:Li.push(n)}var Q1=M.ReactCurrentBatchConfig;function yc(n,r,o){if(n=o.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(t(309));var f=o.stateNode}if(!f)throw Error(t(147,n));var m=f,_=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===_?r.ref:(r=function(C){var L=m.refs;C===null?delete L[_]:L[_]=C},r._stringRef=_,r)}if(typeof n!="string")throw Error(t(284));if(!o._owner)throw Error(t(290,n))}return n}function df(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function __(n){var r=n._init;return r(n._payload)}function w_(n){function r(j,O){if(n){var z=j.deletions;z===null?(j.deletions=[O],j.flags|=16):z.push(O)}}function o(j,O){if(!n)return null;for(;O!==null;)r(j,O),O=O.sibling;return null}function f(j,O){for(j=new Map;O!==null;)O.key!==null?j.set(O.key,O):j.set(O.index,O),O=O.sibling;return j}function m(j,O){return j=qs(j,O),j.index=0,j.sibling=null,j}function _(j,O,z){return j.index=z,n?(z=j.alternate,z!==null?(z=z.index,z<O?(j.flags|=2,O):z):(j.flags|=2,O)):(j.flags|=1048576,O)}function C(j){return n&&j.alternate===null&&(j.flags|=2),j}function L(j,O,z,te){return O===null||O.tag!==6?(O=ey(z,j.mode,te),O.return=j,O):(O=m(O,z),O.return=j,O)}function I(j,O,z,te){var ve=z.type;return ve===H?J(j,O,z.props.children,te,z.key):O!==null&&(O.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===ue&&__(ve)===O.type)?(te=m(O,z.props),te.ref=yc(j,O,z),te.return=j,te):(te=Ff(z.type,z.key,z.props,null,j.mode,te),te.ref=yc(j,O,z),te.return=j,te)}function U(j,O,z,te){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=ty(z,j.mode,te),O.return=j,O):(O=m(O,z.children||[]),O.return=j,O)}function J(j,O,z,te,ve){return O===null||O.tag!==7?(O=Ya(z,j.mode,te,ve),O.return=j,O):(O=m(O,z),O.return=j,O)}function Z(j,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=ey(""+O,j.mode,z),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case N:return z=Ff(O.type,O.key,O.props,null,j.mode,z),z.ref=yc(j,null,O),z.return=j,z;case F:return O=ty(O,j.mode,z),O.return=j,O;case ue:var te=O._init;return Z(j,te(O._payload),z)}if(ai(O)||ee(O))return O=Ya(O,j.mode,z,null),O.return=j,O;df(j,O)}return null}function K(j,O,z,te){var ve=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ve!==null?null:L(j,O,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case N:return z.key===ve?I(j,O,z,te):null;case F:return z.key===ve?U(j,O,z,te):null;case ue:return ve=z._init,K(j,O,ve(z._payload),te)}if(ai(z)||ee(z))return ve!==null?null:J(j,O,z,te,null);df(j,z)}return null}function oe(j,O,z,te,ve){if(typeof te=="string"&&te!==""||typeof te=="number")return j=j.get(z)||null,L(O,j,""+te,ve);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case N:return j=j.get(te.key===null?z:te.key)||null,I(O,j,te,ve);case F:return j=j.get(te.key===null?z:te.key)||null,U(O,j,te,ve);case ue:var Ee=te._init;return oe(j,O,z,Ee(te._payload),ve)}if(ai(te)||ee(te))return j=j.get(z)||null,J(O,j,te,ve,null);df(O,te)}return null}function me(j,O,z,te){for(var ve=null,Ee=null,be=O,Se=O=0,jt=null;be!==null&&Se<z.length;Se++){be.index>Se?(jt=be,be=null):jt=be.sibling;var He=K(j,be,z[Se],te);if(He===null){be===null&&(be=jt);break}n&&be&&He.alternate===null&&r(j,be),O=_(He,O,Se),Ee===null?ve=He:Ee.sibling=He,Ee=He,be=jt}if(Se===z.length)return o(j,be),nt&&Ba(j,Se),ve;if(be===null){for(;Se<z.length;Se++)be=Z(j,z[Se],te),be!==null&&(O=_(be,O,Se),Ee===null?ve=be:Ee.sibling=be,Ee=be);return nt&&Ba(j,Se),ve}for(be=f(j,be);Se<z.length;Se++)jt=oe(be,j,Se,z[Se],te),jt!==null&&(n&&jt.alternate!==null&&be.delete(jt.key===null?Se:jt.key),O=_(jt,O,Se),Ee===null?ve=jt:Ee.sibling=jt,Ee=jt);return n&&be.forEach(function(Xs){return r(j,Xs)}),nt&&Ba(j,Se),ve}function ye(j,O,z,te){var ve=ee(z);if(typeof ve!="function")throw Error(t(150));if(z=ve.call(z),z==null)throw Error(t(151));for(var Ee=ve=null,be=O,Se=O=0,jt=null,He=z.next();be!==null&&!He.done;Se++,He=z.next()){be.index>Se?(jt=be,be=null):jt=be.sibling;var Xs=K(j,be,He.value,te);if(Xs===null){be===null&&(be=jt);break}n&&be&&Xs.alternate===null&&r(j,be),O=_(Xs,O,Se),Ee===null?ve=Xs:Ee.sibling=Xs,Ee=Xs,be=jt}if(He.done)return o(j,be),nt&&Ba(j,Se),ve;if(be===null){for(;!He.done;Se++,He=z.next())He=Z(j,He.value,te),He!==null&&(O=_(He,O,Se),Ee===null?ve=He:Ee.sibling=He,Ee=He);return nt&&Ba(j,Se),ve}for(be=f(j,be);!He.done;Se++,He=z.next())He=oe(be,j,Se,He.value,te),He!==null&&(n&&He.alternate!==null&&be.delete(He.key===null?Se:He.key),O=_(He,O,Se),Ee===null?ve=He:Ee.sibling=He,Ee=He);return n&&be.forEach(function(Px){return r(j,Px)}),nt&&Ba(j,Se),ve}function yt(j,O,z,te){if(typeof z=="object"&&z!==null&&z.type===H&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case N:e:{for(var ve=z.key,Ee=O;Ee!==null;){if(Ee.key===ve){if(ve=z.type,ve===H){if(Ee.tag===7){o(j,Ee.sibling),O=m(Ee,z.props.children),O.return=j,j=O;break e}}else if(Ee.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===ue&&__(ve)===Ee.type){o(j,Ee.sibling),O=m(Ee,z.props),O.ref=yc(j,Ee,z),O.return=j,j=O;break e}o(j,Ee);break}else r(j,Ee);Ee=Ee.sibling}z.type===H?(O=Ya(z.props.children,j.mode,te,z.key),O.return=j,j=O):(te=Ff(z.type,z.key,z.props,null,j.mode,te),te.ref=yc(j,O,z),te.return=j,j=te)}return C(j);case F:e:{for(Ee=z.key;O!==null;){if(O.key===Ee)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){o(j,O.sibling),O=m(O,z.children||[]),O.return=j,j=O;break e}else{o(j,O);break}else r(j,O);O=O.sibling}O=ty(z,j.mode,te),O.return=j,j=O}return C(j);case ue:return Ee=z._init,yt(j,O,Ee(z._payload),te)}if(ai(z))return me(j,O,z,te);if(ee(z))return ye(j,O,z,te);df(j,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(o(j,O.sibling),O=m(O,z),O.return=j,j=O):(o(j,O),O=ey(z,j.mode,te),O.return=j,j=O),C(j)):o(j,O)}return yt}var bl=w_(!0),A_=w_(!1),ff=Ns(null),pf=null,Sl=null,cm=null;function hm(){cm=Sl=pf=null}function dm(n){var r=ff.current;Ze(ff),n._currentValue=r}function fm(n,r,o){for(;n!==null;){var f=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),n===o)break;n=n.return}}function xl(n,r){pf=n,cm=Sl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&r&&(kn=!0),n.firstContext=null)}function ui(n){var r=n._currentValue;if(cm!==n)if(n={context:n,memoizedValue:r,next:null},Sl===null){if(pf===null)throw Error(t(308));Sl=n,pf.dependencies={lanes:0,firstContext:n}}else Sl=Sl.next=n;return r}var Ua=null;function pm(n){Ua===null?Ua=[n]:Ua.push(n)}function E_(n,r,o,f){var m=r.interleaved;return m===null?(o.next=o,pm(r)):(o.next=m.next,m.next=o),r.interleaved=o,Nr(n,f)}function Nr(n,r){n.lanes|=r;var o=n.alternate;for(o!==null&&(o.lanes|=r),o=n,n=n.return;n!==null;)n.childLanes|=r,o=n.alternate,o!==null&&(o.childLanes|=r),o=n,n=n.return;return o.tag===3?o.stateNode:null}var zs=!1;function gm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b_(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function jr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Bs(n,r,o){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,je&2){var m=f.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),f.pending=r,Nr(n,o)}return m=f.interleaved,m===null?(r.next=r,pm(f)):(r.next=m.next,m.next=r),f.interleaved=r,Nr(n,o)}function gf(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var f=r.lanes;f&=n.pendingLanes,o|=f,r.lanes=o,Pg(n,o)}}function S_(n,r){var o=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,o===f)){var m=null,_=null;if(o=o.firstBaseUpdate,o!==null){do{var C={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};_===null?m=_=C:_=_.next=C,o=o.next}while(o!==null);_===null?m=_=r:_=_.next=r}else m=_=r;o={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:f.shared,effects:f.effects},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}function mf(n,r,o,f){var m=n.updateQueue;zs=!1;var _=m.firstBaseUpdate,C=m.lastBaseUpdate,L=m.shared.pending;if(L!==null){m.shared.pending=null;var I=L,U=I.next;I.next=null,C===null?_=U:C.next=U,C=I;var J=n.alternate;J!==null&&(J=J.updateQueue,L=J.lastBaseUpdate,L!==C&&(L===null?J.firstBaseUpdate=U:L.next=U,J.lastBaseUpdate=I))}if(_!==null){var Z=m.baseState;C=0,J=U=I=null,L=_;do{var K=L.lane,oe=L.eventTime;if((f&K)===K){J!==null&&(J=J.next={eventTime:oe,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var me=n,ye=L;switch(K=r,oe=o,ye.tag){case 1:if(me=ye.payload,typeof me=="function"){Z=me.call(oe,Z,K);break e}Z=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ye.payload,K=typeof me=="function"?me.call(oe,Z,K):me,K==null)break e;Z=Q({},Z,K);break e;case 2:zs=!0}}L.callback!==null&&L.lane!==0&&(n.flags|=64,K=m.effects,K===null?m.effects=[L]:K.push(L))}else oe={eventTime:oe,lane:K,tag:L.tag,payload:L.payload,callback:L.callback,next:null},J===null?(U=J=oe,I=Z):J=J.next=oe,C|=K;if(L=L.next,L===null){if(L=m.shared.pending,L===null)break;K=L,L=K.next,K.next=null,m.lastBaseUpdate=K,m.shared.pending=null}}while(!0);if(J===null&&(I=Z),m.baseState=I,m.firstBaseUpdate=U,m.lastBaseUpdate=J,r=m.shared.interleaved,r!==null){m=r;do C|=m.lane,m=m.next;while(m!==r)}else _===null&&(m.shared.lanes=0);Va|=C,n.lanes=C,n.memoizedState=Z}}function x_(n,r,o){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var f=n[r],m=f.callback;if(m!==null){if(f.callback=null,f=o,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var vc={},ir=Ns(vc),_c=Ns(vc),wc=Ns(vc);function $a(n){if(n===vc)throw Error(t(174));return n}function mm(n,r){switch(Ke(wc,r),Ke(_c,n),Ke(ir,vc),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:xs(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=xs(r,n)}Ze(ir),Ke(ir,r)}function Cl(){Ze(ir),Ze(_c),Ze(wc)}function C_(n){$a(wc.current);var r=$a(ir.current),o=xs(r,n.type);r!==o&&(Ke(_c,n),Ke(ir,o))}function ym(n){_c.current===n&&(Ze(ir),Ze(_c))}var st=Ns(0);function yf(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vm=[];function _m(){for(var n=0;n<vm.length;n++)vm[n]._workInProgressVersionPrimary=null;vm.length=0}var vf=M.ReactCurrentDispatcher,wm=M.ReactCurrentBatchConfig,Wa=0,at=null,Ct=null,Ft=null,_f=!1,Ac=!1,Ec=0,J1=0;function tn(){throw Error(t(321))}function Am(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!Ri(n[o],r[o]))return!1;return!0}function Em(n,r,o,f,m,_){if(Wa=_,at=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,vf.current=n===null||n.memoizedState===null?nx:ix,n=o(f,m),Ac){_=0;do{if(Ac=!1,Ec=0,25<=_)throw Error(t(301));_+=1,Ft=Ct=null,r.updateQueue=null,vf.current=rx,n=o(f,m)}while(Ac)}if(vf.current=Ef,r=Ct!==null&&Ct.next!==null,Wa=0,Ft=Ct=at=null,_f=!1,r)throw Error(t(300));return n}function bm(){var n=Ec!==0;return Ec=0,n}function rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?at.memoizedState=Ft=n:Ft=Ft.next=n,Ft}function ci(){if(Ct===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=Ct.next;var r=Ft===null?at.memoizedState:Ft.next;if(r!==null)Ft=r,Ct=n;else{if(n===null)throw Error(t(310));Ct=n,n={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Ft===null?at.memoizedState=Ft=n:Ft=Ft.next=n}return Ft}function bc(n,r){return typeof r=="function"?r(n):r}function Sm(n){var r=ci(),o=r.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var f=Ct,m=f.baseQueue,_=o.pending;if(_!==null){if(m!==null){var C=m.next;m.next=_.next,_.next=C}f.baseQueue=m=_,o.pending=null}if(m!==null){_=m.next,f=f.baseState;var L=C=null,I=null,U=_;do{var J=U.lane;if((Wa&J)===J)I!==null&&(I=I.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),f=U.hasEagerState?U.eagerState:n(f,U.action);else{var Z={lane:J,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};I===null?(L=I=Z,C=f):I=I.next=Z,at.lanes|=J,Va|=J}U=U.next}while(U!==null&&U!==_);I===null?C=f:I.next=L,Ri(f,r.memoizedState)||(kn=!0),r.memoizedState=f,r.baseState=C,r.baseQueue=I,o.lastRenderedState=f}if(n=o.interleaved,n!==null){m=n;do _=m.lane,at.lanes|=_,Va|=_,m=m.next;while(m!==n)}else m===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function xm(n){var r=ci(),o=r.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var f=o.dispatch,m=o.pending,_=r.memoizedState;if(m!==null){o.pending=null;var C=m=m.next;do _=n(_,C.action),C=C.next;while(C!==m);Ri(_,r.memoizedState)||(kn=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),o.lastRenderedState=_}return[_,f]}function k_(){}function T_(n,r){var o=at,f=ci(),m=r(),_=!Ri(f.memoizedState,m);if(_&&(f.memoizedState=m,kn=!0),f=f.queue,Cm(L_.bind(null,o,f,n),[n]),f.getSnapshot!==r||_||Ft!==null&&Ft.memoizedState.tag&1){if(o.flags|=2048,Sc(9,R_.bind(null,o,f,m,r),void 0,null),Nt===null)throw Error(t(349));Wa&30||P_(o,r,m)}return m}function P_(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=at.updateQueue,r===null?(r={lastEffect:null,stores:null},at.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function R_(n,r,o,f){r.value=o,r.getSnapshot=f,M_(r)&&I_(n)}function L_(n,r,o){return o(function(){M_(r)&&I_(n)})}function M_(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!Ri(n,o)}catch{return!0}}function I_(n){var r=Nr(n,1);r!==null&&Oi(r,n,1,-1)}function D_(n){var r=rr();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:n},r.queue=n,n=n.dispatch=tx.bind(null,at,n),[r.memoizedState,n]}function Sc(n,r,o,f){return n={tag:n,create:r,destroy:o,deps:f,next:null},r=at.updateQueue,r===null?(r={lastEffect:null,stores:null},at.updateQueue=r,r.lastEffect=n.next=n):(o=r.lastEffect,o===null?r.lastEffect=n.next=n:(f=o.next,o.next=n,n.next=f,r.lastEffect=n)),n}function O_(){return ci().memoizedState}function wf(n,r,o,f){var m=rr();at.flags|=n,m.memoizedState=Sc(1|r,o,void 0,f===void 0?null:f)}function Af(n,r,o,f){var m=ci();f=f===void 0?null:f;var _=void 0;if(Ct!==null){var C=Ct.memoizedState;if(_=C.destroy,f!==null&&Am(f,C.deps)){m.memoizedState=Sc(r,o,_,f);return}}at.flags|=n,m.memoizedState=Sc(1|r,o,_,f)}function F_(n,r){return wf(8390656,8,n,r)}function Cm(n,r){return Af(2048,8,n,r)}function N_(n,r){return Af(4,2,n,r)}function j_(n,r){return Af(4,4,n,r)}function H_(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function z_(n,r,o){return o=o!=null?o.concat([n]):null,Af(4,4,H_.bind(null,r,n),o)}function km(){}function B_(n,r){var o=ci();r=r===void 0?null:r;var f=o.memoizedState;return f!==null&&r!==null&&Am(r,f[1])?f[0]:(o.memoizedState=[n,r],n)}function U_(n,r){var o=ci();r=r===void 0?null:r;var f=o.memoizedState;return f!==null&&r!==null&&Am(r,f[1])?f[0]:(n=n(),o.memoizedState=[n,r],n)}function $_(n,r,o){return Wa&21?(Ri(o,r)||(o=_0(),at.lanes|=o,Va|=o,n.baseState=!0),r):(n.baseState&&(n.baseState=!1,kn=!0),n.memoizedState=o)}function Z1(n,r){var o=$e;$e=o!==0&&4>o?o:4,n(!0);var f=wm.transition;wm.transition={};try{n(!1),r()}finally{$e=o,wm.transition=f}}function W_(){return ci().memoizedState}function ex(n,r,o){var f=Vs(n);if(o={lane:f,action:o,hasEagerState:!1,eagerState:null,next:null},V_(n))G_(r,o);else if(o=E_(n,r,o,f),o!==null){var m=mn();Oi(o,n,f,m),q_(o,r,f)}}function tx(n,r,o){var f=Vs(n),m={lane:f,action:o,hasEagerState:!1,eagerState:null,next:null};if(V_(n))G_(r,m);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var C=r.lastRenderedState,L=_(C,o);if(m.hasEagerState=!0,m.eagerState=L,Ri(L,C)){var I=r.interleaved;I===null?(m.next=m,pm(r)):(m.next=I.next,I.next=m),r.interleaved=m;return}}catch{}finally{}o=E_(n,r,m,f),o!==null&&(m=mn(),Oi(o,n,f,m),q_(o,r,f))}}function V_(n){var r=n.alternate;return n===at||r!==null&&r===at}function G_(n,r){Ac=_f=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function q_(n,r,o){if(o&4194240){var f=r.lanes;f&=n.pendingLanes,o|=f,r.lanes=o,Pg(n,o)}}var Ef={readContext:ui,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},nx={readContext:ui,useCallback:function(n,r){return rr().memoizedState=[n,r===void 0?null:r],n},useContext:ui,useEffect:F_,useImperativeHandle:function(n,r,o){return o=o!=null?o.concat([n]):null,wf(4194308,4,H_.bind(null,r,n),o)},useLayoutEffect:function(n,r){return wf(4194308,4,n,r)},useInsertionEffect:function(n,r){return wf(4,2,n,r)},useMemo:function(n,r){var o=rr();return r=r===void 0?null:r,n=n(),o.memoizedState=[n,r],n},useReducer:function(n,r,o){var f=rr();return r=o!==void 0?o(r):r,f.memoizedState=f.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},f.queue=n,n=n.dispatch=ex.bind(null,at,n),[f.memoizedState,n]},useRef:function(n){var r=rr();return n={current:n},r.memoizedState=n},useState:D_,useDebugValue:km,useDeferredValue:function(n){return rr().memoizedState=n},useTransition:function(){var n=D_(!1),r=n[0];return n=Z1.bind(null,n[1]),rr().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,o){var f=at,m=rr();if(nt){if(o===void 0)throw Error(t(407));o=o()}else{if(o=r(),Nt===null)throw Error(t(349));Wa&30||P_(f,r,o)}m.memoizedState=o;var _={value:o,getSnapshot:r};return m.queue=_,F_(L_.bind(null,f,_,n),[n]),f.flags|=2048,Sc(9,R_.bind(null,f,_,o,r),void 0,null),o},useId:function(){var n=rr(),r=Nt.identifierPrefix;if(nt){var o=Fr,f=Or;o=(f&~(1<<32-Pi(f)-1)).toString(32)+o,r=":"+r+"R"+o,o=Ec++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=J1++,r=":"+r+"r"+o.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},ix={readContext:ui,useCallback:B_,useContext:ui,useEffect:Cm,useImperativeHandle:z_,useInsertionEffect:N_,useLayoutEffect:j_,useMemo:U_,useReducer:Sm,useRef:O_,useState:function(){return Sm(bc)},useDebugValue:km,useDeferredValue:function(n){var r=ci();return $_(r,Ct.memoizedState,n)},useTransition:function(){var n=Sm(bc)[0],r=ci().memoizedState;return[n,r]},useMutableSource:k_,useSyncExternalStore:T_,useId:W_,unstable_isNewReconciler:!1},rx={readContext:ui,useCallback:B_,useContext:ui,useEffect:Cm,useImperativeHandle:z_,useInsertionEffect:N_,useLayoutEffect:j_,useMemo:U_,useReducer:xm,useRef:O_,useState:function(){return xm(bc)},useDebugValue:km,useDeferredValue:function(n){var r=ci();return Ct===null?r.memoizedState=n:$_(r,Ct.memoizedState,n)},useTransition:function(){var n=xm(bc)[0],r=ci().memoizedState;return[n,r]},useMutableSource:k_,useSyncExternalStore:T_,useId:W_,unstable_isNewReconciler:!1};function Mi(n,r){if(n&&n.defaultProps){r=Q({},r),n=n.defaultProps;for(var o in n)r[o]===void 0&&(r[o]=n[o]);return r}return r}function Tm(n,r,o,f){r=n.memoizedState,o=o(f,r),o=o==null?r:Q({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var bf={isMounted:function(n){return(n=n._reactInternals)?Na(n)===n:!1},enqueueSetState:function(n,r,o){n=n._reactInternals;var f=mn(),m=Vs(n),_=jr(f,m);_.payload=r,o!=null&&(_.callback=o),r=Bs(n,_,m),r!==null&&(Oi(r,n,m,f),gf(r,n,m))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var f=mn(),m=Vs(n),_=jr(f,m);_.tag=1,_.payload=r,o!=null&&(_.callback=o),r=Bs(n,_,m),r!==null&&(Oi(r,n,m,f),gf(r,n,m))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=mn(),f=Vs(n),m=jr(o,f);m.tag=2,r!=null&&(m.callback=r),r=Bs(n,m,f),r!==null&&(Oi(r,n,f,o),gf(r,n,f))}};function X_(n,r,o,f,m,_,C){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,_,C):r.prototype&&r.prototype.isPureReactComponent?!cc(o,f)||!cc(m,_):!0}function Y_(n,r,o){var f=!1,m=js,_=r.contextType;return typeof _=="object"&&_!==null?_=ui(_):(m=Cn(r)?Ha:en.current,f=r.contextTypes,_=(f=f!=null)?_l(n,m):js),r=new r(o,_),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=bf,n.stateNode=r,r._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=_),r}function K_(n,r,o,f){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,f),r.state!==n&&bf.enqueueReplaceState(r,r.state,null)}function Pm(n,r,o,f){var m=n.stateNode;m.props=o,m.state=n.memoizedState,m.refs={},gm(n);var _=r.contextType;typeof _=="object"&&_!==null?m.context=ui(_):(_=Cn(r)?Ha:en.current,m.context=_l(n,_)),m.state=n.memoizedState,_=r.getDerivedStateFromProps,typeof _=="function"&&(Tm(n,r,_,o),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(r=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),r!==m.state&&bf.enqueueReplaceState(m,m.state,null),mf(n,o,m,f),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function kl(n,r){try{var o="",f=r;do o+=we(f),f=f.return;while(f);var m=o}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:n,source:r,stack:m,digest:null}}function Rm(n,r,o){return{value:n,source:null,stack:o??null,digest:r??null}}function Lm(n,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var sx=typeof WeakMap=="function"?WeakMap:Map;function Q_(n,r,o){o=jr(-1,o),o.tag=3,o.payload={element:null};var f=r.value;return o.callback=function(){Rf||(Rf=!0,Gm=f),Lm(n,r)},o}function J_(n,r,o){o=jr(-1,o),o.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var m=r.value;o.payload=function(){return f(m)},o.callback=function(){Lm(n,r)}}var _=n.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(o.callback=function(){Lm(n,r),typeof f!="function"&&($s===null?$s=new Set([this]):$s.add(this));var C=r.stack;this.componentDidCatch(r.value,{componentStack:C!==null?C:""})}),o}function Z_(n,r,o){var f=n.pingCache;if(f===null){f=n.pingCache=new sx;var m=new Set;f.set(r,m)}else m=f.get(r),m===void 0&&(m=new Set,f.set(r,m));m.has(o)||(m.add(o),n=_x.bind(null,n,r,o),r.then(n,n))}function ew(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function tw(n,r,o,f,m){return n.mode&1?(n.flags|=65536,n.lanes=m,n):(n===r?n.flags|=65536:(n.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=jr(-1,1),r.tag=2,Bs(o,r,1))),o.lanes|=1),n)}var ax=M.ReactCurrentOwner,kn=!1;function gn(n,r,o,f){r.child=n===null?A_(r,null,o,f):bl(r,n.child,o,f)}function nw(n,r,o,f,m){o=o.render;var _=r.ref;return xl(r,m),f=Em(n,r,o,f,_,m),o=bm(),n!==null&&!kn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~m,Hr(n,r,m)):(nt&&o&&sm(r),r.flags|=1,gn(n,r,f,m),r.child)}function iw(n,r,o,f,m){if(n===null){var _=o.type;return typeof _=="function"&&!Zm(_)&&_.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=_,rw(n,r,_,f,m)):(n=Ff(o.type,null,f,r,r.mode,m),n.ref=r.ref,n.return=r,r.child=n)}if(_=n.child,!(n.lanes&m)){var C=_.memoizedProps;if(o=o.compare,o=o!==null?o:cc,o(C,f)&&n.ref===r.ref)return Hr(n,r,m)}return r.flags|=1,n=qs(_,f),n.ref=r.ref,n.return=r,r.child=n}function rw(n,r,o,f,m){if(n!==null){var _=n.memoizedProps;if(cc(_,f)&&n.ref===r.ref)if(kn=!1,r.pendingProps=f=_,(n.lanes&m)!==0)n.flags&131072&&(kn=!0);else return r.lanes=n.lanes,Hr(n,r,m)}return Mm(n,r,o,f,m)}function sw(n,r,o){var f=r.pendingProps,m=f.children,_=n!==null?n.memoizedState:null;if(f.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Pl,Gn),Gn|=o;else{if(!(o&1073741824))return n=_!==null?_.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Ke(Pl,Gn),Gn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:o,Ke(Pl,Gn),Gn|=f}else _!==null?(f=_.baseLanes|o,r.memoizedState=null):f=o,Ke(Pl,Gn),Gn|=f;return gn(n,r,m,o),r.child}function aw(n,r){var o=r.ref;(n===null&&o!==null||n!==null&&n.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Mm(n,r,o,f,m){var _=Cn(o)?Ha:en.current;return _=_l(r,_),xl(r,m),o=Em(n,r,o,f,_,m),f=bm(),n!==null&&!kn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~m,Hr(n,r,m)):(nt&&f&&sm(r),r.flags|=1,gn(n,r,o,m),r.child)}function ow(n,r,o,f,m){if(Cn(o)){var _=!0;of(r)}else _=!1;if(xl(r,m),r.stateNode===null)xf(n,r),Y_(r,o,f),Pm(r,o,f,m),f=!0;else if(n===null){var C=r.stateNode,L=r.memoizedProps;C.props=L;var I=C.context,U=o.contextType;typeof U=="object"&&U!==null?U=ui(U):(U=Cn(o)?Ha:en.current,U=_l(r,U));var J=o.getDerivedStateFromProps,Z=typeof J=="function"||typeof C.getSnapshotBeforeUpdate=="function";Z||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(L!==f||I!==U)&&K_(r,C,f,U),zs=!1;var K=r.memoizedState;C.state=K,mf(r,f,C,m),I=r.memoizedState,L!==f||K!==I||xn.current||zs?(typeof J=="function"&&(Tm(r,o,J,f),I=r.memoizedState),(L=zs||X_(r,o,L,f,K,I,U))?(Z||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(r.flags|=4194308)):(typeof C.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=I),C.props=f,C.state=I,C.context=U,f=L):(typeof C.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{C=r.stateNode,b_(n,r),L=r.memoizedProps,U=r.type===r.elementType?L:Mi(r.type,L),C.props=U,Z=r.pendingProps,K=C.context,I=o.contextType,typeof I=="object"&&I!==null?I=ui(I):(I=Cn(o)?Ha:en.current,I=_l(r,I));var oe=o.getDerivedStateFromProps;(J=typeof oe=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(L!==Z||K!==I)&&K_(r,C,f,I),zs=!1,K=r.memoizedState,C.state=K,mf(r,f,C,m);var me=r.memoizedState;L!==Z||K!==me||xn.current||zs?(typeof oe=="function"&&(Tm(r,o,oe,f),me=r.memoizedState),(U=zs||X_(r,o,U,f,K,me,I)||!1)?(J||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(f,me,I),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(f,me,I)),typeof C.componentDidUpdate=="function"&&(r.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof C.componentDidUpdate!="function"||L===n.memoizedProps&&K===n.memoizedState||(r.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&K===n.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=me),C.props=f,C.state=me,C.context=I,f=U):(typeof C.componentDidUpdate!="function"||L===n.memoizedProps&&K===n.memoizedState||(r.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&K===n.memoizedState||(r.flags|=1024),f=!1)}return Im(n,r,o,f,_,m)}function Im(n,r,o,f,m,_){aw(n,r);var C=(r.flags&128)!==0;if(!f&&!C)return m&&d_(r,o,!1),Hr(n,r,_);f=r.stateNode,ax.current=r;var L=C&&typeof o.getDerivedStateFromError!="function"?null:f.render();return r.flags|=1,n!==null&&C?(r.child=bl(r,n.child,null,_),r.child=bl(r,null,L,_)):gn(n,r,L,_),r.memoizedState=f.state,m&&d_(r,o,!0),r.child}function lw(n){var r=n.stateNode;r.pendingContext?c_(n,r.pendingContext,r.pendingContext!==r.context):r.context&&c_(n,r.context,!1),mm(n,r.containerInfo)}function uw(n,r,o,f,m){return El(),um(m),r.flags|=256,gn(n,r,o,f),r.child}var Dm={dehydrated:null,treeContext:null,retryLane:0};function Om(n){return{baseLanes:n,cachePool:null,transitions:null}}function cw(n,r,o){var f=r.pendingProps,m=st.current,_=!1,C=(r.flags&128)!==0,L;if((L=C)||(L=n!==null&&n.memoizedState===null?!1:(m&2)!==0),L?(_=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),Ke(st,m&1),n===null)return lm(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(r.mode&1?n.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(C=f.children,n=f.fallback,_?(f=r.mode,_=r.child,C={mode:"hidden",children:C},!(f&1)&&_!==null?(_.childLanes=0,_.pendingProps=C):_=Nf(C,f,0,null),n=Ya(n,f,o,null),_.return=r,n.return=r,_.sibling=n,r.child=_,r.child.memoizedState=Om(o),r.memoizedState=Dm,n):Fm(r,C));if(m=n.memoizedState,m!==null&&(L=m.dehydrated,L!==null))return ox(n,r,C,f,L,m,o);if(_){_=f.fallback,C=r.mode,m=n.child,L=m.sibling;var I={mode:"hidden",children:f.children};return!(C&1)&&r.child!==m?(f=r.child,f.childLanes=0,f.pendingProps=I,r.deletions=null):(f=qs(m,I),f.subtreeFlags=m.subtreeFlags&14680064),L!==null?_=qs(L,_):(_=Ya(_,C,o,null),_.flags|=2),_.return=r,f.return=r,f.sibling=_,r.child=f,f=_,_=r.child,C=n.child.memoizedState,C=C===null?Om(o):{baseLanes:C.baseLanes|o,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=n.childLanes&~o,r.memoizedState=Dm,f}return _=n.child,n=_.sibling,f=qs(_,{mode:"visible",children:f.children}),!(r.mode&1)&&(f.lanes=o),f.return=r,f.sibling=null,n!==null&&(o=r.deletions,o===null?(r.deletions=[n],r.flags|=16):o.push(n)),r.child=f,r.memoizedState=null,f}function Fm(n,r){return r=Nf({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Sf(n,r,o,f){return f!==null&&um(f),bl(r,n.child,null,o),n=Fm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function ox(n,r,o,f,m,_,C){if(o)return r.flags&256?(r.flags&=-257,f=Rm(Error(t(422))),Sf(n,r,C,f)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(_=f.fallback,m=r.mode,f=Nf({mode:"visible",children:f.children},m,0,null),_=Ya(_,m,C,null),_.flags|=2,f.return=r,_.return=r,f.sibling=_,r.child=f,r.mode&1&&bl(r,n.child,null,C),r.child.memoizedState=Om(C),r.memoizedState=Dm,_);if(!(r.mode&1))return Sf(n,r,C,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var L=f.dgst;return f=L,_=Error(t(419)),f=Rm(_,f,void 0),Sf(n,r,C,f)}if(L=(C&n.childLanes)!==0,kn||L){if(f=Nt,f!==null){switch(C&-C){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(f.suspendedLanes|C)?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,Nr(n,m),Oi(f,n,m,-1))}return Jm(),f=Rm(Error(t(421))),Sf(n,r,C,f)}return m.data==="$?"?(r.flags|=128,r.child=n.child,r=wx.bind(null,n),m._reactRetry=r,null):(n=_.treeContext,Vn=Fs(m.nextSibling),Wn=r,nt=!0,Li=null,n!==null&&(oi[li++]=Or,oi[li++]=Fr,oi[li++]=za,Or=n.id,Fr=n.overflow,za=r),r=Fm(r,f.children),r.flags|=4096,r)}function hw(n,r,o){n.lanes|=r;var f=n.alternate;f!==null&&(f.lanes|=r),fm(n.return,r,o)}function Nm(n,r,o,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:o,tailMode:m}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=o,_.tailMode=m)}function dw(n,r,o){var f=r.pendingProps,m=f.revealOrder,_=f.tail;if(gn(n,r,f.children,o),f=st.current,f&2)f=f&1|2,r.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&hw(n,o,r);else if(n.tag===19)hw(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(Ke(st,f),!(r.mode&1))r.memoizedState=null;else switch(m){case"forwards":for(o=r.child,m=null;o!==null;)n=o.alternate,n!==null&&yf(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=r.child,r.child=null):(m=o.sibling,o.sibling=null),Nm(r,!1,m,o,_);break;case"backwards":for(o=null,m=r.child,r.child=null;m!==null;){if(n=m.alternate,n!==null&&yf(n)===null){r.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}Nm(r,!0,o,null,_);break;case"together":Nm(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function xf(n,r){!(r.mode&1)&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Hr(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Va|=r.lanes,!(o&r.childLanes))return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,o=qs(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=qs(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function lx(n,r,o){switch(r.tag){case 3:lw(r),El();break;case 5:C_(r);break;case 1:Cn(r.type)&&of(r);break;case 4:mm(r,r.stateNode.containerInfo);break;case 10:var f=r.type._context,m=r.memoizedProps.value;Ke(ff,f._currentValue),f._currentValue=m;break;case 13:if(f=r.memoizedState,f!==null)return f.dehydrated!==null?(Ke(st,st.current&1),r.flags|=128,null):o&r.child.childLanes?cw(n,r,o):(Ke(st,st.current&1),n=Hr(n,r,o),n!==null?n.sibling:null);Ke(st,st.current&1);break;case 19:if(f=(o&r.childLanes)!==0,n.flags&128){if(f)return dw(n,r,o);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ke(st,st.current),f)break;return null;case 22:case 23:return r.lanes=0,sw(n,r,o)}return Hr(n,r,o)}var fw,jm,pw,gw;fw=function(n,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)n.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},jm=function(){},pw=function(n,r,o,f){var m=n.memoizedProps;if(m!==f){n=r.stateNode,$a(ir.current);var _=null;switch(o){case"input":m=dn(n,m),f=dn(n,f),_=[];break;case"select":m=Q({},m,{value:void 0}),f=Q({},f,{value:void 0}),_=[];break;case"textarea":m=zn(n,m),f=zn(n,f),_=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=rf)}Wt(o,f);var C;o=null;for(U in m)if(!f.hasOwnProperty(U)&&m.hasOwnProperty(U)&&m[U]!=null)if(U==="style"){var L=m[U];for(C in L)L.hasOwnProperty(C)&&(o||(o={}),o[C]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(s.hasOwnProperty(U)?_||(_=[]):(_=_||[]).push(U,null));for(U in f){var I=f[U];if(L=m!=null?m[U]:void 0,f.hasOwnProperty(U)&&I!==L&&(I!=null||L!=null))if(U==="style")if(L){for(C in L)!L.hasOwnProperty(C)||I&&I.hasOwnProperty(C)||(o||(o={}),o[C]="");for(C in I)I.hasOwnProperty(C)&&L[C]!==I[C]&&(o||(o={}),o[C]=I[C])}else o||(_||(_=[]),_.push(U,o)),o=I;else U==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,L=L?L.__html:void 0,I!=null&&L!==I&&(_=_||[]).push(U,I)):U==="children"?typeof I!="string"&&typeof I!="number"||(_=_||[]).push(U,""+I):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(s.hasOwnProperty(U)?(I!=null&&U==="onScroll"&&Je("scroll",n),_||L===I||(_=[])):(_=_||[]).push(U,I))}o&&(_=_||[]).push("style",o);var U=_;(r.updateQueue=U)&&(r.flags|=4)}},gw=function(n,r,o,f){o!==f&&(r.flags|=4)};function xc(n,r){if(!nt)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function nn(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,f=0;if(r)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=f,n.childLanes=o,r}function ux(n,r,o){var f=r.pendingProps;switch(am(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(r),null;case 1:return Cn(r.type)&&af(),nn(r),null;case 3:return f=r.stateNode,Cl(),Ze(xn),Ze(en),_m(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(hf(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Li!==null&&(Ym(Li),Li=null))),jm(n,r),nn(r),null;case 5:ym(r);var m=$a(wc.current);if(o=r.type,n!==null&&r.stateNode!=null)pw(n,r,o,f,m),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!f){if(r.stateNode===null)throw Error(t(166));return nn(r),null}if(n=$a(ir.current),hf(r)){f=r.stateNode,o=r.type;var _=r.memoizedProps;switch(f[nr]=r,f[gc]=_,n=(r.mode&1)!==0,o){case"dialog":Je("cancel",f),Je("close",f);break;case"iframe":case"object":case"embed":Je("load",f);break;case"video":case"audio":for(m=0;m<dc.length;m++)Je(dc[m],f);break;case"source":Je("error",f);break;case"img":case"image":case"link":Je("error",f),Je("load",f);break;case"details":Je("toggle",f);break;case"input":xt(f,_),Je("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},Je("invalid",f);break;case"textarea":Zi(f,_),Je("invalid",f)}Wt(o,_),m=null;for(var C in _)if(_.hasOwnProperty(C)){var L=_[C];C==="children"?typeof L=="string"?f.textContent!==L&&(_.suppressHydrationWarning!==!0&&nf(f.textContent,L,n),m=["children",L]):typeof L=="number"&&f.textContent!==""+L&&(_.suppressHydrationWarning!==!0&&nf(f.textContent,L,n),m=["children",""+L]):s.hasOwnProperty(C)&&L!=null&&C==="onScroll"&&Je("scroll",f)}switch(o){case"input":jn(f),xi(f,_,!0);break;case"textarea":jn(f),Pr(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=rf)}f=m,r.updateQueue=f,f!==null&&(r.flags|=4)}else{C=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Rr(o)),n==="http://www.w3.org/1999/xhtml"?o==="script"?(n=C.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=C.createElement(o,{is:f.is}):(n=C.createElement(o),o==="select"&&(C=n,f.multiple?C.multiple=!0:f.size&&(C.size=f.size))):n=C.createElementNS(n,o),n[nr]=r,n[gc]=f,fw(n,r,!1,!1),r.stateNode=n;e:{switch(C=Oa(o,f),o){case"dialog":Je("cancel",n),Je("close",n),m=f;break;case"iframe":case"object":case"embed":Je("load",n),m=f;break;case"video":case"audio":for(m=0;m<dc.length;m++)Je(dc[m],n);m=f;break;case"source":Je("error",n),m=f;break;case"img":case"image":case"link":Je("error",n),Je("load",n),m=f;break;case"details":Je("toggle",n),m=f;break;case"input":xt(n,f),m=dn(n,f),Je("invalid",n);break;case"option":m=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},m=Q({},f,{value:void 0}),Je("invalid",n);break;case"textarea":Zi(n,f),m=zn(n,f),Je("invalid",n);break;default:m=f}Wt(o,m),L=m;for(_ in L)if(L.hasOwnProperty(_)){var I=L[_];_==="style"?Bn(n,I):_==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&ki(n,I)):_==="children"?typeof I=="string"?(o!=="textarea"||I!=="")&&qe(n,I):typeof I=="number"&&qe(n,""+I):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?I!=null&&_==="onScroll"&&Je("scroll",n):I!=null&&P(n,_,I,C))}switch(o){case"input":jn(n),xi(n,f,!1);break;case"textarea":jn(n),Pr(n);break;case"option":f.value!=null&&n.setAttribute("value",""+xe(f.value));break;case"select":n.multiple=!!f.multiple,_=f.value,_!=null?fn(n,!!f.multiple,_,!1):f.defaultValue!=null&&fn(n,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=rf)}switch(o){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return nn(r),null;case 6:if(n&&r.stateNode!=null)gw(n,r,n.memoizedProps,f);else{if(typeof f!="string"&&r.stateNode===null)throw Error(t(166));if(o=$a(wc.current),$a(ir.current),hf(r)){if(f=r.stateNode,o=r.memoizedProps,f[nr]=r,(_=f.nodeValue!==o)&&(n=Wn,n!==null))switch(n.tag){case 3:nf(f.nodeValue,o,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nf(f.nodeValue,o,(n.mode&1)!==0)}_&&(r.flags|=4)}else f=(o.nodeType===9?o:o.ownerDocument).createTextNode(f),f[nr]=r,r.stateNode=f}return nn(r),null;case 13:if(Ze(st),f=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&Vn!==null&&r.mode&1&&!(r.flags&128))v_(),El(),r.flags|=98560,_=!1;else if(_=hf(r),f!==null&&f.dehydrated!==null){if(n===null){if(!_)throw Error(t(318));if(_=r.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[nr]=r}else El(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;nn(r),_=!1}else Li!==null&&(Ym(Li),Li=null),_=!0;if(!_)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(r.child.flags|=8192,r.mode&1&&(n===null||st.current&1?kt===0&&(kt=3):Jm())),r.updateQueue!==null&&(r.flags|=4),nn(r),null);case 4:return Cl(),jm(n,r),n===null&&fc(r.stateNode.containerInfo),nn(r),null;case 10:return dm(r.type._context),nn(r),null;case 17:return Cn(r.type)&&af(),nn(r),null;case 19:if(Ze(st),_=r.memoizedState,_===null)return nn(r),null;if(f=(r.flags&128)!==0,C=_.rendering,C===null)if(f)xc(_,!1);else{if(kt!==0||n!==null&&n.flags&128)for(n=r.child;n!==null;){if(C=yf(n),C!==null){for(r.flags|=128,xc(_,!1),f=C.updateQueue,f!==null&&(r.updateQueue=f,r.flags|=4),r.subtreeFlags=0,f=o,o=r.child;o!==null;)_=o,n=f,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=n,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,n=C.dependencies,_.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),o=o.sibling;return Ke(st,st.current&1|2),r.child}n=n.sibling}_.tail!==null&&mt()>Rl&&(r.flags|=128,f=!0,xc(_,!1),r.lanes=4194304)}else{if(!f)if(n=yf(C),n!==null){if(r.flags|=128,f=!0,o=n.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),xc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!nt)return nn(r),null}else 2*mt()-_.renderingStartTime>Rl&&o!==1073741824&&(r.flags|=128,f=!0,xc(_,!1),r.lanes=4194304);_.isBackwards?(C.sibling=r.child,r.child=C):(o=_.last,o!==null?o.sibling=C:r.child=C,_.last=C)}return _.tail!==null?(r=_.tail,_.rendering=r,_.tail=r.sibling,_.renderingStartTime=mt(),r.sibling=null,o=st.current,Ke(st,f?o&1|2:o&1),r):(nn(r),null);case 22:case 23:return Qm(),f=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(r.flags|=8192),f&&r.mode&1?Gn&1073741824&&(nn(r),r.subtreeFlags&6&&(r.flags|=8192)):nn(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function cx(n,r){switch(am(r),r.tag){case 1:return Cn(r.type)&&af(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Cl(),Ze(xn),Ze(en),_m(),n=r.flags,n&65536&&!(n&128)?(r.flags=n&-65537|128,r):null;case 5:return ym(r),null;case 13:if(Ze(st),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));El()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Ze(st),null;case 4:return Cl(),null;case 10:return dm(r.type._context),null;case 22:case 23:return Qm(),null;case 24:return null;default:return null}}var Cf=!1,rn=!1,hx=typeof WeakSet=="function"?WeakSet:Set,he=null;function Tl(n,r){var o=n.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(f){dt(n,r,f)}else o.current=null}function Hm(n,r,o){try{o()}catch(f){dt(n,r,f)}}var mw=!1;function dx(n,r){if(Qg=Vd,n=X0(),$g(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var f=o.getSelection&&o.getSelection();if(f&&f.rangeCount!==0){o=f.anchorNode;var m=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{o.nodeType,_.nodeType}catch{o=null;break e}var C=0,L=-1,I=-1,U=0,J=0,Z=n,K=null;t:for(;;){for(var oe;Z!==o||m!==0&&Z.nodeType!==3||(L=C+m),Z!==_||f!==0&&Z.nodeType!==3||(I=C+f),Z.nodeType===3&&(C+=Z.nodeValue.length),(oe=Z.firstChild)!==null;)K=Z,Z=oe;for(;;){if(Z===n)break t;if(K===o&&++U===m&&(L=C),K===_&&++J===f&&(I=C),(oe=Z.nextSibling)!==null)break;Z=K,K=Z.parentNode}Z=oe}o=L===-1||I===-1?null:{start:L,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(Jg={focusedElem:n,selectionRange:o},Vd=!1,he=r;he!==null;)if(r=he,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,he=n;else for(;he!==null;){r=he;try{var me=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ye=me.memoizedProps,yt=me.memoizedState,j=r.stateNode,O=j.getSnapshotBeforeUpdate(r.elementType===r.type?ye:Mi(r.type,ye),yt);j.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=r.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){dt(r,r.return,te)}if(n=r.sibling,n!==null){n.return=r.return,he=n;break}he=r.return}return me=mw,mw=!1,me}function Cc(n,r,o){var f=r.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&n)===n){var _=m.destroy;m.destroy=void 0,_!==void 0&&Hm(r,o,_)}m=m.next}while(m!==f)}}function kf(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&n)===n){var f=o.create;o.destroy=f()}o=o.next}while(o!==r)}}function zm(n){var r=n.ref;if(r!==null){var o=n.stateNode;switch(n.tag){case 5:n=o;break;default:n=o}typeof r=="function"?r(n):r.current=n}}function yw(n){var r=n.alternate;r!==null&&(n.alternate=null,yw(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[nr],delete r[gc],delete r[nm],delete r[X1],delete r[Y1])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function vw(n){return n.tag===5||n.tag===3||n.tag===4}function _w(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||vw(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Bm(n,r,o){var f=n.tag;if(f===5||f===6)n=n.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(n,r):o.insertBefore(n,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(n,o)):(r=o,r.appendChild(n)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=rf));else if(f!==4&&(n=n.child,n!==null))for(Bm(n,r,o),n=n.sibling;n!==null;)Bm(n,r,o),n=n.sibling}function Um(n,r,o){var f=n.tag;if(f===5||f===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(Um(n,r,o),n=n.sibling;n!==null;)Um(n,r,o),n=n.sibling}var Gt=null,Ii=!1;function Us(n,r,o){for(o=o.child;o!==null;)ww(n,r,o),o=o.sibling}function ww(n,r,o){if(tr&&typeof tr.onCommitFiberUnmount=="function")try{tr.onCommitFiberUnmount(Hd,o)}catch{}switch(o.tag){case 5:rn||Tl(o,r);case 6:var f=Gt,m=Ii;Gt=null,Us(n,r,o),Gt=f,Ii=m,Gt!==null&&(Ii?(n=Gt,o=o.stateNode,n.nodeType===8?n.parentNode.removeChild(o):n.removeChild(o)):Gt.removeChild(o.stateNode));break;case 18:Gt!==null&&(Ii?(n=Gt,o=o.stateNode,n.nodeType===8?tm(n.parentNode,o):n.nodeType===1&&tm(n,o),rc(n)):tm(Gt,o.stateNode));break;case 4:f=Gt,m=Ii,Gt=o.stateNode.containerInfo,Ii=!0,Us(n,r,o),Gt=f,Ii=m;break;case 0:case 11:case 14:case 15:if(!rn&&(f=o.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var _=m,C=_.destroy;_=_.tag,C!==void 0&&(_&2||_&4)&&Hm(o,r,C),m=m.next}while(m!==f)}Us(n,r,o);break;case 1:if(!rn&&(Tl(o,r),f=o.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=o.memoizedProps,f.state=o.memoizedState,f.componentWillUnmount()}catch(L){dt(o,r,L)}Us(n,r,o);break;case 21:Us(n,r,o);break;case 22:o.mode&1?(rn=(f=rn)||o.memoizedState!==null,Us(n,r,o),rn=f):Us(n,r,o);break;default:Us(n,r,o)}}function Aw(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var o=n.stateNode;o===null&&(o=n.stateNode=new hx),r.forEach(function(f){var m=Ax.bind(null,n,f);o.has(f)||(o.add(f),f.then(m,m))})}}function Di(n,r){var o=r.deletions;if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];try{var _=n,C=r,L=C;e:for(;L!==null;){switch(L.tag){case 5:Gt=L.stateNode,Ii=!1;break e;case 3:Gt=L.stateNode.containerInfo,Ii=!0;break e;case 4:Gt=L.stateNode.containerInfo,Ii=!0;break e}L=L.return}if(Gt===null)throw Error(t(160));ww(_,C,m),Gt=null,Ii=!1;var I=m.alternate;I!==null&&(I.return=null),m.return=null}catch(U){dt(m,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Ew(r,n),r=r.sibling}function Ew(n,r){var o=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Di(r,n),sr(n),f&4){try{Cc(3,n,n.return),kf(3,n)}catch(ye){dt(n,n.return,ye)}try{Cc(5,n,n.return)}catch(ye){dt(n,n.return,ye)}}break;case 1:Di(r,n),sr(n),f&512&&o!==null&&Tl(o,o.return);break;case 5:if(Di(r,n),sr(n),f&512&&o!==null&&Tl(o,o.return),n.flags&32){var m=n.stateNode;try{qe(m,"")}catch(ye){dt(n,n.return,ye)}}if(f&4&&(m=n.stateNode,m!=null)){var _=n.memoizedProps,C=o!==null?o.memoizedProps:_,L=n.type,I=n.updateQueue;if(n.updateQueue=null,I!==null)try{L==="input"&&_.type==="radio"&&_.name!=null&&si(m,_),Oa(L,C);var U=Oa(L,_);for(C=0;C<I.length;C+=2){var J=I[C],Z=I[C+1];J==="style"?Bn(m,Z):J==="dangerouslySetInnerHTML"?ki(m,Z):J==="children"?qe(m,Z):P(m,J,Z,U)}switch(L){case"input":Sn(m,_);break;case"textarea":Ci(m,_);break;case"select":var K=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var oe=_.value;oe!=null?fn(m,!!_.multiple,oe,!1):K!==!!_.multiple&&(_.defaultValue!=null?fn(m,!!_.multiple,_.defaultValue,!0):fn(m,!!_.multiple,_.multiple?[]:"",!1))}m[gc]=_}catch(ye){dt(n,n.return,ye)}}break;case 6:if(Di(r,n),sr(n),f&4){if(n.stateNode===null)throw Error(t(162));m=n.stateNode,_=n.memoizedProps;try{m.nodeValue=_}catch(ye){dt(n,n.return,ye)}}break;case 3:if(Di(r,n),sr(n),f&4&&o!==null&&o.memoizedState.isDehydrated)try{rc(r.containerInfo)}catch(ye){dt(n,n.return,ye)}break;case 4:Di(r,n),sr(n);break;case 13:Di(r,n),sr(n),m=n.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(Vm=mt())),f&4&&Aw(n);break;case 22:if(J=o!==null&&o.memoizedState!==null,n.mode&1?(rn=(U=rn)||J,Di(r,n),rn=U):Di(r,n),sr(n),f&8192){if(U=n.memoizedState!==null,(n.stateNode.isHidden=U)&&!J&&n.mode&1)for(he=n,J=n.child;J!==null;){for(Z=he=J;he!==null;){switch(K=he,oe=K.child,K.tag){case 0:case 11:case 14:case 15:Cc(4,K,K.return);break;case 1:Tl(K,K.return);var me=K.stateNode;if(typeof me.componentWillUnmount=="function"){f=K,o=K.return;try{r=f,me.props=r.memoizedProps,me.state=r.memoizedState,me.componentWillUnmount()}catch(ye){dt(f,o,ye)}}break;case 5:Tl(K,K.return);break;case 22:if(K.memoizedState!==null){xw(Z);continue}}oe!==null?(oe.return=K,he=oe):xw(Z)}J=J.sibling}e:for(J=null,Z=n;;){if(Z.tag===5){if(J===null){J=Z;try{m=Z.stateNode,U?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(L=Z.stateNode,I=Z.memoizedProps.style,C=I!=null&&I.hasOwnProperty("display")?I.display:null,L.style.display=Zt("display",C))}catch(ye){dt(n,n.return,ye)}}}else if(Z.tag===6){if(J===null)try{Z.stateNode.nodeValue=U?"":Z.memoizedProps}catch(ye){dt(n,n.return,ye)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;J===Z&&(J=null),Z=Z.return}J===Z&&(J=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Di(r,n),sr(n),f&4&&Aw(n);break;case 21:break;default:Di(r,n),sr(n)}}function sr(n){var r=n.flags;if(r&2){try{e:{for(var o=n.return;o!==null;){if(vw(o)){var f=o;break e}o=o.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(qe(m,""),f.flags&=-33);var _=_w(n);Um(n,_,m);break;case 3:case 4:var C=f.stateNode.containerInfo,L=_w(n);Bm(n,L,C);break;default:throw Error(t(161))}}catch(I){dt(n,n.return,I)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function fx(n,r,o){he=n,bw(n)}function bw(n,r,o){for(var f=(n.mode&1)!==0;he!==null;){var m=he,_=m.child;if(m.tag===22&&f){var C=m.memoizedState!==null||Cf;if(!C){var L=m.alternate,I=L!==null&&L.memoizedState!==null||rn;L=Cf;var U=rn;if(Cf=C,(rn=I)&&!U)for(he=m;he!==null;)C=he,I=C.child,C.tag===22&&C.memoizedState!==null?Cw(m):I!==null?(I.return=C,he=I):Cw(m);for(;_!==null;)he=_,bw(_),_=_.sibling;he=m,Cf=L,rn=U}Sw(n)}else m.subtreeFlags&8772&&_!==null?(_.return=m,he=_):Sw(n)}}function Sw(n){for(;he!==null;){var r=he;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:rn||kf(5,r);break;case 1:var f=r.stateNode;if(r.flags&4&&!rn)if(o===null)f.componentDidMount();else{var m=r.elementType===r.type?o.memoizedProps:Mi(r.type,o.memoizedProps);f.componentDidUpdate(m,o.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=r.updateQueue;_!==null&&x_(r,_,f);break;case 3:var C=r.updateQueue;if(C!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}x_(r,C,o)}break;case 5:var L=r.stateNode;if(o===null&&r.flags&4){o=L;var I=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&o.focus();break;case"img":I.src&&(o.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var J=U.memoizedState;if(J!==null){var Z=J.dehydrated;Z!==null&&rc(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}rn||r.flags&512&&zm(r)}catch(K){dt(r,r.return,K)}}if(r===n){he=null;break}if(o=r.sibling,o!==null){o.return=r.return,he=o;break}he=r.return}}function xw(n){for(;he!==null;){var r=he;if(r===n){he=null;break}var o=r.sibling;if(o!==null){o.return=r.return,he=o;break}he=r.return}}function Cw(n){for(;he!==null;){var r=he;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{kf(4,r)}catch(I){dt(r,o,I)}break;case 1:var f=r.stateNode;if(typeof f.componentDidMount=="function"){var m=r.return;try{f.componentDidMount()}catch(I){dt(r,m,I)}}var _=r.return;try{zm(r)}catch(I){dt(r,_,I)}break;case 5:var C=r.return;try{zm(r)}catch(I){dt(r,C,I)}}}catch(I){dt(r,r.return,I)}if(r===n){he=null;break}var L=r.sibling;if(L!==null){L.return=r.return,he=L;break}he=r.return}}var px=Math.ceil,Tf=M.ReactCurrentDispatcher,$m=M.ReactCurrentOwner,hi=M.ReactCurrentBatchConfig,je=0,Nt=null,At=null,qt=0,Gn=0,Pl=Ns(0),kt=0,kc=null,Va=0,Pf=0,Wm=0,Tc=null,Tn=null,Vm=0,Rl=1/0,zr=null,Rf=!1,Gm=null,$s=null,Lf=!1,Ws=null,Mf=0,Pc=0,qm=null,If=-1,Df=0;function mn(){return je&6?mt():If!==-1?If:If=mt()}function Vs(n){return n.mode&1?je&2&&qt!==0?qt&-qt:Q1.transition!==null?(Df===0&&(Df=_0()),Df):(n=$e,n!==0||(n=window.event,n=n===void 0?16:T0(n.type)),n):1}function Oi(n,r,o,f){if(50<Pc)throw Pc=0,qm=null,Error(t(185));Zu(n,o,f),(!(je&2)||n!==Nt)&&(n===Nt&&(!(je&2)&&(Pf|=o),kt===4&&Gs(n,qt)),Pn(n,f),o===1&&je===0&&!(r.mode&1)&&(Rl=mt()+500,lf&&Hs()))}function Pn(n,r){var o=n.callbackNode;QS(n,r);var f=Ud(n,n===Nt?qt:0);if(f===0)o!==null&&m0(o),n.callbackNode=null,n.callbackPriority=0;else if(r=f&-f,n.callbackPriority!==r){if(o!=null&&m0(o),r===1)n.tag===0?K1(Tw.bind(null,n)):f_(Tw.bind(null,n)),G1(function(){!(je&6)&&Hs()}),o=null;else{switch(w0(f)){case 1:o=Cg;break;case 4:o=y0;break;case 16:o=jd;break;case 536870912:o=v0;break;default:o=jd}o=Fw(o,kw.bind(null,n))}n.callbackPriority=r,n.callbackNode=o}}function kw(n,r){if(If=-1,Df=0,je&6)throw Error(t(327));var o=n.callbackNode;if(Ll()&&n.callbackNode!==o)return null;var f=Ud(n,n===Nt?qt:0);if(f===0)return null;if(f&30||f&n.expiredLanes||r)r=Of(n,f);else{r=f;var m=je;je|=2;var _=Rw();(Nt!==n||qt!==r)&&(zr=null,Rl=mt()+500,qa(n,r));do try{yx();break}catch(L){Pw(n,L)}while(!0);hm(),Tf.current=_,je=m,At!==null?r=0:(Nt=null,qt=0,r=kt)}if(r!==0){if(r===2&&(m=kg(n),m!==0&&(f=m,r=Xm(n,m))),r===1)throw o=kc,qa(n,0),Gs(n,f),Pn(n,mt()),o;if(r===6)Gs(n,f);else{if(m=n.current.alternate,!(f&30)&&!gx(m)&&(r=Of(n,f),r===2&&(_=kg(n),_!==0&&(f=_,r=Xm(n,_))),r===1))throw o=kc,qa(n,0),Gs(n,f),Pn(n,mt()),o;switch(n.finishedWork=m,n.finishedLanes=f,r){case 0:case 1:throw Error(t(345));case 2:Xa(n,Tn,zr);break;case 3:if(Gs(n,f),(f&130023424)===f&&(r=Vm+500-mt(),10<r)){if(Ud(n,0)!==0)break;if(m=n.suspendedLanes,(m&f)!==f){mn(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=em(Xa.bind(null,n,Tn,zr),r);break}Xa(n,Tn,zr);break;case 4:if(Gs(n,f),(f&4194240)===f)break;for(r=n.eventTimes,m=-1;0<f;){var C=31-Pi(f);_=1<<C,C=r[C],C>m&&(m=C),f&=~_}if(f=m,f=mt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*px(f/1960))-f,10<f){n.timeoutHandle=em(Xa.bind(null,n,Tn,zr),f);break}Xa(n,Tn,zr);break;case 5:Xa(n,Tn,zr);break;default:throw Error(t(329))}}}return Pn(n,mt()),n.callbackNode===o?kw.bind(null,n):null}function Xm(n,r){var o=Tc;return n.current.memoizedState.isDehydrated&&(qa(n,r).flags|=256),n=Of(n,r),n!==2&&(r=Tn,Tn=o,r!==null&&Ym(r)),n}function Ym(n){Tn===null?Tn=n:Tn.push.apply(Tn,n)}function gx(n){for(var r=n;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var f=0;f<o.length;f++){var m=o[f],_=m.getSnapshot;m=m.value;try{if(!Ri(_(),m))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Gs(n,r){for(r&=~Wm,r&=~Pf,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var o=31-Pi(r),f=1<<o;n[o]=-1,r&=~f}}function Tw(n){if(je&6)throw Error(t(327));Ll();var r=Ud(n,0);if(!(r&1))return Pn(n,mt()),null;var o=Of(n,r);if(n.tag!==0&&o===2){var f=kg(n);f!==0&&(r=f,o=Xm(n,f))}if(o===1)throw o=kc,qa(n,0),Gs(n,r),Pn(n,mt()),o;if(o===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Xa(n,Tn,zr),Pn(n,mt()),null}function Km(n,r){var o=je;je|=1;try{return n(r)}finally{je=o,je===0&&(Rl=mt()+500,lf&&Hs())}}function Ga(n){Ws!==null&&Ws.tag===0&&!(je&6)&&Ll();var r=je;je|=1;var o=hi.transition,f=$e;try{if(hi.transition=null,$e=1,n)return n()}finally{$e=f,hi.transition=o,je=r,!(je&6)&&Hs()}}function Qm(){Gn=Pl.current,Ze(Pl)}function qa(n,r){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;if(o!==-1&&(n.timeoutHandle=-1,V1(o)),At!==null)for(o=At.return;o!==null;){var f=o;switch(am(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&af();break;case 3:Cl(),Ze(xn),Ze(en),_m();break;case 5:ym(f);break;case 4:Cl();break;case 13:Ze(st);break;case 19:Ze(st);break;case 10:dm(f.type._context);break;case 22:case 23:Qm()}o=o.return}if(Nt=n,At=n=qs(n.current,null),qt=Gn=r,kt=0,kc=null,Wm=Pf=Va=0,Tn=Tc=null,Ua!==null){for(r=0;r<Ua.length;r++)if(o=Ua[r],f=o.interleaved,f!==null){o.interleaved=null;var m=f.next,_=o.pending;if(_!==null){var C=_.next;_.next=m,f.next=C}o.pending=f}Ua=null}return n}function Pw(n,r){do{var o=At;try{if(hm(),vf.current=Ef,_f){for(var f=at.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}_f=!1}if(Wa=0,Ft=Ct=at=null,Ac=!1,Ec=0,$m.current=null,o===null||o.return===null){kt=1,kc=r,At=null;break}e:{var _=n,C=o.return,L=o,I=r;if(r=qt,L.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var U=I,J=L,Z=J.tag;if(!(J.mode&1)&&(Z===0||Z===11||Z===15)){var K=J.alternate;K?(J.updateQueue=K.updateQueue,J.memoizedState=K.memoizedState,J.lanes=K.lanes):(J.updateQueue=null,J.memoizedState=null)}var oe=ew(C);if(oe!==null){oe.flags&=-257,tw(oe,C,L,_,r),oe.mode&1&&Z_(_,U,r),r=oe,I=U;var me=r.updateQueue;if(me===null){var ye=new Set;ye.add(I),r.updateQueue=ye}else me.add(I);break e}else{if(!(r&1)){Z_(_,U,r),Jm();break e}I=Error(t(426))}}else if(nt&&L.mode&1){var yt=ew(C);if(yt!==null){!(yt.flags&65536)&&(yt.flags|=256),tw(yt,C,L,_,r),um(kl(I,L));break e}}_=I=kl(I,L),kt!==4&&(kt=2),Tc===null?Tc=[_]:Tc.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,r&=-r,_.lanes|=r;var j=Q_(_,I,r);S_(_,j);break e;case 1:L=I;var O=_.type,z=_.stateNode;if(!(_.flags&128)&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&($s===null||!$s.has(z)))){_.flags|=65536,r&=-r,_.lanes|=r;var te=J_(_,L,r);S_(_,te);break e}}_=_.return}while(_!==null)}Mw(o)}catch(ve){r=ve,At===o&&o!==null&&(At=o=o.return);continue}break}while(!0)}function Rw(){var n=Tf.current;return Tf.current=Ef,n===null?Ef:n}function Jm(){(kt===0||kt===3||kt===2)&&(kt=4),Nt===null||!(Va&268435455)&&!(Pf&268435455)||Gs(Nt,qt)}function Of(n,r){var o=je;je|=2;var f=Rw();(Nt!==n||qt!==r)&&(zr=null,qa(n,r));do try{mx();break}catch(m){Pw(n,m)}while(!0);if(hm(),je=o,Tf.current=f,At!==null)throw Error(t(261));return Nt=null,qt=0,kt}function mx(){for(;At!==null;)Lw(At)}function yx(){for(;At!==null&&!US();)Lw(At)}function Lw(n){var r=Ow(n.alternate,n,Gn);n.memoizedProps=n.pendingProps,r===null?Mw(n):At=r,$m.current=null}function Mw(n){var r=n;do{var o=r.alternate;if(n=r.return,r.flags&32768){if(o=cx(o,r),o!==null){o.flags&=32767,At=o;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{kt=6,At=null;return}}else if(o=ux(o,r,Gn),o!==null){At=o;return}if(r=r.sibling,r!==null){At=r;return}At=r=n}while(r!==null);kt===0&&(kt=5)}function Xa(n,r,o){var f=$e,m=hi.transition;try{hi.transition=null,$e=1,vx(n,r,o,f)}finally{hi.transition=m,$e=f}return null}function vx(n,r,o,f){do Ll();while(Ws!==null);if(je&6)throw Error(t(327));o=n.finishedWork;var m=n.finishedLanes;if(o===null)return null;if(n.finishedWork=null,n.finishedLanes=0,o===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var _=o.lanes|o.childLanes;if(JS(n,_),n===Nt&&(At=Nt=null,qt=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Lf||(Lf=!0,Fw(jd,function(){return Ll(),null})),_=(o.flags&15990)!==0,o.subtreeFlags&15990||_){_=hi.transition,hi.transition=null;var C=$e;$e=1;var L=je;je|=4,$m.current=null,dx(n,o),Ew(o,n),j1(Jg),Vd=!!Qg,Jg=Qg=null,n.current=o,fx(o),$S(),je=L,$e=C,hi.transition=_}else n.current=o;if(Lf&&(Lf=!1,Ws=n,Mf=m),_=n.pendingLanes,_===0&&($s=null),GS(o.stateNode),Pn(n,mt()),r!==null)for(f=n.onRecoverableError,o=0;o<r.length;o++)m=r[o],f(m.value,{componentStack:m.stack,digest:m.digest});if(Rf)throw Rf=!1,n=Gm,Gm=null,n;return Mf&1&&n.tag!==0&&Ll(),_=n.pendingLanes,_&1?n===qm?Pc++:(Pc=0,qm=n):Pc=0,Hs(),null}function Ll(){if(Ws!==null){var n=w0(Mf),r=hi.transition,o=$e;try{if(hi.transition=null,$e=16>n?16:n,Ws===null)var f=!1;else{if(n=Ws,Ws=null,Mf=0,je&6)throw Error(t(331));var m=je;for(je|=4,he=n.current;he!==null;){var _=he,C=_.child;if(he.flags&16){var L=_.deletions;if(L!==null){for(var I=0;I<L.length;I++){var U=L[I];for(he=U;he!==null;){var J=he;switch(J.tag){case 0:case 11:case 15:Cc(8,J,_)}var Z=J.child;if(Z!==null)Z.return=J,he=Z;else for(;he!==null;){J=he;var K=J.sibling,oe=J.return;if(yw(J),J===U){he=null;break}if(K!==null){K.return=oe,he=K;break}he=oe}}}var me=_.alternate;if(me!==null){var ye=me.child;if(ye!==null){me.child=null;do{var yt=ye.sibling;ye.sibling=null,ye=yt}while(ye!==null)}}he=_}}if(_.subtreeFlags&2064&&C!==null)C.return=_,he=C;else e:for(;he!==null;){if(_=he,_.flags&2048)switch(_.tag){case 0:case 11:case 15:Cc(9,_,_.return)}var j=_.sibling;if(j!==null){j.return=_.return,he=j;break e}he=_.return}}var O=n.current;for(he=O;he!==null;){C=he;var z=C.child;if(C.subtreeFlags&2064&&z!==null)z.return=C,he=z;else e:for(C=O;he!==null;){if(L=he,L.flags&2048)try{switch(L.tag){case 0:case 11:case 15:kf(9,L)}}catch(ve){dt(L,L.return,ve)}if(L===C){he=null;break e}var te=L.sibling;if(te!==null){te.return=L.return,he=te;break e}he=L.return}}if(je=m,Hs(),tr&&typeof tr.onPostCommitFiberRoot=="function")try{tr.onPostCommitFiberRoot(Hd,n)}catch{}f=!0}return f}finally{$e=o,hi.transition=r}}return!1}function Iw(n,r,o){r=kl(o,r),r=Q_(n,r,1),n=Bs(n,r,1),r=mn(),n!==null&&(Zu(n,1,r),Pn(n,r))}function dt(n,r,o){if(n.tag===3)Iw(n,n,o);else for(;r!==null;){if(r.tag===3){Iw(r,n,o);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&($s===null||!$s.has(f))){n=kl(o,n),n=J_(r,n,1),r=Bs(r,n,1),n=mn(),r!==null&&(Zu(r,1,n),Pn(r,n));break}}r=r.return}}function _x(n,r,o){var f=n.pingCache;f!==null&&f.delete(r),r=mn(),n.pingedLanes|=n.suspendedLanes&o,Nt===n&&(qt&o)===o&&(kt===4||kt===3&&(qt&130023424)===qt&&500>mt()-Vm?qa(n,0):Wm|=o),Pn(n,r)}function Dw(n,r){r===0&&(n.mode&1?(r=Bd,Bd<<=1,!(Bd&130023424)&&(Bd=4194304)):r=1);var o=mn();n=Nr(n,r),n!==null&&(Zu(n,r,o),Pn(n,o))}function wx(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),Dw(n,o)}function Ax(n,r){var o=0;switch(n.tag){case 13:var f=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(r),Dw(n,o)}var Ow;Ow=function(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps||xn.current)kn=!0;else{if(!(n.lanes&o)&&!(r.flags&128))return kn=!1,lx(n,r,o);kn=!!(n.flags&131072)}else kn=!1,nt&&r.flags&1048576&&p_(r,cf,r.index);switch(r.lanes=0,r.tag){case 2:var f=r.type;xf(n,r),n=r.pendingProps;var m=_l(r,en.current);xl(r,o),m=Em(null,r,f,n,m,o);var _=bm();return r.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Cn(f)?(_=!0,of(r)):_=!1,r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,gm(r),m.updater=bf,r.stateNode=m,m._reactInternals=r,Pm(r,f,n,o),r=Im(null,r,f,!0,_,o)):(r.tag=0,nt&&_&&sm(r),gn(null,r,m,o),r=r.child),r;case 16:f=r.elementType;e:{switch(xf(n,r),n=r.pendingProps,m=f._init,f=m(f._payload),r.type=f,m=r.tag=bx(f),n=Mi(f,n),m){case 0:r=Mm(null,r,f,n,o);break e;case 1:r=ow(null,r,f,n,o);break e;case 11:r=nw(null,r,f,n,o);break e;case 14:r=iw(null,r,f,Mi(f.type,n),o);break e}throw Error(t(306,f,""))}return r;case 0:return f=r.type,m=r.pendingProps,m=r.elementType===f?m:Mi(f,m),Mm(n,r,f,m,o);case 1:return f=r.type,m=r.pendingProps,m=r.elementType===f?m:Mi(f,m),ow(n,r,f,m,o);case 3:e:{if(lw(r),n===null)throw Error(t(387));f=r.pendingProps,_=r.memoizedState,m=_.element,b_(n,r),mf(r,f,null,o);var C=r.memoizedState;if(f=C.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){m=kl(Error(t(423)),r),r=uw(n,r,f,o,m);break e}else if(f!==m){m=kl(Error(t(424)),r),r=uw(n,r,f,o,m);break e}else for(Vn=Fs(r.stateNode.containerInfo.firstChild),Wn=r,nt=!0,Li=null,o=A_(r,null,f,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(El(),f===m){r=Hr(n,r,o);break e}gn(n,r,f,o)}r=r.child}return r;case 5:return C_(r),n===null&&lm(r),f=r.type,m=r.pendingProps,_=n!==null?n.memoizedProps:null,C=m.children,Zg(f,m)?C=null:_!==null&&Zg(f,_)&&(r.flags|=32),aw(n,r),gn(n,r,C,o),r.child;case 6:return n===null&&lm(r),null;case 13:return cw(n,r,o);case 4:return mm(r,r.stateNode.containerInfo),f=r.pendingProps,n===null?r.child=bl(r,null,f,o):gn(n,r,f,o),r.child;case 11:return f=r.type,m=r.pendingProps,m=r.elementType===f?m:Mi(f,m),nw(n,r,f,m,o);case 7:return gn(n,r,r.pendingProps,o),r.child;case 8:return gn(n,r,r.pendingProps.children,o),r.child;case 12:return gn(n,r,r.pendingProps.children,o),r.child;case 10:e:{if(f=r.type._context,m=r.pendingProps,_=r.memoizedProps,C=m.value,Ke(ff,f._currentValue),f._currentValue=C,_!==null)if(Ri(_.value,C)){if(_.children===m.children&&!xn.current){r=Hr(n,r,o);break e}}else for(_=r.child,_!==null&&(_.return=r);_!==null;){var L=_.dependencies;if(L!==null){C=_.child;for(var I=L.firstContext;I!==null;){if(I.context===f){if(_.tag===1){I=jr(-1,o&-o),I.tag=2;var U=_.updateQueue;if(U!==null){U=U.shared;var J=U.pending;J===null?I.next=I:(I.next=J.next,J.next=I),U.pending=I}}_.lanes|=o,I=_.alternate,I!==null&&(I.lanes|=o),fm(_.return,o,r),L.lanes|=o;break}I=I.next}}else if(_.tag===10)C=_.type===r.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(t(341));C.lanes|=o,L=C.alternate,L!==null&&(L.lanes|=o),fm(C,o,r),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===r){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}gn(n,r,m.children,o),r=r.child}return r;case 9:return m=r.type,f=r.pendingProps.children,xl(r,o),m=ui(m),f=f(m),r.flags|=1,gn(n,r,f,o),r.child;case 14:return f=r.type,m=Mi(f,r.pendingProps),m=Mi(f.type,m),iw(n,r,f,m,o);case 15:return rw(n,r,r.type,r.pendingProps,o);case 17:return f=r.type,m=r.pendingProps,m=r.elementType===f?m:Mi(f,m),xf(n,r),r.tag=1,Cn(f)?(n=!0,of(r)):n=!1,xl(r,o),Y_(r,f,m),Pm(r,f,m,o),Im(null,r,f,!0,n,o);case 19:return dw(n,r,o);case 22:return sw(n,r,o)}throw Error(t(156,r.tag))};function Fw(n,r){return g0(n,r)}function Ex(n,r,o,f){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(n,r,o,f){return new Ex(n,r,o,f)}function Zm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function bx(n){if(typeof n=="function")return Zm(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ie)return 11;if(n===de)return 14}return 2}function qs(n,r){var o=n.alternate;return o===null?(o=di(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&14680064,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o}function Ff(n,r,o,f,m,_){var C=2;if(f=n,typeof n=="function")Zm(n)&&(C=1);else if(typeof n=="string")C=5;else e:switch(n){case H:return Ya(o.children,m,_,r);case V:C=8,m|=8;break;case B:return n=di(12,o,r,m|2),n.elementType=B,n.lanes=_,n;case ne:return n=di(13,o,r,m),n.elementType=ne,n.lanes=_,n;case pe:return n=di(19,o,r,m),n.elementType=pe,n.lanes=_,n;case G:return Nf(o,m,_,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:C=10;break e;case X:C=9;break e;case ie:C=11;break e;case de:C=14;break e;case ue:C=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=di(C,o,r,m),r.elementType=n,r.type=f,r.lanes=_,r}function Ya(n,r,o,f){return n=di(7,n,f,r),n.lanes=o,n}function Nf(n,r,o,f){return n=di(22,n,f,r),n.elementType=G,n.lanes=o,n.stateNode={isHidden:!1},n}function ey(n,r,o){return n=di(6,n,null,r),n.lanes=o,n}function ty(n,r,o){return r=di(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Sx(n,r,o,f,m){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tg(0),this.expirationTimes=Tg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tg(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function ny(n,r,o,f,m,_,C,L,I){return n=new Sx(n,r,o,L,I),r===1?(r=1,_===!0&&(r|=8)):r=0,_=di(3,null,null,r),n.current=_,_.stateNode=n,_.memoizedState={element:f,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},gm(_),n}function xx(n,r,o){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:f==null?null:""+f,children:n,containerInfo:r,implementation:o}}function Nw(n){if(!n)return js;n=n._reactInternals;e:{if(Na(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Cn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var o=n.type;if(Cn(o))return h_(n,o,r)}return r}function jw(n,r,o,f,m,_,C,L,I){return n=ny(o,f,!0,n,m,_,C,L,I),n.context=Nw(null),o=n.current,f=mn(),m=Vs(o),_=jr(f,m),_.callback=r??null,Bs(o,_,m),n.current.lanes=m,Zu(n,m,f),Pn(n,f),n}function jf(n,r,o,f){var m=r.current,_=mn(),C=Vs(m);return o=Nw(o),r.context===null?r.context=o:r.pendingContext=o,r=jr(_,C),r.payload={element:n},f=f===void 0?null:f,f!==null&&(r.callback=f),n=Bs(m,r,C),n!==null&&(Oi(n,m,C,_),gf(n,m,C)),C}function Hf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Hw(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function iy(n,r){Hw(n,r),(n=n.alternate)&&Hw(n,r)}var zw=typeof reportError=="function"?reportError:function(n){console.error(n)};function ry(n){this._internalRoot=n}zf.prototype.render=ry.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));jf(n,r,null,null)},zf.prototype.unmount=ry.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Ga(function(){jf(null,n,null,null)}),r[Ir]=null}};function zf(n){this._internalRoot=n}zf.prototype.unstable_scheduleHydration=function(n){if(n){var r=b0();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Is.length&&r!==0&&r<Is[o].priority;o++);Is.splice(o,0,n),o===0&&C0(n)}};function sy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Bw(){}function Cx(n,r,o,f,m){if(m){if(typeof f=="function"){var _=f;f=function(){var U=Hf(C);_.call(U)}}var C=jw(r,f,n,0,null,!1,!1,"",Bw);return n._reactRootContainer=C,n[Ir]=C.current,fc(n.nodeType===8?n.parentNode:n),Ga(),C}for(;m=n.lastChild;)n.removeChild(m);if(typeof f=="function"){var L=f;f=function(){var U=Hf(I);L.call(U)}}var I=ny(n,0,!1,null,null,!1,!1,"",Bw);return n._reactRootContainer=I,n[Ir]=I.current,fc(n.nodeType===8?n.parentNode:n),Ga(function(){jf(r,I,o,f)}),I}function Uf(n,r,o,f,m){var _=o._reactRootContainer;if(_){var C=_;if(typeof m=="function"){var L=m;m=function(){var I=Hf(C);L.call(I)}}jf(r,C,n,m)}else C=Cx(o,r,n,m,f);return Hf(C)}A0=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ju(r.pendingLanes);o!==0&&(Pg(r,o|1),Pn(r,mt()),!(je&6)&&(Rl=mt()+500,Hs()))}break;case 13:Ga(function(){var f=Nr(n,1);if(f!==null){var m=mn();Oi(f,n,1,m)}}),iy(n,1)}},Rg=function(n){if(n.tag===13){var r=Nr(n,134217728);if(r!==null){var o=mn();Oi(r,n,134217728,o)}iy(n,134217728)}},E0=function(n){if(n.tag===13){var r=Vs(n),o=Nr(n,r);if(o!==null){var f=mn();Oi(o,n,r,f)}iy(n,r)}},b0=function(){return $e},S0=function(n,r){var o=$e;try{return $e=n,r()}finally{$e=o}},pn=function(n,r,o){switch(r){case"input":if(Sn(n,o),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var f=o[r];if(f!==n&&f.form===n.form){var m=sf(f);if(!m)throw Error(t(90));Hn(f),Sn(f,m)}}}break;case"textarea":Ci(n,o);break;case"select":r=o.value,r!=null&&fn(n,!!o.multiple,r,!1)}},Od=Km,Lr=Ga;var kx={usingClientEntryPoint:!1,Events:[mc,yl,sf,Id,Dd,Km]},Rc={findFiberByHostInstance:ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tx={bundleType:Rc.bundleType,version:Rc.version,rendererPackageName:Rc.rendererPackageName,rendererConfig:Rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=f0(n),n===null?null:n.stateNode},findFiberByHostInstance:Rc.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{Hd=$f.inject(Tx),tr=$f}catch{}}return Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kx,Rn.createPortal=function(n,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sy(r))throw Error(t(200));return xx(n,r,null,o)},Rn.createRoot=function(n,r){if(!sy(n))throw Error(t(299));var o=!1,f="",m=zw;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),r=ny(n,1,!1,null,null,o,!1,f,m),n[Ir]=r.current,fc(n.nodeType===8?n.parentNode:n),new ry(r)},Rn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=f0(r),n=n===null?null:n.stateNode,n},Rn.flushSync=function(n){return Ga(n)},Rn.hydrate=function(n,r,o){if(!Bf(r))throw Error(t(200));return Uf(null,n,r,!0,o)},Rn.hydrateRoot=function(n,r,o){if(!sy(n))throw Error(t(405));var f=o!=null&&o.hydratedSources||null,m=!1,_="",C=zw;if(o!=null&&(o.unstable_strictMode===!0&&(m=!0),o.identifierPrefix!==void 0&&(_=o.identifierPrefix),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),r=jw(r,null,n,1,o??null,m,!1,_,C),n[Ir]=r.current,fc(n),f)for(n=0;n<f.length;n++)o=f[n],m=o._getVersion,m=m(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,m]:r.mutableSourceEagerHydrationData.push(o,m);return new zf(r)},Rn.render=function(n,r,o){if(!Bf(r))throw Error(t(200));return Uf(null,n,r,!1,o)},Rn.unmountComponentAtNode=function(n){if(!Bf(n))throw Error(t(40));return n._reactRootContainer?(Ga(function(){Uf(null,null,n,!1,function(){n._reactRootContainer=null,n[Ir]=null})}),!0):!1},Rn.unstable_batchedUpdates=Km,Rn.unstable_renderSubtreeIntoContainer=function(n,r,o,f){if(!Bf(o))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Uf(n,r,o,!1,f)},Rn.version="18.3.1-next-f1338f8080-20240426",Rn}var Kw;function Hx(){if(Kw)return uy.exports;Kw=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(e){console.error(e)}}return h(),uy.exports=jx(),uy.exports}var Qw;function zx(){if(Qw)return Wf;Qw=1;var h=Hx();return Wf.createRoot=h.createRoot,Wf.hydrateRoot=h.hydrateRoot,Wf}var Bx=zx(),Mc={},Jw;function Ux(){if(Jw)return Mc;Jw=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.parse=l,Mc.serialize=p;const h=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function l(v,w){const A=new a,E=v.length;if(E<2)return A;const x=(w==null?void 0:w.decode)||g;let S=0;do{const R=v.indexOf("=",S);if(R===-1)break;const P=v.indexOf(";",S),M=P===-1?E:P;if(R>M){S=v.lastIndexOf(";",R-1)+1;continue}const N=c(v,S,R),F=d(v,R,N),H=v.slice(N,F);if(A[H]===void 0){let V=c(v,R+1,M),B=d(v,M,V);const Y=x(v.slice(V,B));A[H]=Y}S=M+1}while(S<E);return A}function c(v,w,A){do{const E=v.charCodeAt(w);if(E!==32&&E!==9)return w}while(++w<A);return A}function d(v,w,A){for(;w>A;){const E=v.charCodeAt(--w);if(E!==32&&E!==9)return w+1}return A}function p(v,w,A){const E=(A==null?void 0:A.encode)||encodeURIComponent;if(!h.test(v))throw new TypeError(`argument name is invalid: ${v}`);const x=E(w);if(!e.test(x))throw new TypeError(`argument val is invalid: ${w}`);let S=v+"="+x;if(!A)return S;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);S+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);S+="; Domain="+A.domain}if(A.path){if(!i.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);S+="; Path="+A.path}if(A.expires){if(!y(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);S+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&(S+="; HttpOnly"),A.secure&&(S+="; Secure"),A.partitioned&&(S+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return S}function g(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function y(v){return s.call(v)==="[object Date]"}return Mc}Ux();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zw="popstate";function $x(h={}){function e(i,s){let{pathname:a,search:l,hash:c}=i.location;return by("",{pathname:a,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:lh(s)}return Vx(e,t,null,h)}function ht(h,e){if(h===!1||h===null||typeof h>"u")throw new Error(e)}function Cr(h,e){if(!h){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Wx(){return Math.random().toString(36).substring(2,10)}function eA(h,e){return{usr:h.state,key:h.key,idx:e}}function by(h,e,t=null,i){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof e=="string"?Wu(e):e,state:t,key:e&&e.key||i||Wx()}}function lh({pathname:h="/",search:e="",hash:t=""}){return e&&e!=="?"&&(h+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(h+=t.charAt(0)==="#"?t:"#"+t),h}function Wu(h){let e={};if(h){let t=h.indexOf("#");t>=0&&(e.hash=h.substring(t),h=h.substring(0,t));let i=h.indexOf("?");i>=0&&(e.search=h.substring(i),h=h.substring(0,i)),h&&(e.pathname=h)}return e}function Vx(h,e,t,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,l=s.history,c="POP",d=null,p=g();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function g(){return(l.state||{idx:null}).idx}function y(){c="POP";let x=g(),S=x==null?null:x-p;p=x,d&&d({action:c,location:E.location,delta:S})}function v(x,S){c="PUSH";let R=by(E.location,x,S);p=g()+1;let P=eA(R,p),M=E.createHref(R);try{l.pushState(P,"",M)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(M)}a&&d&&d({action:c,location:E.location,delta:1})}function w(x,S){c="REPLACE";let R=by(E.location,x,S);p=g();let P=eA(R,p),M=E.createHref(R);l.replaceState(P,"",M),a&&d&&d({action:c,location:E.location,delta:0})}function A(x){let S=s.location.origin!=="null"?s.location.origin:s.location.href,R=typeof x=="string"?x:lh(x);return R=R.replace(/ $/,"%20"),ht(S,`No window.location.(origin|href) available to create URL for href: ${R}`),new URL(R,S)}let E={get action(){return c},get location(){return h(s,l)},listen(x){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Zw,y),d=x,()=>{s.removeEventListener(Zw,y),d=null}},createHref(x){return e(s,x)},createURL:A,encodeLocation(x){let S=A(x);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:w,go(x){return l.go(x)}};return E}function lE(h,e,t="/"){return Gx(h,e,t,!1)}function Gx(h,e,t,i){let s=typeof e=="string"?Wu(e):e,a=Ta(s.pathname||"/",t);if(a==null)return null;let l=uE(h);qx(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let p=rC(a);c=nC(l[d],p,i)}return c}function uE(h,e=[],t=[],i=""){let s=(a,l,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(ht(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let p=vs([i,d.relativePath]),g=t.concat(d);a.children&&a.children.length>0&&(ht(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),uE(a.children,e,g,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:eC(p,a.index),routesMeta:g})};return h.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,l);else for(let d of cE(a.path))s(a,l,d)}),e}function cE(h){let e=h.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let l=cE(i.join("/")),c=[];return c.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&c.push(...l),c.map(d=>h.startsWith("/")&&d===""?"/":d)}function qx(h){h.sort((e,t)=>e.score!==t.score?t.score-e.score:tC(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Xx=/^:[\w-]+$/,Yx=3,Kx=2,Qx=1,Jx=10,Zx=-2,tA=h=>h==="*";function eC(h,e){let t=h.split("/"),i=t.length;return t.some(tA)&&(i+=Zx),e&&(i+=Kx),t.filter(s=>!tA(s)).reduce((s,a)=>s+(Xx.test(a)?Yx:a===""?Qx:Jx),i)}function tC(h,e){return h.length===e.length&&h.slice(0,-1).every((i,s)=>i===e[s])?h[h.length-1]-e[e.length-1]:0}function nC(h,e,t=!1){let{routesMeta:i}=h,s={},a="/",l=[];for(let c=0;c<i.length;++c){let d=i[c],p=c===i.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=Vp({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),v=d.route;if(!y&&p&&t&&!i[i.length-1].route.index&&(y=Vp({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:vs([a,y.pathname]),pathnameBase:lC(vs([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=vs([a,y.pathnameBase]))}return l}function Vp(h,e){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[t,i]=iC(h.path,h.caseSensitive,h.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:i.reduce((p,{paramName:g,isOptional:y},v)=>{if(g==="*"){let A=c[v]||"";l=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const w=c[v];return y&&!w?p[g]=void 0:p[g]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:h}}function iC(h,e=!1,t=!0){Cr(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let i=[],s="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(i.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return h.endsWith("*")?(i.push({paramName:"*"}),s+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":h!==""&&h!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function rC(h){try{return h.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cr(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),h}}function Ta(h,e){if(e==="/")return h;if(!h.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=h.charAt(t);return i&&i!=="/"?null:h.slice(t)||"/"}function sC(h,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof h=="string"?Wu(h):h;return{pathname:t?t.startsWith("/")?t:aC(t,e):e,search:uC(i),hash:cC(s)}}function aC(h,e){let t=e.replace(/\/+$/,"").split("/");return h.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function dy(h,e,t,i){return`Cannot include a '${h}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function oC(h){return h.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hE(h){let e=oC(h);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function dE(h,e,t,i=!1){let s;typeof h=="string"?s=Wu(h):(s={...h},ht(!s.pathname||!s.pathname.includes("?"),dy("?","pathname","search",s)),ht(!s.pathname||!s.pathname.includes("#"),dy("#","pathname","hash",s)),ht(!s.search||!s.search.includes("#"),dy("#","search","hash",s)));let a=h===""||s.pathname==="",l=a?"/":s.pathname,c;if(l==null)c=t;else{let y=e.length-1;if(!i&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}c=y>=0?e[y]:"/"}let d=sC(s,c),p=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var vs=h=>h.join("/").replace(/\/\/+/g,"/"),lC=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),uC=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,cC=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h;function hC(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}var fE=["POST","PUT","PATCH","DELETE"];new Set(fE);var dC=["GET",...fE];new Set(dC);var Vu=q.createContext(null);Vu.displayName="DataRouter";var pg=q.createContext(null);pg.displayName="DataRouterState";var pE=q.createContext({isTransitioning:!1});pE.displayName="ViewTransition";var fC=q.createContext(new Map);fC.displayName="Fetchers";var pC=q.createContext(null);pC.displayName="Await";var kr=q.createContext(null);kr.displayName="Navigation";var xd=q.createContext(null);xd.displayName="Location";var Ss=q.createContext({outlet:null,matches:[],isDataRoute:!1});Ss.displayName="Route";var $v=q.createContext(null);$v.displayName="RouteError";function gC(h,{relative:e}={}){ht(Cd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=q.useContext(kr),{hash:s,pathname:a,search:l}=kd(h,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:vs([t,a])),i.createHref({pathname:c,search:l,hash:s})}function Cd(){return q.useContext(xd)!=null}function al(){return ht(Cd(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(xd).location}var gE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mE(h){q.useContext(kr).static||q.useLayoutEffect(h)}function yE(){let{isDataRoute:h}=q.useContext(Ss);return h?TC():mC()}function mC(){ht(Cd(),"useNavigate() may be used only in the context of a <Router> component.");let h=q.useContext(Vu),{basename:e,navigator:t}=q.useContext(kr),{matches:i}=q.useContext(Ss),{pathname:s}=al(),a=JSON.stringify(hE(i)),l=q.useRef(!1);return mE(()=>{l.current=!0}),q.useCallback((d,p={})=>{if(Cr(l.current,gE),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=dE(d,JSON.parse(a),s,p.relative==="path");h==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:vs([e,g.pathname])),(p.replace?t.replace:t.push)(g,p.state,p)},[e,t,a,s,h])}q.createContext(null);function kd(h,{relative:e}={}){let{matches:t}=q.useContext(Ss),{pathname:i}=al(),s=JSON.stringify(hE(t));return q.useMemo(()=>dE(h,JSON.parse(s),i,e==="path"),[h,s,i,e])}function yC(h,e){return vE(h,e)}function vE(h,e,t,i){var S;ht(Cd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=q.useContext(kr),{matches:a}=q.useContext(Ss),l=a[a.length-1],c=l?l.params:{},d=l?l.pathname:"/",p=l?l.pathnameBase:"/",g=l&&l.route;{let R=g&&g.path||"";_E(d,!g||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let y=al(),v;if(e){let R=typeof e=="string"?Wu(e):e;ht(p==="/"||((S=R.pathname)==null?void 0:S.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${R.pathname}" was given in the \`location\` prop.`),v=R}else v=y;let w=v.pathname||"/",A=w;if(p!=="/"){let R=p.replace(/^\//,"").split("/");A="/"+w.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=lE(h,{pathname:A});Cr(g||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Cr(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=EC(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},c,R.params),pathname:vs([p,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:vs([p,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),a,t,i);return e&&x?q.createElement(xd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},x):x}function vC(){let h=kC(),e=hC(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),t=h instanceof Error?h.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",h),l=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:a},"ErrorBoundary")," or"," ",q.createElement("code",{style:a},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:s},t):null,l)}var _C=q.createElement(vC,null),wC=class extends q.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,e){return e.location!==h.location||e.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:e.error,location:e.location,revalidation:h.revalidation||e.revalidation}}componentDidCatch(h,e){console.error("React Router caught the following error during render",h,e)}render(){return this.state.error!==void 0?q.createElement(Ss.Provider,{value:this.props.routeContext},q.createElement($v.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AC({routeContext:h,match:e,children:t}){let i=q.useContext(Vu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Ss.Provider,{value:h},t)}function EC(h,e=[],t=null,i=null){if(h==null){if(!t)return null;if(t.errors)h=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)h=t.matches;else return null}let s=h,a=t==null?void 0:t.errors;if(a!=null){let d=s.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);ht(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,c=-1;if(t)for(let d=0;d<s.length;d++){let p=s[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:g,errors:y}=t,v=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||v){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((d,p,g)=>{let y,v=!1,w=null,A=null;t&&(y=a&&p.route.id?a[p.route.id]:void 0,w=p.route.errorElement||_C,l&&(c<0&&g===0?(_E("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,A=null):c===g&&(v=!0,A=p.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,g+1)),x=()=>{let S;return y?S=w:v?S=A:p.route.Component?S=q.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=d,q.createElement(AC,{match:p,routeContext:{outlet:d,matches:E,isDataRoute:t!=null},children:S})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?q.createElement(wC,{location:t.location,revalidation:t.revalidation,component:w,error:y,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):x()},null)}function Wv(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bC(h){let e=q.useContext(Vu);return ht(e,Wv(h)),e}function SC(h){let e=q.useContext(pg);return ht(e,Wv(h)),e}function xC(h){let e=q.useContext(Ss);return ht(e,Wv(h)),e}function Vv(h){let e=xC(h),t=e.matches[e.matches.length-1];return ht(t.route.id,`${h} can only be used on routes that contain a unique "id"`),t.route.id}function CC(){return Vv("useRouteId")}function kC(){var i;let h=q.useContext($v),e=SC("useRouteError"),t=Vv("useRouteError");return h!==void 0?h:(i=e.errors)==null?void 0:i[t]}function TC(){let{router:h}=bC("useNavigate"),e=Vv("useNavigate"),t=q.useRef(!1);return mE(()=>{t.current=!0}),q.useCallback(async(s,a={})=>{Cr(t.current,gE),t.current&&(typeof s=="number"?h.navigate(s):await h.navigate(s,{fromRouteId:e,...a}))},[h,e])}var nA={};function _E(h,e,t){!e&&!nA[h]&&(nA[h]=!0,Cr(!1,t))}q.memo(PC);function PC({routes:h,future:e,state:t}){return vE(h,void 0,t,e)}function dp(h){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RC({basename:h="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:a=!1}){ht(!Cd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=h.replace(/^\/*/,"/"),c=q.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof t=="string"&&(t=Wu(t));let{pathname:d="/",search:p="",hash:g="",state:y=null,key:v="default"}=t,w=q.useMemo(()=>{let A=Ta(d,l);return A==null?null:{location:{pathname:A,search:p,hash:g,state:y,key:v},navigationType:i}},[l,d,p,g,y,v,i]);return Cr(w!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:q.createElement(kr.Provider,{value:c},q.createElement(xd.Provider,{children:e,value:w}))}function LC({children:h,location:e}){return yC(Sy(h),e)}function Sy(h,e=[]){let t=[];return q.Children.forEach(h,(i,s)=>{if(!q.isValidElement(i))return;let a=[...e,s];if(i.type===q.Fragment){t.push.apply(t,Sy(i.props.children,a));return}ht(i.type===dp,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Sy(i.props.children,a)),t.push(l)}),t}var fp="get",pp="application/x-www-form-urlencoded";function gg(h){return h!=null&&typeof h.tagName=="string"}function MC(h){return gg(h)&&h.tagName.toLowerCase()==="button"}function IC(h){return gg(h)&&h.tagName.toLowerCase()==="form"}function DC(h){return gg(h)&&h.tagName.toLowerCase()==="input"}function OC(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function FC(h,e){return h.button===0&&(!e||e==="_self")&&!OC(h)}var Vf=null;function NC(){if(Vf===null)try{new FormData(document.createElement("form"),0),Vf=!1}catch{Vf=!0}return Vf}var jC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fy(h){return h!=null&&!jC.has(h)?(Cr(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pp}"`),null):h}function HC(h,e){let t,i,s,a,l;if(IC(h)){let c=h.getAttribute("action");i=c?Ta(c,e):null,t=h.getAttribute("method")||fp,s=fy(h.getAttribute("enctype"))||pp,a=new FormData(h)}else if(MC(h)||DC(h)&&(h.type==="submit"||h.type==="image")){let c=h.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=h.getAttribute("formaction")||c.getAttribute("action");if(i=d?Ta(d,e):null,t=h.getAttribute("formmethod")||c.getAttribute("method")||fp,s=fy(h.getAttribute("formenctype"))||fy(c.getAttribute("enctype"))||pp,a=new FormData(c,h),!NC()){let{name:p,type:g,value:y}=h;if(g==="image"){let v=p?`${p}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else p&&a.append(p,y)}}else{if(gg(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=fp,i=null,s=pp,l=h}return a&&s==="text/plain"&&(l=a,a=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:a,body:l}}function Gv(h,e){if(h===!1||h===null||typeof h>"u")throw new Error(e)}async function zC(h,e){if(h.id in e)return e[h.id];try{let t=await import(h.module);return e[h.id]=t,t}catch(t){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function BC(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function UC(h,e,t){let i=await Promise.all(h.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await zC(a,t);return l.links?l.links():[]}return[]}));return GC(i.flat(1).filter(BC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function iA(h,e,t,i,s,a){let l=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,c=(d,p)=>{var g;return t[p].pathname!==d.pathname||((g=t[p].route.path)==null?void 0:g.endsWith("*"))&&t[p].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,p)=>l(d,p)||c(d,p)):a==="data"?e.filter((d,p)=>{var y;let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,p)||c(d,p))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(h,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function $C(h,e){return WC(h.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let s=[i.module];return i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function WC(h){return[...new Set(h)]}function VC(h){let e={},t=Object.keys(h).sort();for(let i of t)e[i]=h[i];return e}function GC(h,e){let t=new Set;return new Set(e),h.reduce((i,s)=>{let a=JSON.stringify(VC(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}function qC(h){let e=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function XC(){let h=q.useContext(Vu);return Gv(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function YC(){let h=q.useContext(pg);return Gv(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var qv=q.createContext(void 0);qv.displayName="FrameworkContext";function wE(){let h=q.useContext(qv);return Gv(h,"You must render this element inside a <HydratedRouter> element"),h}function KC(h,e){let t=q.useContext(qv),[i,s]=q.useState(!1),[a,l]=q.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=e,v=q.useRef(null);q.useEffect(()=>{if(h==="render"&&l(!0),h==="viewport"){let E=S=>{S.forEach(R=>{l(R.isIntersecting)})},x=new IntersectionObserver(E,{threshold:.5});return v.current&&x.observe(v.current),()=>{x.disconnect()}}},[h]),q.useEffect(()=>{if(i){let E=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(E)}}},[i]);let w=()=>{s(!0)},A=()=>{s(!1),l(!1)};return t?h!=="intent"?[a,v,{}]:[a,v,{onFocus:Ic(c,w),onBlur:Ic(d,A),onMouseEnter:Ic(p,w),onMouseLeave:Ic(g,A),onTouchStart:Ic(y,w)}]:[!1,v,{}]}function Ic(h,e){return t=>{h&&h(t),t.defaultPrevented||e(t)}}function QC({page:h,...e}){let{router:t}=XC(),i=q.useMemo(()=>lE(t.routes,h,t.basename),[t.routes,h,t.basename]);return i?q.createElement(ZC,{page:h,matches:i,...e}):null}function JC(h){let{manifest:e,routeModules:t}=wE(),[i,s]=q.useState([]);return q.useEffect(()=>{let a=!1;return UC(h,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[h,e,t]),i}function ZC({page:h,matches:e,...t}){let i=al(),{manifest:s,routeModules:a}=wE(),{loaderData:l,matches:c}=YC(),d=q.useMemo(()=>iA(h,e,c,s,i,"data"),[h,e,c,s,i]),p=q.useMemo(()=>iA(h,e,c,s,i,"assets"),[h,e,c,s,i]),g=q.useMemo(()=>{if(h===i.pathname+i.search+i.hash)return[];let w=new Set,A=!1;if(e.forEach(x=>{var R;let S=s.routes[x.route.id];!S||!S.hasLoader||(!d.some(P=>P.route.id===x.route.id)&&x.route.id in l&&((R=a[x.route.id])!=null&&R.shouldRevalidate)||S.hasClientLoader?A=!0:w.add(x.route.id))}),w.size===0)return[];let E=qC(h);return A&&w.size>0&&E.searchParams.set("_routes",e.filter(x=>w.has(x.route.id)).map(x=>x.route.id).join(",")),[E.pathname+E.search]},[l,i,s,d,e,h,a]),y=q.useMemo(()=>$C(p,s),[p,s]),v=JC(p);return q.createElement(q.Fragment,null,g.map(w=>q.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),y.map(w=>q.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),v.map(({key:w,link:A})=>q.createElement("link",{key:w,...A})))}function ek(...h){return e=>{h.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var AE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{AE&&(window.__reactRouterVersion="7.1.3")}catch{}function tk({basename:h,children:e,window:t}){let i=q.useRef();i.current==null&&(i.current=$x({window:t,v5Compat:!0}));let s=i.current,[a,l]=q.useState({action:s.action,location:s.location}),c=q.useCallback(d=>{q.startTransition(()=>l(d))},[l]);return q.useLayoutEffect(()=>s.listen(c),[s,c]),q.createElement(RC,{basename:h,children:e,location:a.location,navigationType:a.action,navigator:s})}var EE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bE=q.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:a,replace:l,state:c,target:d,to:p,preventScrollReset:g,viewTransition:y,...v},w){let{basename:A}=q.useContext(kr),E=typeof p=="string"&&EE.test(p),x,S=!1;if(typeof p=="string"&&E&&(x=p,AE))try{let B=new URL(window.location.href),Y=p.startsWith("//")?new URL(B.protocol+p):new URL(p),X=Ta(Y.pathname,A);Y.origin===B.origin&&X!=null?p=X+Y.search+Y.hash:S=!0}catch{Cr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=gC(p,{relative:s}),[P,M,N]=KC(i,v),F=sk(p,{replace:l,state:c,target:d,preventScrollReset:g,relative:s,viewTransition:y});function H(B){e&&e(B),B.defaultPrevented||F(B)}let V=q.createElement("a",{...v,...N,href:x||R,onClick:S||a?e:H,ref:ek(w,M),target:d,"data-discover":!E&&t==="render"?"true":void 0});return P&&!E?q.createElement(q.Fragment,null,V,q.createElement(QC,{page:R})):V});bE.displayName="Link";var nk=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:a,to:l,viewTransition:c,children:d,...p},g){let y=kd(l,{relative:p.relative}),v=al(),w=q.useContext(pg),{navigator:A,basename:E}=q.useContext(kr),x=w!=null&&ck(y)&&c===!0,S=A.encodeLocation?A.encodeLocation(y).pathname:y.pathname,R=v.pathname,P=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(R=R.toLowerCase(),P=P?P.toLowerCase():null,S=S.toLowerCase()),P&&E&&(P=Ta(P,E)||P);const M=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let N=R===S||!s&&R.startsWith(S)&&R.charAt(M)==="/",F=P!=null&&(P===S||!s&&P.startsWith(S)&&P.charAt(S.length)==="/"),H={isActive:N,isPending:F,isTransitioning:x},V=N?e:void 0,B;typeof i=="function"?B=i(H):B=[i,N?"active":null,F?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let Y=typeof a=="function"?a(H):a;return q.createElement(bE,{...p,"aria-current":V,className:B,ref:g,style:Y,to:l,viewTransition:c},typeof d=="function"?d(H):d)});nk.displayName="NavLink";var ik=q.forwardRef(({discover:h="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:a,method:l=fp,action:c,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:y,...v},w)=>{let A=lk(),E=uk(c,{relative:p}),x=l.toLowerCase()==="get"?"get":"post",S=typeof c=="string"&&EE.test(c),R=P=>{if(d&&d(P),P.defaultPrevented)return;P.preventDefault();let M=P.nativeEvent.submitter,N=(M==null?void 0:M.getAttribute("formmethod"))||l;A(M||P.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:s,state:a,relative:p,preventScrollReset:g,viewTransition:y})};return q.createElement("form",{ref:w,method:x,action:E,onSubmit:i?d:R,...v,"data-discover":!S&&h==="render"?"true":void 0})});ik.displayName="Form";function rk(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SE(h){let e=q.useContext(Vu);return ht(e,rk(h)),e}function sk(h,{target:e,replace:t,state:i,preventScrollReset:s,relative:a,viewTransition:l}={}){let c=yE(),d=al(),p=kd(h,{relative:a});return q.useCallback(g=>{if(FC(g,e)){g.preventDefault();let y=t!==void 0?t:lh(d)===lh(p);c(h,{replace:y,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[d,c,p,t,i,e,h,s,a,l])}var ak=0,ok=()=>`__${String(++ak)}__`;function lk(){let{router:h}=SE("useSubmit"),{basename:e}=q.useContext(kr),t=CC();return q.useCallback(async(i,s={})=>{let{action:a,method:l,encType:c,formData:d,body:p}=HC(i,e);if(s.navigate===!1){let g=s.fetcherKey||ok();await h.fetch(g,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await h.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[h,e,t])}function uk(h,{relative:e}={}){let{basename:t}=q.useContext(kr),i=q.useContext(Ss);ht(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...kd(h||".",{relative:e})},l=al();if(h==null){a.search=l.search;let c=new URLSearchParams(a.search),d=c.getAll("index");if(d.some(g=>g==="")){c.delete("index"),d.filter(y=>y).forEach(y=>c.append("index",y));let g=c.toString();a.search=g?`?${g}`:""}}return(!h||h===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:vs([t,a.pathname])),lh(a)}function ck(h,e={}){let t=q.useContext(pE);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=SE("useViewTransitionState"),s=kd(h,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Ta(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=Ta(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Vp(s.pathname,l)!=null||Vp(s.pathname,a)!=null}new TextEncoder;var Dc={},et={};const hk="modulepreload",dk=function(h){return"/"+h},rA={},Gf=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(t.map(d=>{if(d=dk(d),d in rA)return;rA[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":hk,p||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((v,w)=>{y.addEventListener("load",v),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};var sh={};sh.d=(h,e)=>{for(var t in e)sh.o(e,t)&&!sh.o(h,t)&&Object.defineProperty(h,t,{enumerable:!0,get:e[t]})};sh.o=(h,e)=>Object.prototype.hasOwnProperty.call(h,e);var Pe=globalThis.pdfjsLib={};sh.d(Pe,{AbortException:()=>ll,AnnotationEditorLayer:()=>Fv,AnnotationEditorParamsType:()=>ke,AnnotationEditorType:()=>Le,AnnotationEditorUIManager:()=>nl,AnnotationLayer:()=>cP,AnnotationMode:()=>ea,ColorPicker:()=>Yp,DOMSVGFactory:()=>s0,DrawLayer:()=>zv,FeatureTest:()=>An,GlobalWorkerOptions:()=>ys,ImageKind:()=>gp,InvalidPDFException:()=>CE,MissingPDFException:()=>ol,OPS:()=>Ni,OutputScale:()=>Py,PDFDataRangeTransport:()=>Eb,PDFDateString:()=>Jv,PDFWorker:()=>Vl,PasswordResponses:()=>mk,PermissionFlag:()=>gk,PixelsPerInch:()=>Pa,RenderingCancelledException:()=>Kv,TextLayer:()=>iv,UnexpectedResponseException:()=>_g,Util:()=>_e,VerbosityLevel:()=>mg,XfaLayer:()=>Sb,build:()=>WT,createValidAbsoluteUrl:()=>wk,fetchData:()=>Ag,getDocument:()=>OT,getFilenameFromUrl:()=>Pk,getPdfFilenameFromUrl:()=>Rk,getXfaPageViewport:()=>Lk,isDataScheme:()=>Eg,isPdfFile:()=>Qv,noContextMenu:()=>Ei,normalizeUnicode:()=>Ck,setLayerDimensions:()=>tl,shadow:()=>Ne,version:()=>$T});const hn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),xE=[1,0,0,1,0,0],xy=[.001,0,0,.001,0,0],fk=1e7,py=1.35,ni={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ea={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},pk="pdfjs_internal_editor_",Le={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ke={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},gk={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},sn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},gp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Tt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Oc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},mg={ERRORS:0,WARNINGS:1,INFOS:5},Ni={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},mk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let yg=mg.WARNINGS;function yk(h){Number.isInteger(h)&&(yg=h)}function vk(){return yg}function vg(h){yg>=mg.INFOS&&console.log(`Info: ${h}`)}function Ie(h){yg>=mg.WARNINGS&&console.log(`Warning: ${h}`)}function tt(h){throw new Error(h)}function Mt(h,e){h||tt(e)}function _k(h){switch(h==null?void 0:h.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function wk(h,e=null,t=null){if(!h)return null;try{if(t&&typeof h=="string"){if(t.addDefaultProtocol&&h.startsWith("www.")){const s=h.match(/\./g);(s==null?void 0:s.length)>=2&&(h=`http://${h}`)}if(t.tryConvertEncoding)try{h=xk(h)}catch{}}const i=e?new URL(h,e):new URL(h);if(_k(i))return i}catch{}return null}function Ne(h,e,t,i=!1){return Object.defineProperty(h,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Ia=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class Cy extends Ia{constructor(e,t){super(e,"PasswordException"),this.code=t}}class ky extends Ia{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class CE extends Ia{constructor(e){super(e,"InvalidPDFException")}}class ol extends Ia{constructor(e){super(e,"MissingPDFException")}}class _g extends Ia{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Ak extends Ia{constructor(e){super(e,"FormatError")}}class ll extends Ia{constructor(e){super(e,"AbortException")}}function kE(h){(typeof h!="object"||(h==null?void 0:h.length)===void 0)&&tt("Invalid argument for bytesToString");const e=h.length,t=8192;if(e<t)return String.fromCharCode.apply(null,h);const i=[];for(let s=0;s<e;s+=t){const a=Math.min(s+t,e),l=h.subarray(s,a);i.push(String.fromCharCode.apply(null,l))}return i.join("")}function wg(h){typeof h!="string"&&tt("Invalid argument for stringToBytes");const e=h.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=h.charCodeAt(i)&255;return t}function Ek(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function Xv(h){const e=Object.create(null);for(const[t,i]of h)e[t]=i;return e}function bk(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function Sk(){try{return new Function(""),!0}catch{return!1}}class An{static get isLittleEndian(){return Ne(this,"isLittleEndian",bk())}static get isEvalSupported(){return Ne(this,"isEvalSupported",Sk())}static get isOffscreenCanvasSupported(){return Ne(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ne(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Ne(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Ne(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const gy=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));var ws,mp,Ty;class _e{static makeHexColor(e,t,i){return`#${gy[e]}${gy[t]}${gy[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[i,s]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,a=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[s,a]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),a=this.applyTransform([e[0],e[3]],t),l=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],s[0],a[0],l[0]),Math.min(i[1],s[1],a[1],l[1]),Math.max(i[0],s[0],a[0],l[0]),Math.max(i[1],s[1],a[1],l[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],l=e[2]*t[1]+e[3]*t[3],c=(i+l)/2,d=Math.sqrt((i+l)**2-4*(i*l-a*s))/2,p=c+d||1,g=c-d||1;return[Math.sqrt(p),Math.sqrt(g)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>l?null:[i,a,s,l]}static bezierBoundingBox(e,t,i,s,a,l,c,d,p){return p?(p[0]=Math.min(p[0],e,c),p[1]=Math.min(p[1],t,d),p[2]=Math.max(p[2],e,c),p[3]=Math.max(p[3],t,d)):p=[Math.min(e,c),Math.min(t,d),Math.max(e,c),Math.max(t,d)],k(this,ws,Ty).call(this,e,i,a,c,t,s,l,d,3*(-e+3*(i-a)+c),6*(e-2*i+a),3*(i-e),p),k(this,ws,Ty).call(this,e,i,a,c,t,s,l,d,3*(-t+3*(s-l)+d),6*(t-2*s+l),3*(s-t),p),p}}ws=new WeakSet,mp=function(e,t,i,s,a,l,c,d,p,g){if(p<=0||p>=1)return;const y=1-p,v=p*p,w=v*p,A=y*(y*(y*e+3*p*t)+3*v*i)+w*s,E=y*(y*(y*a+3*p*l)+3*v*c)+w*d;g[0]=Math.min(g[0],A),g[1]=Math.min(g[1],E),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],E)},Ty=function(e,t,i,s,a,l,c,d,p,g,y,v){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&k(this,ws,mp).call(this,e,t,i,s,a,l,c,d,-y/g,v);return}const w=g**2-4*y*p;if(w<0)return;const A=Math.sqrt(w),E=2*p;k(this,ws,mp).call(this,e,t,i,s,a,l,c,d,(-g+A)/E,v),k(this,ws,mp).call(this,e,t,i,s,a,l,c,d,(-g-A)/E,v)},T(_e,ws);function xk(h){return decodeURIComponent(escape(h))}let my=null,sA=null;function Ck(h){return my||(my=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,sA=new Map([["","t"]])),h.replaceAll(my,(e,t,i)=>t?t.normalize("NFKC"):sA.get(i))}function kk(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const h=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(h);else for(let e=0;e<32;e++)h[e]=Math.floor(Math.random()*255);return kE(h)}const Yv="pdfjs_internal_id_",Br={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function Tk(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(kE(h))}const Wr="http://www.w3.org/2000/svg",no=class no{};Ce(no,"CSS",96),Ce(no,"PDF",72),Ce(no,"PDF_TO_CSS_UNITS",no.CSS/no.PDF);let Pa=no;async function Ag(h,e="text"){if($c(h,document.baseURI)){const t=await fetch(h);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",h,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class Td{constructor({viewBox:e,scale:t,rotation:i,offsetX:s=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=s,this.offsetY=a;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let p,g,y,v;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,g=0,y=0,v=1;break;case 90:p=0,g=1,y=1,v=0;break;case 270:p=0,g=-1,y=-1,v=0;break;case 0:p=1,g=0,y=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(y=-y,v=-v);let w,A,E,x;p===0?(w=Math.abs(d-e[1])*t+s,A=Math.abs(c-e[0])*t+a,E=(e[3]-e[1])*t,x=(e[2]-e[0])*t):(w=Math.abs(c-e[0])*t+s,A=Math.abs(d-e[1])*t+a,E=(e[2]-e[0])*t,x=(e[3]-e[1])*t),this.transform=[p*t,g*t,y*t,v*t,w-p*t*c-y*t*d,A-g*t*c-v*t*d],this.width=E,this.height=x}get rawDims(){const{viewBox:e}=this;return Ne(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new Td({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:a})}convertToViewportPoint(e,t){return _e.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=_e.applyTransform([e[0],e[1]],this.transform),i=_e.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return _e.applyInverseTransform([e,t],this.transform)}}class Kv extends Ia{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Eg(h){const e=h.length;let t=0;for(;t<e&&h[t].trim()==="";)t++;return h.substring(t,t+5).toLowerCase()==="data:"}function Qv(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function Pk(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function Rk(h,e="document.pdf"){if(typeof h!="string")return e;if(Eg(h))return Ie('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(h);let a=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(a&&(a=a[0],a.includes("%")))try{a=i.exec(decodeURIComponent(a))[0]}catch{}return a||e}class aA{constructor(){Ce(this,"started",Object.create(null));Ce(this,"times",[])}time(e){e in this.started&&Ie(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ie(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:a}of this.times)e.push(`${i.padEnd(t)} ${a-s}ms
`);return e.join("")}}function $c(h,e){try{const{protocol:t}=e?new URL(h,e):new URL(h);return t==="http:"||t==="https:"}catch{return!1}}function Ei(h){h.preventDefault()}function oA(h){console.log("Deprecated API usage: "+h)}var ch;class Jv{static toDateObject(e){if(!e||typeof e!="string")return null;u(this,ch)||b(this,ch,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,ch).exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const p=t[7]||"Z";let g=parseInt(t[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(t[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(l+=g,c+=y):p==="+"&&(l-=g,c-=y),new Date(Date.UTC(i,s,a,l,c,d))}}ch=new WeakMap,T(Jv,ch);function Lk(h,{scale:e=1,rotation:t=0}){const{width:i,height:s}=h.attributes.style,a=[0,0,parseInt(i),parseInt(s)];return new Td({viewBox:a,scale:e,rotation:t})}function Zv(h){if(h.startsWith("#")){const e=parseInt(h.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(e=>parseInt(e)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ie(`Not a valid color format: "${h}"`),[0,0,0])}function Mk(h){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of h.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;h.set(t,Zv(i))}e.remove()}function ct(h){const{a:e,b:t,c:i,d:s,e:a,f:l}=h.getTransform();return[e,t,i,s,a,l]}function Ur(h){const{a:e,b:t,c:i,d:s,e:a,f:l}=h.getTransform().invertSelf();return[e,t,i,s,a,l]}function tl(h,e,t=!1,i=!0){if(e instanceof Td){const{pageWidth:s,pageHeight:a}=e.rawDims,{style:l}=h,c=An.isCSSRoundSupported,d=`var(--scale-factor) * ${s}px`,p=`var(--scale-factor) * ${a}px`,g=c?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,y=c?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!t||e.rotation%180===0?(l.width=g,l.height=y):(l.width=y,l.height=g)}i&&h.setAttribute("data-main-rotation",e.rotation)}class Py{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var ta,ro,ji,so,hh,dh,Qp,TE,En,PE,RE,yp,LE,Ly;const Vr=class Vr{constructor(e){T(this,En);T(this,ta,null);T(this,ro,null);T(this,ji);T(this,so,null);T(this,hh,null);b(this,ji,e),u(Vr,dh)||b(Vr,dh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=b(this,ta,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,ji)._uiManager._signal;e.addEventListener("contextmenu",Ei,{signal:t}),e.addEventListener("pointerdown",k(Vr,Qp,TE),{signal:t});const i=b(this,so,document.createElement("div"));i.className="buttons",e.append(i);const s=u(this,ji).toolbarPosition;if(s){const{style:a}=e,l=u(this,ji)._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return k(this,En,LE).call(this),e}get div(){return u(this,ta)}hide(){var e;u(this,ta).classList.add("hidden"),(e=u(this,ro))==null||e.hideDropdown()}show(){var e;u(this,ta).classList.remove("hidden"),(e=u(this,hh))==null||e.shown()}async addAltText(e){const t=await e.render();k(this,En,yp).call(this,t),u(this,so).prepend(t,u(this,En,Ly)),b(this,hh,e)}addColorPicker(e){b(this,ro,e);const t=e.renderButton();k(this,En,yp).call(this,t),u(this,so).prepend(t,u(this,En,Ly))}remove(){var e;u(this,ta).remove(),(e=u(this,ro))==null||e.destroy(),b(this,ro,null)}};ta=new WeakMap,ro=new WeakMap,ji=new WeakMap,so=new WeakMap,hh=new WeakMap,dh=new WeakMap,Qp=new WeakSet,TE=function(e){e.stopPropagation()},En=new WeakSet,PE=function(e){u(this,ji)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},RE=function(e){u(this,ji)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},yp=function(e){const t=u(this,ji)._uiManager._signal;e.addEventListener("focusin",k(this,En,PE).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",k(this,En,RE).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ei,{signal:t})},LE=function(){const{editorType:e,_uiManager:t}=u(this,ji),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",u(Vr,dh)[e]),k(this,En,yp).call(this,i),i.addEventListener("click",s=>{t.delete()},{signal:t._signal}),u(this,so).append(i)},Ly=function(){const e=document.createElement("div");return e.className="divider",e},T(Vr,Qp),T(Vr,dh,null);let Ry=Vr;var fh,ao,oo,La,ME,IE,DE;class Ik{constructor(e){T(this,La);T(this,fh,null);T(this,ao,null);T(this,oo);b(this,oo,e)}show(e,t,i){const[s,a]=k(this,La,IE).call(this,t,i),{style:l}=u(this,ao)||b(this,ao,k(this,La,ME).call(this));e.append(u(this,ao)),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,ao).remove()}}fh=new WeakMap,ao=new WeakMap,oo=new WeakMap,La=new WeakSet,ME=function(){const e=b(this,ao,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Ei,{signal:u(this,oo)._signal});const t=b(this,fh,document.createElement("div"));return t.className="buttons",e.append(t),k(this,La,DE).call(this),e},IE=function(e,t){let i=0,s=0;for(const a of e){const l=a.y+a.height;if(l<i)continue;const c=a.x+(t?a.width:0);if(l>i){s=c,i=l;continue}t?c>s&&(s=c):c<s&&(s=c)}return[t?1-s:s,i]},DE=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=u(this,oo)._signal;e.addEventListener("contextmenu",Ei,{signal:i}),e.addEventListener("click",()=>{u(this,oo).highlightSelection("floating_button")},{signal:i}),u(this,fh).append(e)};function Gp(h,e,t){for(const i of t)e.addEventListener(i,h[i].bind(h))}function Dk(h){return Math.round(Math.min(255,Math.max(1,255*h))).toString(16).padStart(2,"0")}var Jp;class Ok{constructor(){T(this,Jp,0)}get id(){return`${pk}${yn(this,Jp)._++}`}}Jp=new WeakMap;var Gl,ph,on,ql,vp;const l0=class l0{constructor(){T(this,ql);T(this,Gl,kk());T(this,ph,0);T(this,on,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const a=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Ne(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:t,name:i,size:s,type:a}=e;return k(this,ql,vp).call(this,`${t}_${i}_${s}_${a}`,e)}async getFromUrl(e){return k(this,ql,vp).call(this,e,e)}async getFromBlob(e,t){const i=await t;return k(this,ql,vp).call(this,e,i)}async getFromId(e){u(this,on)||b(this,on,new Map);const t=u(this,on).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,on)||b(this,on,new Map);let i=u(this,on).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${u(this,Gl)}_${yn(this,ph)._++}`,refCounter:1,isSvg:!1},u(this,on).set(e,i),u(this,on).set(i.id,i),i}getSvgUrl(e){const t=u(this,on).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;u(this,on)||b(this,on,new Map);const t=u(this,on).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=a.convertToBlob()}(s=i.close)==null||s.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,Gl)}_`)}};Gl=new WeakMap,ph=new WeakMap,on=new WeakMap,ql=new WeakSet,vp=async function(e,t){u(this,on)||b(this,on,new Map);let i=u(this,on).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${u(this,Gl)}_${yn(this,ph)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(i.url=t,s=await Ag(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const a=l0._isSVGFittingCanvas,l=new FileReader,c=new Image,d=new Promise((p,g)=>{c.onload=()=>{i.bitmap=c,i.isSvg=!0,p()},l.onload=async()=>{const y=i.svgUrl=l.result;c.src=await a?`${y}#svgView(preserveAspectRatio(none))`:y},c.onerror=l.onerror=g});l.readAsDataURL(s),await d}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return u(this,on).set(e,i),i&&u(this,on).set(i.id,i),i};let My=l0;var Ht,na,gh,zt;class Fk{constructor(e=128){T(this,Ht,[]);T(this,na,!1);T(this,gh);T(this,zt,-1);b(this,gh,e)}add({cmd:e,undo:t,post:i,mustExec:s,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(s&&e(),u(this,na))return;const d={cmd:e,undo:t,post:i,type:a};if(u(this,zt)===-1){u(this,Ht).length>0&&(u(this,Ht).length=0),b(this,zt,0),u(this,Ht).push(d);return}if(l&&u(this,Ht)[u(this,zt)].type===a){c&&(d.undo=u(this,Ht)[u(this,zt)].undo),u(this,Ht)[u(this,zt)]=d;return}const p=u(this,zt)+1;p===u(this,gh)?u(this,Ht).splice(0,1):(b(this,zt,p),p<u(this,Ht).length&&u(this,Ht).splice(p)),u(this,Ht).push(d)}undo(){if(u(this,zt)===-1)return;b(this,na,!0);const{undo:e,post:t}=u(this,Ht)[u(this,zt)];e(),t==null||t(),b(this,na,!1),b(this,zt,u(this,zt)-1)}redo(){if(u(this,zt)<u(this,Ht).length-1){b(this,zt,u(this,zt)+1),b(this,na,!0);const{cmd:e,post:t}=u(this,Ht)[u(this,zt)];e(),t==null||t(),b(this,na,!1)}}hasSomethingToUndo(){return u(this,zt)!==-1}hasSomethingToRedo(){return u(this,zt)<u(this,Ht).length-1}destroy(){b(this,Ht,null)}}Ht=new WeakMap,na=new WeakMap,gh=new WeakMap,zt=new WeakMap;var Zp,OE;class Pd{constructor(e){T(this,Zp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=An.platform;for(const[i,s,a={}]of e)for(const l of i){const c=l.startsWith("mac+");t&&c?(this.callbacks.set(l.slice(4),{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1))):!t&&!c&&(this.callbacks.set(l,{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(k(this,Zp,OE).call(this,t));if(!i)return;const{callback:s,options:{bubbles:a=!1,args:l=[],checker:c=null}}=i;c&&!c(e,t)||(s.bind(e,...l,t)(),a||(t.stopPropagation(),t.preventDefault()))}}Zp=new WeakSet,OE=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const eg=class eg{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Mk(e),Ne(this,"_colors",e)}convert(e){const t=Zv(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((a,l)=>a===t[l]))return eg._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?_e.makeHexColor(...t):e}};Ce(eg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Iy=eg;var Xl,Xn,Pt,Yt,Yl,qr,Kl,Hi,ia,Ql,lo,lr,zi,uo,mh,yh,Jl,vh,ur,ra,Zl,sa,cr,tg,aa,_h,oa,co,wh,Ah,Bt,We,Xr,ho,Eh,bh,la,hr,Yr,Sh,pi,ae,_p,Dy,FE,NE,wp,jE,HE,zE,Oy,BE,Fy,Ny,UE,vn,Js,$E,WE,jy,VE,Wc,Hy;const $l=class $l{constructor(e,t,i,s,a,l,c,d,p,g,y){T(this,ae);T(this,Xl,new AbortController);T(this,Xn,null);T(this,Pt,new Map);T(this,Yt,new Map);T(this,Yl,null);T(this,qr,null);T(this,Kl,null);T(this,Hi,new Fk);T(this,ia,null);T(this,Ql,0);T(this,lo,new Set);T(this,lr,null);T(this,zi,null);T(this,uo,new Set);T(this,mh,!1);T(this,yh,!1);T(this,Jl,!1);T(this,vh,null);T(this,ur,null);T(this,ra,null);T(this,Zl,null);T(this,sa,!1);T(this,cr,null);T(this,tg,new Ok);T(this,aa,!1);T(this,_h,!1);T(this,oa,null);T(this,co,null);T(this,wh,null);T(this,Ah,null);T(this,Bt,Le.NONE);T(this,We,new Set);T(this,Xr,null);T(this,ho,null);T(this,Eh,null);T(this,bh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});T(this,la,[0,0]);T(this,hr,null);T(this,Yr,null);T(this,Sh,null);T(this,pi,null);const v=this._signal=u(this,Xl).signal;b(this,Yr,e),b(this,Sh,t),b(this,Yl,i),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:v}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),s._on("setpreference",this.onSetPreference.bind(this),{signal:v}),s._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:v}),k(this,ae,jE).call(this),k(this,ae,UE).call(this),k(this,ae,Oy).call(this),b(this,qr,a.annotationStorage),b(this,vh,a.filterFactory),b(this,ho,l),b(this,Zl,c||null),b(this,mh,d),b(this,yh,p),b(this,Jl,g),b(this,Ah,y||null),this.viewParameters={realScale:Pa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=$l.prototype,t=l=>u(l,Yr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),i=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Ne(this,"_keyboardManager",new Pd([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&u(l,Yr).contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&u(l,Yr).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,i,s;(e=u(this,pi))==null||e.resolve(),b(this,pi,null),(t=u(this,Xl))==null||t.abort(),b(this,Xl,null),this._signal=null;for(const a of u(this,Yt).values())a.destroy();u(this,Yt).clear(),u(this,Pt).clear(),u(this,uo).clear(),b(this,Xn,null),u(this,We).clear(),u(this,Hi).destroy(),(i=u(this,Yl))==null||i.destroy(),(s=u(this,cr))==null||s.hide(),b(this,cr,null),u(this,ur)&&(clearTimeout(u(this,ur)),b(this,ur,null)),u(this,hr)&&(clearTimeout(u(this,hr)),b(this,hr,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Ah)}get useNewAltTextFlow(){return u(this,yh)}get useNewAltTextWhenAddingImage(){return u(this,Jl)}get hcmFilter(){return Ne(this,"hcmFilter",u(this,ho)?u(this,vh).addHCMFilter(u(this,ho).foreground,u(this,ho).background):"none")}get direction(){return Ne(this,"direction",getComputedStyle(u(this,Yr)).direction)}get highlightColors(){return Ne(this,"highlightColors",u(this,Zl)?new Map(u(this,Zl).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Ne(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){b(this,wh,e)}editAltText(e,t=!1){var i;(i=u(this,Yl))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":b(this,Jl,t);break}}onPageChanging({pageNumber:e}){b(this,Ql,e-1)}focusMainContainer(){u(this,Yr).focus()}findParent(e,t){for(const i of u(this,Yt).values()){const{x:s,y:a,width:l,height:c}=i.div.getBoundingClientRect();if(e>=s&&e<=s+l&&t>=a&&t<=a+c)return i}return null}disableUserSelect(e=!1){u(this,Sh).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,uo).add(e)}removeShouldRescale(e){u(this,uo).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Pa.PDF_TO_CSS_UNITS;for(const t of u(this,uo))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:l}=t,c=t.toString(),p=k(this,ae,_p).call(this,t).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;t.empty();const y=k(this,ae,Dy).call(this,p),v=u(this,Bt)===Le.NONE,w=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:l,text:c}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(Le.HIGHLIGHT,w);return}w()}addToAnnotationStorage(e){!e.isEmpty()&&u(this,qr)&&!u(this,qr).has(e.id)&&u(this,qr).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,u(this,sa)&&(b(this,sa,!1),k(this,ae,wp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,We))if(t.div.contains(e)){b(this,co,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,co))return;const[e,t]=u(this,co);b(this,co,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){k(this,ae,Oy).call(this),k(this,ae,Fy).call(this)}removeEditListeners(){k(this,ae,BE).call(this),k(this,ae,Ny).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of u(this,zi))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of u(this,zi))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=u(this,Xn))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of u(this,We)){const a=s.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const l of u(this,zi))if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){Ie(`paste: "${a.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const d of i){const p=await s.deserialize(d);if(!p)return;a.push(p)}const l=()=>{for(const d of a)k(this,ae,jy).call(this,d);k(this,ae,Hy).call(this,a)},c=()=>{for(const d of a)d.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(a){Ie(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Bt)!==Le.NONE&&!this.isEditorHandlingKeyboard&&$l._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,sa)&&(b(this,sa,!1),k(this,ae,wp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(k(this,ae,HE).call(this),k(this,ae,Fy).call(this),k(this,ae,vn).call(this,{isEditing:u(this,Bt)!==Le.NONE,isEmpty:k(this,ae,Wc).call(this),hasSomethingToUndo:u(this,Hi).hasSomethingToUndo(),hasSomethingToRedo:u(this,Hi).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,ae,zE).call(this),k(this,ae,Ny).call(this),k(this,ae,vn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,zi)){b(this,zi,e);for(const t of u(this,zi))k(this,ae,Js).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,tg).id}get currentLayer(){return u(this,Yt).get(u(this,Ql))}getLayer(e){return u(this,Yt).get(e)}get currentPageIndex(){return u(this,Ql)}addLayer(e){u(this,Yt).set(e.pageIndex,e),u(this,aa)?e.enable():e.disable()}removeLayer(e){u(this,Yt).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(u(this,Bt)!==e&&!(u(this,pi)&&(await u(this,pi).promise,!u(this,pi)))){if(b(this,pi,Promise.withResolvers()),b(this,Bt,e),e===Le.NONE){this.setEditingState(!1),k(this,ae,WE).call(this),u(this,pi).resolve();return}this.setEditingState(!0),await k(this,ae,$E).call(this),this.unselectAll();for(const s of u(this,Yt).values())s.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),u(this,pi).resolve();return}for(const s of u(this,Pt).values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();u(this,pi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==u(this,Bt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(u(this,zi)){switch(e){case ke.CREATE:this.currentLayer.addNewEditor();return;case ke.HIGHLIGHT_DEFAULT_COLOR:(i=u(this,wh))==null||i.updateColor(t);break;case ke.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Eh)||b(this,Eh,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of u(this,We))s.updateParams(e,t);for(const s of u(this,zi))s.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var a;for(const l of u(this,Pt).values())l.editorType===e&&l.show(t);(((a=u(this,Eh))==null?void 0:a.get(ke.HIGHLIGHT_SHOW_ALL))??!0)!==t&&k(this,ae,Js).call(this,[[ke.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,_h)!==e){b(this,_h,e);for(const t of u(this,Yt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of u(this,Pt).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return u(this,Pt).get(e)}addEditor(e){u(this,Pt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(u(this,ur)&&clearTimeout(u(this,ur)),b(this,ur,setTimeout(()=>{this.focusMainContainer(),b(this,ur,null)},0))),u(this,Pt).delete(e.id),this.unselect(e),(!e.annotationElementId||!u(this,lo).has(e.annotationElementId))&&((t=u(this,qr))==null||t.remove(e.id))}addDeletedAnnotationElement(e){u(this,lo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,lo).has(e)}removeDeletedAnnotationElement(e){u(this,lo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,Xn)!==e&&(b(this,Xn,e),e&&k(this,ae,Js).call(this,e.propertiesToUpdate))}updateUI(e){u(this,ae,VE)===e&&k(this,ae,Js).call(this,e.propertiesToUpdate)}toggleSelected(e){if(u(this,We).has(e)){u(this,We).delete(e),e.unselect(),k(this,ae,vn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,We).add(e),e.select(),k(this,ae,Js).call(this,e.propertiesToUpdate),k(this,ae,vn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of u(this,We))t!==e&&t.unselect();u(this,We).clear(),u(this,We).add(e),e.select(),k(this,ae,Js).call(this,e.propertiesToUpdate),k(this,ae,vn).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,We).has(e)}get firstSelectedEditor(){return u(this,We).values().next().value}unselect(e){e.unselect(),u(this,We).delete(e),k(this,ae,vn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,We).size!==0}get isEnterHandled(){return u(this,We).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){u(this,Hi).undo(),k(this,ae,vn).call(this,{hasSomethingToUndo:u(this,Hi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,ae,Wc).call(this)})}redo(){u(this,Hi).redo(),k(this,ae,vn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Hi).hasSomethingToRedo(),isEmpty:k(this,ae,Wc).call(this)})}addCommands(e){u(this,Hi).add(e),k(this,ae,vn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,ae,Wc).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...u(this,We)],t=()=>{for(const s of e)s.remove()},i=()=>{for(const s of e)k(this,ae,jy).call(this,s)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=u(this,Xn))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,Xn)||this.hasSelection}selectAll(){for(const e of u(this,We))e.commit();k(this,ae,Hy).call(this,u(this,Pt).values())}unselectAll(){if(!(u(this,Xn)&&(u(this,Xn).commitOrRemove(),u(this,Bt)!==Le.NONE))&&this.hasSelection){for(const e of u(this,We))e.unselect();u(this,We).clear(),k(this,ae,vn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;u(this,la)[0]+=e,u(this,la)[1]+=t;const[s,a]=u(this,la),l=[...u(this,We)],c=1e3;u(this,hr)&&clearTimeout(u(this,hr)),b(this,hr,setTimeout(()=>{b(this,hr,null),u(this,la)[0]=u(this,la)[1]=0,this.addCommands({cmd:()=>{for(const d of l)u(this,Pt).has(d.id)&&d.translateInPage(s,a)},undo:()=>{for(const d of l)u(this,Pt).has(d.id)&&d.translateInPage(-s,-a)},mustExec:!1})},c));for(const d of l)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,lr,new Map);for(const e of u(this,We))u(this,lr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,lr))return!1;this.disableUserSelect(!1);const e=u(this,lr);b(this,lr,null);let t=!1;for(const[{x:s,y:a,pageIndex:l},c]of e)c.newX=s,c.newY=a,c.newPageIndex=l,t||(t=s!==c.savedX||a!==c.savedY||l!==c.savedPageIndex);if(!t)return!1;const i=(s,a,l,c)=>{if(u(this,Pt).has(s.id)){const d=u(this,Yt).get(c);d?s._setParentAndPosition(d,a,l):(s.pageIndex=c,s.x=a,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:l,newPageIndex:c}]of e)i(s,a,l,c)},undo:()=>{for(const[s,{savedX:a,savedY:l,savedPageIndex:c}]of e)i(s,a,l,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,lr))for(const i of u(this,lr).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,We).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,Xn)===e}getActive(){return u(this,Xn)}getMode(){return u(this,Bt)}get imageManager(){return Ne(this,"imageManager",new My)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,g=t.rangeCount;p<g;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:s,width:a,height:l}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(p,g,y,v)=>({x:(g-s)/l,y:1-(p+y-i)/a,width:v/l,height:y/a});break;case"180":c=(p,g,y,v)=>({x:1-(p+y-i)/a,y:1-(g+v-s)/l,width:y/a,height:v/l});break;case"270":c=(p,g,y,v)=>({x:1-(g+v-s)/l,y:(p-i)/a,width:v/l,height:y/a});break;default:c=(p,g,y,v)=>({x:(p-i)/a,y:(g-s)/l,width:y/a,height:v/l});break}const d=[];for(let p=0,g=t.rangeCount;p<g;p++){const y=t.getRangeAt(p);if(!y.collapsed)for(const{x:v,y:w,width:A,height:E}of y.getClientRects())A===0||E===0||d.push(c(v,w,A,E))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,Kl)||b(this,Kl,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,Kl))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=u(this,Kl))==null?void 0:s.get(e.data.id);if(!t)return;const i=u(this,qr).getRawValue(t);i&&(u(this,Bt)===Le.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};Xl=new WeakMap,Xn=new WeakMap,Pt=new WeakMap,Yt=new WeakMap,Yl=new WeakMap,qr=new WeakMap,Kl=new WeakMap,Hi=new WeakMap,ia=new WeakMap,Ql=new WeakMap,lo=new WeakMap,lr=new WeakMap,zi=new WeakMap,uo=new WeakMap,mh=new WeakMap,yh=new WeakMap,Jl=new WeakMap,vh=new WeakMap,ur=new WeakMap,ra=new WeakMap,Zl=new WeakMap,sa=new WeakMap,cr=new WeakMap,tg=new WeakMap,aa=new WeakMap,_h=new WeakMap,oa=new WeakMap,co=new WeakMap,wh=new WeakMap,Ah=new WeakMap,Bt=new WeakMap,We=new WeakMap,Xr=new WeakMap,ho=new WeakMap,Eh=new WeakMap,bh=new WeakMap,la=new WeakMap,hr=new WeakMap,Yr=new WeakMap,Sh=new WeakMap,pi=new WeakMap,ae=new WeakSet,_p=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Dy=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of u(this,Yt).values())if(i.hasTextLayer(e))return i;return null},FE=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=k(this,ae,_p).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(u(this,cr)||b(this,cr,new Ik(this)),u(this,cr).show(i,s,this.direction==="ltr"))},NE=function(){var a,l,c;const e=document.getSelection();if(!e||e.isCollapsed){u(this,Xr)&&((a=u(this,cr))==null||a.hide(),b(this,Xr,null),k(this,ae,vn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,Xr))return;const s=k(this,ae,_p).call(this,e).closest(".textLayer");if(!s){u(this,Xr)&&((l=u(this,cr))==null||l.hide(),b(this,Xr,null),k(this,ae,vn).call(this,{hasSelectedText:!1}));return}if((c=u(this,cr))==null||c.hide(),b(this,Xr,t),k(this,ae,vn).call(this,{hasSelectedText:!0}),!(u(this,Bt)!==Le.HIGHLIGHT&&u(this,Bt)!==Le.NONE)&&(u(this,Bt)===Le.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,sa,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=u(this,Bt)===Le.HIGHLIGHT?k(this,ae,Dy).call(this,s):null;d==null||d.toggleDrawing();const p=new AbortController,g=this.combinedSignal(p),y=v=>{v.type==="pointerup"&&v.button!==0||(p.abort(),d==null||d.toggleDrawing(!0),v.type==="pointerup"&&k(this,ae,wp).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("blur",y,{signal:g})}},wp=function(e=""){u(this,Bt)===Le.HIGHLIGHT?this.highlightSelection(e):u(this,mh)&&k(this,ae,FE).call(this)},jE=function(){document.addEventListener("selectionchange",k(this,ae,NE).bind(this),{signal:this._signal})},HE=function(){if(u(this,ra))return;b(this,ra,new AbortController);const e=this.combinedSignal(u(this,ra));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},zE=function(){var e;(e=u(this,ra))==null||e.abort(),b(this,ra,null)},Oy=function(){if(u(this,oa))return;b(this,oa,new AbortController);const e=this.combinedSignal(u(this,oa));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},BE=function(){var e;(e=u(this,oa))==null||e.abort(),b(this,oa,null)},Fy=function(){if(u(this,ia))return;b(this,ia,new AbortController);const e=this.combinedSignal(u(this,ia));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Ny=function(){var e;(e=u(this,ia))==null||e.abort(),b(this,ia,null)},UE=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},vn=function(e){Object.entries(e).some(([i,s])=>u(this,bh)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,bh),e)}),u(this,Bt)===Le.HIGHLIGHT&&e.hasSelectedEditor===!1&&k(this,ae,Js).call(this,[[ke.HIGHLIGHT_FREE,!0]]))},Js=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},$E=async function(){if(!u(this,aa)){b(this,aa,!0);const e=[];for(const t of u(this,Yt).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,Pt).values())t.enable()}},WE=function(){if(this.unselectAll(),u(this,aa)){b(this,aa,!1);for(const e of u(this,Yt).values())e.disable();for(const e of u(this,Pt).values())e.disable()}},jy=function(e){const t=u(this,Yt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},VE=function(){let e=null;for(e of u(this,We));return e},Wc=function(){if(u(this,Pt).size===0)return!0;if(u(this,Pt).size===1)for(const e of u(this,Pt).values())return e.isEmpty();return!1},Hy=function(e){for(const t of u(this,We))t.unselect();u(this,We).clear();for(const t of e)t.isEmpty()||(u(this,We).add(t),t.select());k(this,ae,vn).call(this,{hasSelectedEditor:this.hasSelection})},Ce($l,"TRANSLATE_SMALL",1),Ce($l,"TRANSLATE_BIG",10);let nl=$l;var Ut,dr,Bi,eu,fr,Yn,tu,pr,In,Kr,fo,gr,ua,Qi,Vc,Ap;const _n=class _n{constructor(e){T(this,Qi);T(this,Ut,null);T(this,dr,!1);T(this,Bi,null);T(this,eu,null);T(this,fr,null);T(this,Yn,null);T(this,tu,!1);T(this,pr,null);T(this,In,null);T(this,Kr,null);T(this,fo,null);T(this,gr,!1);b(this,In,e),b(this,gr,e._uiManager.useNewAltTextFlow),u(_n,ua)||b(_n,ua,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){_n._l10n??(_n._l10n=e)}async render(){const e=b(this,Bi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=b(this,eu,document.createElement("span"));e.append(t),u(this,gr)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(_n,ua).missing),t.setAttribute("data-l10n-id",u(_n,ua)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=u(this,In)._uiManager._signal;e.addEventListener("contextmenu",Ei,{signal:i}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const s=a=>{a.preventDefault(),u(this,In)._uiManager.editAltText(u(this,In)),u(this,gr)&&u(this,In)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Qi,Vc)}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(b(this,tu,!0),s(a))},{signal:i}),await k(this,Qi,Ap).call(this),e}finish(){u(this,Bi)&&(u(this,Bi).focus({focusVisible:u(this,tu)}),b(this,tu,!1))}isEmpty(){return u(this,gr)?u(this,Ut)===null:!u(this,Ut)&&!u(this,dr)}hasData(){return u(this,gr)?u(this,Ut)!==null||!!u(this,Kr):this.isEmpty()}get guessedText(){return u(this,Kr)}async setGuessedText(e){u(this,Ut)===null&&(b(this,Kr,e),b(this,fo,await _n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),k(this,Qi,Ap).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,gr)||u(this,Ut)){(t=u(this,pr))==null||t.remove(),b(this,pr,null);return}if(!u(this,pr)){const i=b(this,pr,document.createElement("div"));i.className="noAltTextBadge",u(this,In).div.append(i)}u(this,pr).classList.toggle("hidden",!e)}serialize(e){let t=u(this,Ut);return!e&&u(this,Kr)===t&&(t=u(this,fo)),{altText:t,decorative:u(this,dr),guessedText:u(this,Kr),textWithDisclaimer:u(this,fo)}}get data(){return{altText:u(this,Ut),decorative:u(this,dr)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:s,cancel:a=!1}){i&&(b(this,Kr,i),b(this,fo,s)),!(u(this,Ut)===e&&u(this,dr)===t)&&(a||(b(this,Ut,e),b(this,dr,t)),k(this,Qi,Ap).call(this))}toggle(e=!1){u(this,Bi)&&(!e&&u(this,Yn)&&(clearTimeout(u(this,Yn)),b(this,Yn,null)),u(this,Bi).disabled=!e)}shown(){u(this,In)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Qi,Vc)}})}destroy(){var e,t;(e=u(this,Bi))==null||e.remove(),b(this,Bi,null),b(this,eu,null),b(this,fr,null),(t=u(this,pr))==null||t.remove(),b(this,pr,null)}};Ut=new WeakMap,dr=new WeakMap,Bi=new WeakMap,eu=new WeakMap,fr=new WeakMap,Yn=new WeakMap,tu=new WeakMap,pr=new WeakMap,In=new WeakMap,Kr=new WeakMap,fo=new WeakMap,gr=new WeakMap,ua=new WeakMap,Qi=new WeakSet,Vc=function(){return u(this,Ut)&&"added"||u(this,Ut)===null&&this.guessedText&&"review"||"missing"},Ap=async function(){var s,a,l;const e=u(this,Bi);if(!e)return;if(u(this,gr)){if(e.classList.toggle("done",!!u(this,Ut)),e.setAttribute("data-l10n-id",u(_n,ua)[u(this,Qi,Vc)]),(s=u(this,eu))==null||s.setAttribute("data-l10n-id",u(_n,ua)[`${u(this,Qi,Vc)}-label`]),!u(this,Ut)){(a=u(this,fr))==null||a.remove();return}}else{if(!u(this,Ut)&&!u(this,dr)){e.classList.remove("done"),(l=u(this,fr))==null||l.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,fr);if(!t){b(this,fr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,In).id}`;const c=100,d=u(this,In)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(u(this,Yn)),b(this,Yn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{b(this,Yn,setTimeout(()=>{b(this,Yn,null),u(this,fr).classList.add("show"),u(this,In)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:d}),e.addEventListener("mouseleave",()=>{var p;u(this,Yn)&&(clearTimeout(u(this,Yn)),b(this,Yn,null)),(p=u(this,fr))==null||p.classList.remove("show")},{signal:d})}u(this,dr)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,Ut)),t.parentNode||e.append(t);const i=u(this,In).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},T(_n,ua,null),Ce(_n,"_l10n",null);let qp=_n;var po,Ui,lt,nu,go,Kt,mo,ca,xh,yo,ha,Ch,vo,Qr,mr,iu,ru,gi,kh,ng,Me,zy,Th,By,Uy,GE,qE,$y,Wy,Vy,XE,Gy,YE,KE,QE,qy,Gc;const Ue=class Ue{constructor(e){T(this,Me);T(this,po,null);T(this,Ui,null);T(this,lt,null);T(this,nu,!1);T(this,go,!1);T(this,Kt,null);T(this,mo,null);T(this,ca,null);T(this,xh,"");T(this,yo,!1);T(this,ha,null);T(this,Ch,!1);T(this,vo,!1);T(this,Qr,!1);T(this,mr,null);T(this,iu,0);T(this,ru,0);T(this,gi,null);Ce(this,"_editToolbar",null);Ce(this,"_initialOptions",Object.create(null));Ce(this,"_initialData",null);Ce(this,"_isVisible",!0);Ce(this,"_uiManager",null);Ce(this,"_focusEventsAllowed",!0);T(this,kh,!1);T(this,ng,Ue._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[a,l];const[c,d]=this.parentDimensions;this.x=e.x/c,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ue.prototype._resizeWithKeyboard,t=nl.TRANSLATE_SMALL,i=nl.TRANSLATE_BIG;return Ne(this,"_resizerKeyboardManager",new Pd([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Ue.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Ne(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Nk({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ue._l10n??(Ue._l10n=e),Ue._l10nResizer||(Ue._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ue._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Ue._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){tt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,kh)}set _isDraggable(e){var t;b(this,kh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,ng)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):k(this,Me,Gc).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,yo)?b(this,yo,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[a,l]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/a,this.y=(t+s)/l,this.fixAndSetPosition()}translate(e,t){k(this,Me,zy).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,ha)||b(this,ha,[this.x,this.y]),k(this,Me,zy).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){u(this,ha)||b(this,ha,[this.x,this.y]);const[i,s]=this.parentDimensions;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[c,d]=this.getBaseTranslation();a+=c,l+=d,this.div.style.left=`${(100*a).toFixed(2)}%`,this.div.style.top=`${(100*l).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!u(this,ha)&&(u(this,ha)[0]!==this.x||u(this,ha)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Ue,s=i/e,a=i/t;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:s,y:a,width:l,height:c}=this;if(l*=t,c*=i,s*=t,a*=i,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-l,s)),a=Math.max(0,Math.min(i-c,a));break;case 90:s=Math.max(0,Math.min(t-c,s)),a=Math.min(i,Math.max(l,a));break;case 180:s=Math.min(t,Math.max(l,s)),a=Math.min(i,Math.max(c,a));break;case 270:s=Math.min(t,Math.max(c,s)),a=Math.max(0,Math.min(i-l,a));break}this.x=s/=t,this.y=a/=i;const[d,p]=this.getBaseTranslation();s+=d,a+=p;const{style:g}=this.div;g.left=`${(100*s).toFixed(2)}%`,g.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return k(i=Ue,Th,By).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return k(i=Ue,Th,By).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,u(this,go)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,s=i.endsWith("%"),a=!u(this,go)&&t.endsWith("%");if(s&&a)return;const[l,c]=this.parentDimensions;s||(e.width=`${(100*parseFloat(i)/l).toFixed(2)}%`),!u(this,go)&&!a&&(e.height=`${(100*parseFloat(t)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=u(this,lt))==null||e.finish()}async addEditToolbar(){return this._editToolbar||u(this,vo)?this._editToolbar:(this._editToolbar=new Ry(this),this.div.append(this._editToolbar.render()),u(this,lt)&&await this._editToolbar.addAltText(u(this,lt)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=u(this,lt))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,lt)||(qp.initialize(Ue._l10n),b(this,lt,new qp(this)),u(this,po)&&(u(this,lt).data=u(this,po),b(this,po,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=u(this,lt))==null?void 0:e.data}set altTextData(e){u(this,lt)&&(u(this,lt).data=e)}get guessedAltText(){var e;return(e=u(this,lt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,lt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,lt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,lt)&&!u(this,lt).isEmpty()}hasAltTextData(){var e;return((e=u(this,lt))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=u(this,nu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),k(this,Me,Gy).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),Gp(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=An.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(b(this,yo,!0),this._isDraggable){k(this,Me,XE).call(this,e);return}k(this,Me,Vy).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){u(this,mr)&&clearTimeout(u(this,mr)),b(this,mr,setTimeout(()=>{var e;b(this,mr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const s=this.parentScale,[a,l]=this.pageDimensions,[c,d]=this.pageTranslation,p=e/s,g=t/s,y=this.x*a,v=this.y*l,w=this.width*a,A=this.height*l;switch(i){case 0:return[y+p+c,l-v-g-A+d,y+p+w+c,l-v-g+d];case 90:return[y+g+c,l-v+p+d,y+g+A+c,l-v+p+w+d];case 180:return[y-p-w+c,l-v+g+d,y-p+c,l-v+g+A+d];case 270:return[y-g-A+c,l-v-p-w+d,y-g+c,l-v-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,a,l]=e,c=a-i,d=l-s;switch(this.rotation){case 0:return[i,t-l,c,d];case 90:return[i,t-s,d,c];case 180:return[a,t-s,c,d];case 270:return[a,t-l,d,c];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){b(this,vo,!0)}disableEditMode(){b(this,vo,!1)}isInEditMode(){return u(this,vo)}shouldGetKeyboardEvents(){return u(this,Qr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){k(this,Me,Gy).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){tt("An editor must be serializable")}static async deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,b(s,po,e.accessibilityData);const[a,l]=s.pageDimensions,[c,d,p,g]=s.getRectInCurrentCoords(e.rect,l);return s.x=c/a,s.y=d/l,s.width=p/a,s.height=g/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=u(this,ca))==null||e.abort(),b(this,ca,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,mr)&&(clearTimeout(u(this,mr)),b(this,mr,null)),k(this,Me,Gc).call(this),this.removeEditToolbar(),u(this,gi)){for(const t of u(this,gi).values())clearTimeout(t);b(this,gi,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,Me,GE).call(this),u(this,Kt).classList.remove("hidden"),Gp(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),b(this,mo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,Kt).children;if(!u(this,Ui)){b(this,Ui,Array.from(t));const l=k(this,Me,YE).bind(this),c=k(this,Me,KE).bind(this),d=this._uiManager._signal;for(const p of u(this,Ui)){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",l,{signal:d}),p.addEventListener("blur",c,{signal:d}),p.addEventListener("focus",k(this,Me,QE).bind(this,g),{signal:d}),p.setAttribute("data-l10n-id",Ue._l10nResizer[g])}}const i=u(this,Ui)[0];let s=0;for(const l of t){if(l===i)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(u(this,Ui).length/4);if(a!==s){if(a<s)for(let c=0;c<s-a;c++)u(this,Kt).append(u(this,Kt).firstChild);else if(a>s)for(let c=0;c<a-s;c++)u(this,Kt).firstChild.before(u(this,Kt).lastChild);let l=0;for(const c of t){const p=u(this,Ui)[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Ue._l10nResizer[p])}}k(this,Me,qy).call(this,0),b(this,Qr,!0),u(this,Kt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Qr)&&k(this,Me,Wy).call(this,u(this,xh),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){k(this,Me,Gc).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,a;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(t=this._editToolbar)==null||t.show(),(i=u(this,lt))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,s,a;(e=u(this,Kt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(a=u(this,lt))==null||a.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return u(this,Ch)}set isEditing(e){b(this,Ch,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){b(this,go,!0);const i=e/t,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,gi)||b(this,gi,new Map);const{action:i}=e;let s=u(this,gi).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),u(this,gi).delete(i),u(this,gi).size===0&&b(this,gi,null)},Ue._telemetryTimeout),u(this,gi).set(i,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),b(this,nu,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,nu,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};po=new WeakMap,Ui=new WeakMap,lt=new WeakMap,nu=new WeakMap,go=new WeakMap,Kt=new WeakMap,mo=new WeakMap,ca=new WeakMap,xh=new WeakMap,yo=new WeakMap,ha=new WeakMap,Ch=new WeakMap,vo=new WeakMap,Qr=new WeakMap,mr=new WeakMap,iu=new WeakMap,ru=new WeakMap,gi=new WeakMap,kh=new WeakMap,ng=new WeakMap,Me=new WeakSet,zy=function([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this.fixAndSetPosition()},Th=new WeakSet,By=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Uy=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},GE=function(){if(u(this,Kt))return;b(this,Kt,document.createElement("div")),u(this,Kt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");u(this,Kt).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",k(this,Me,qE).bind(this,i),{signal:t}),s.addEventListener("contextmenu",Ei,{signal:t}),s.tabIndex=-1}this.div.prepend(u(this,Kt))},qE=function(e,t){var A;t.preventDefault();const{isMac:i}=An.platform;if(t.button!==0||t.ctrlKey&&i)return;(A=u(this,lt))==null||A.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,Me,Wy).bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("contextmenu",Ei,{signal:l});const c=this.x,d=this.y,p=this.width,g=this.height,y=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const w=()=>{var E;a.abort(),this.parent.togglePointerEvents(!0),(E=u(this,lt))==null||E.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=y,this.div.style.cursor=v,k(this,Me,$y).call(this,c,d,p,g)};window.addEventListener("pointerup",w,{signal:l}),window.addEventListener("blur",w,{signal:l})},$y=function(e,t,i,s){const a=this.x,l=this.y,c=this.width,d=this.height;a===e&&l===t&&c===i&&d===s||this.addCommands({cmd:()=>{this.width=c,this.height=d,this.x=a,this.y=l;const[p,g]=this.parentDimensions;this.setDims(p*c,g*d),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=e,this.y=t;const[p,g]=this.parentDimensions;this.setDims(p*i,g*s),this.fixAndSetPosition()},mustExec:!0})},Wy=function(e,t){const[i,s]=this.parentDimensions,a=this.x,l=this.y,c=this.width,d=this.height,p=Ue.MIN_SIZE/i,g=Ue.MIN_SIZE/s,y=G=>Math.round(G*1e4)/1e4,v=k(this,Me,Uy).call(this,this.rotation),w=(G,$)=>[v[0]*G+v[2]*$,v[1]*G+v[3]*$],A=k(this,Me,Uy).call(this,360-this.rotation),E=(G,$)=>[A[0]*G+A[2]*$,A[1]*G+A[3]*$];let x,S,R=!1,P=!1;switch(e){case"topLeft":R=!0,x=(G,$)=>[0,0],S=(G,$)=>[G,$];break;case"topMiddle":x=(G,$)=>[G/2,0],S=(G,$)=>[G/2,$];break;case"topRight":R=!0,x=(G,$)=>[G,0],S=(G,$)=>[0,$];break;case"middleRight":P=!0,x=(G,$)=>[G,$/2],S=(G,$)=>[0,$/2];break;case"bottomRight":R=!0,x=(G,$)=>[G,$],S=(G,$)=>[0,0];break;case"bottomMiddle":x=(G,$)=>[G/2,$],S=(G,$)=>[G/2,0];break;case"bottomLeft":R=!0,x=(G,$)=>[0,$],S=(G,$)=>[G,0];break;case"middleLeft":P=!0,x=(G,$)=>[0,$/2],S=(G,$)=>[G,$/2];break}const M=x(c,d),N=S(c,d);let F=w(...N);const H=y(a+F[0]),V=y(l+F[1]);let B=1,Y=1,[X,ie]=this.screenToPageTranslation(t.movementX,t.movementY);if([X,ie]=E(X/i,ie/s),R){const G=Math.hypot(c,d);B=Y=Math.max(Math.min(Math.hypot(N[0]-M[0]-X,N[1]-M[1]-ie)/G,1/c,1/d),p/c,g/d)}else P?B=Math.max(p,Math.min(1,Math.abs(N[0]-M[0]-X)))/c:Y=Math.max(g,Math.min(1,Math.abs(N[1]-M[1]-ie)))/d;const ne=y(c*B),pe=y(d*Y);F=w(...S(ne,pe));const de=H-F[0],ue=V-F[1];this.width=ne,this.height=pe,this.x=de,this.y=ue,this.setDims(i*ne,s*pe),this.fixAndSetPosition()},Vy=function(e){const{isMac:t}=An.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},XE=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,s=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),b(this,iu,e.clientX),b(this,ru,e.clientY);const l=c=>{const{clientX:d,clientY:p}=c,[g,y]=this.screenToPageTranslation(d-u(this,iu),p-u(this,ru));b(this,iu,d),b(this,ru,p),this._uiManager.dragSelectedEditors(g,y)};window.addEventListener("pointermove",l,{passive:!0,capture:!0,signal:s})}const a=()=>{i.abort(),t&&this.div.classList.remove("moving"),b(this,yo,!1),this._uiManager.endDragSession()||k(this,Me,Vy).call(this,e)};window.addEventListener("pointerup",a,{signal:s}),window.addEventListener("blur",a,{signal:s})},Gy=function(){if(u(this,ca)||!this.div)return;b(this,ca,new AbortController);const e=this._uiManager.combinedSignal(u(this,ca));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},YE=function(e){Ue._resizerKeyboardManager.exec(this,e)},KE=function(e){var t;u(this,Qr)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,Kt)&&k(this,Me,Gc).call(this)},QE=function(e){b(this,xh,u(this,Qr)?e:"")},qy=function(e){if(u(this,Ui))for(const t of u(this,Ui))t.tabIndex=e},Gc=function(){if(b(this,Qr,!1),k(this,Me,qy).call(this,-1),u(this,mo)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=u(this,mo);k(this,Me,$y).call(this,e,t,i,s),b(this,mo,null)}},T(Ue,Th),Ce(Ue,"_l10n",null),Ce(Ue,"_l10nResizer",null),Ce(Ue,"_borderLineWidth",-1),Ce(Ue,"_colorManager",new Iy),Ce(Ue,"_zIndex",1),Ce(Ue,"_telemetryTimeout",1e3);let Ge=Ue;class Nk extends Ge{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const lA=3285377520,fi=4294901760,ar=65535;class JE{constructor(e){this.h1=e?e&4294967295:lA,this.h2=e?e&4294967295:lA}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let E=0,x=e.length;E<x;E++){const S=e.charCodeAt(E);S<=255?t[i++]=S:(t[i++]=S>>>8,t[i++]=S&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,a=i-s*4,l=new Uint32Array(t.buffer,0,s);let c=0,d=0,p=this.h1,g=this.h2;const y=3432918353,v=461845907,w=y&ar,A=v&ar;for(let E=0;E<s;E++)E&1?(c=l[E],c=c*y&fi|c*w&ar,c=c<<15|c>>>17,c=c*v&fi|c*A&ar,p^=c,p=p<<13|p>>>19,p=p*5+3864292196):(d=l[E],d=d*y&fi|d*w&ar,d=d<<15|d>>>17,d=d*v&fi|d*A&ar,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(c=0,a){case 3:c^=t[s*4+2]<<16;case 2:c^=t[s*4+1]<<8;case 1:c^=t[s*4],c=c*y&fi|c*w&ar,c=c<<15|c>>>17,c=c*v&fi|c*A&ar,s&1?p^=c:g^=c}this.h1=p,this.h2=g}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&fi|e*36045&ar,t=t*4283543511&fi|((t<<16|e>>>16)*2950163797&fi)>>>16,e^=t>>>1,e=e*444984403&fi|e*60499&ar,t=t*3301882366&fi|((t<<16|e>>>16)*3120437893&fi)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Xy=Object.freeze({map:null,hash:"",transfer:void 0});var _o,wo,$t,ig,ZE;class e0{constructor(){T(this,ig);T(this,_o,!1);T(this,wo,null);T(this,$t,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=u(this,$t).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return u(this,$t).get(e)}remove(e){if(u(this,$t).delete(e),u(this,$t).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,$t).values())if(t instanceof Ge)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=u(this,$t).get(e);let s=!1;if(i!==void 0)for(const[a,l]of Object.entries(t))i[a]!==l&&(s=!0,i[a]=l);else s=!0,u(this,$t).set(e,t);s&&k(this,ig,ZE).call(this),t instanceof Ge&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,$t).has(e)}getAll(){return u(this,$t).size>0?Xv(u(this,$t)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return u(this,$t).size}resetModified(){u(this,_o)&&(b(this,_o,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new eb(this)}get serializable(){if(u(this,$t).size===0)return Xy;const e=new Map,t=new JE,i=[],s=Object.create(null);let a=!1;for(const[l,c]of u(this,$t)){const d=c instanceof Ge?c.serialize(!1,s):c;d&&(e.set(l,d),t.update(`${l}:${JSON.stringify(d)}`),a||(a=!!d.bitmap))}if(a)for(const l of e.values())l.bitmap&&i.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Xy}get editorStats(){let e=null;const t=new Map;for(const i of u(this,$t).values()){if(!(i instanceof Ge))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:a}=s;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const l=e[a]||(e[a]=new Map);for(const[c,d]of Object.entries(s)){if(c==="type")continue;let p=l.get(c);p||(p=new Map,l.set(c,p));const g=p.get(d)??0;p.set(d,g+1)}}for(const[i,s]of t)e[i]=s.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){b(this,wo,null)}get modifiedIds(){if(u(this,wo))return u(this,wo);const e=[];for(const t of u(this,$t).values())!(t instanceof Ge)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return b(this,wo,{ids:new Set(e),hash:e.join(",")})}}_o=new WeakMap,wo=new WeakMap,$t=new WeakMap,ig=new WeakSet,ZE=function(){u(this,_o)||(b(this,_o,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ph;class eb extends e0{constructor(t){super();T(this,Ph);const{map:i,hash:s,transfer:a}=t.serializable,l=structuredClone(i,a?{transfer:a}:null);b(this,Ph,{map:l,hash:s,transfer:a})}get print(){tt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,Ph)}get modifiedIds(){return Ne(this,"modifiedIds",{ids:new Set,hash:""})}}Ph=new WeakMap;var su;class jk{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){T(this,su,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,su).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||u(this,su).has(e.loadedName))){if(Mt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:a}=e,l=new FontFace(i,s,a);this.addNativeFontFace(l);try{await l.load(),u(this,su).add(i),t==null||t(e)}catch{Ie(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}tt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw Ie(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ne(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(hn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Ne(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Mt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const a=i.shift();setTimeout(a.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ne(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(M,N){return M.charCodeAt(N)<<24|M.charCodeAt(N+1)<<16|M.charCodeAt(N+2)<<8|M.charCodeAt(N+3)&255}function s(M,N,F,H){const V=M.substring(0,N),B=M.substring(N+F);return V+H+B}let a,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let p=0;function g(M,N){if(++p>30){Ie("Load test font never loaded."),N();return}if(d.font="30px "+M,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(g.bind(null,M,N))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,y.length,y);const A=16,E=1482184792;let x=i(v,A);for(a=0,l=y.length-3;a<l;a+=4)x=x-E+i(y,a)|0;a<y.length&&(x=x-E+i(y+"XXX",a)|0),v=s(v,A,4,Ek(x));const S=`url(data:font/opentype;base64,${btoa(v)});`,R=`@font-face {font-family:"${y}";src:${S}}`;this.insertRule(R);const P=this._document.createElement("div");P.style.visibility="hidden",P.style.width=P.style.height="10px",P.style.position="absolute",P.style.top=P.style.left="0px";for(const M of[e.loadedName,y]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=M,P.append(N)}this._document.body.append(P),g(y,()=>{P.remove(),t.complete()})}}su=new WeakMap;class Hk{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Tk(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(a){Ie(`getPathGenerator - ignoring character: "${a}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(a,l){};const s=[];for(let a=0,l=i.length;a<l;)switch(i[a++]){case Br.BEZIER_CURVE_TO:{const[c,d,p,g,y,v]=i.slice(a,a+6);s.push(w=>w.bezierCurveTo(c,d,p,g,y,v)),a+=6}break;case Br.MOVE_TO:{const[c,d]=i.slice(a,a+2);s.push(p=>p.moveTo(c,d)),a+=2}break;case Br.LINE_TO:{const[c,d]=i.slice(a,a+2);s.push(p=>p.lineTo(c,d)),a+=2}break;case Br.QUADRATIC_CURVE_TO:{const[c,d,p,g]=i.slice(a,a+4);s.push(y=>y.quadraticCurveTo(c,d,p,g)),a+=4}break;case Br.RESTORE:s.push(c=>c.restore());break;case Br.SAVE:s.push(c=>c.save());break;case Br.SCALE:Mt(s.length===2,"Scale command is only valid at the third position.");break;case Br.TRANSFORM:{const[c,d,p,g,y,v]=i.slice(a,a+6);s.push(w=>w.transform(c,d,p,g,y,v)),a+=6}break;case Br.TRANSLATE:{const[c,d]=i.slice(a,a+2);s.push(p=>p.translate(c,d)),a+=2}break}return this.compiledGlyphs[t]=function(l,c){s[0](l),s[1](l),l.scale(c,-c);for(let d=2,p=s.length;d<p;d++)s[d](l)}}}var Rh;class tb{constructor({enableHWA:e=!1}){T(this,Rh,!1);b(this,Rh,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!u(this,Rh)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){tt("Abstract method `_createCanvas` called.")}}Rh=new WeakMap;class zk extends tb{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class nb{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){tt("Abstract method `_fetch` called.")}}class ib extends nb{async _fetch(e){const t=await Ag(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):wg(t)}}class rb{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,a){return"none"}destroy(e=!1){}}var Ao,Eo,yr,Jr,ln,rg,bo,le,an,Ol,Fl,Ep,Nl,sb,Yy,jl,qc,Xc,Ky,Yc;class Bk extends rb{constructor({docId:t,ownerDocument:i=globalThis.document}){super();T(this,le);T(this,Ao);T(this,Eo);T(this,yr);T(this,Jr);T(this,ln);T(this,rg);T(this,bo,0);b(this,Jr,t),b(this,ln,i)}addFilter(t){if(!t)return"none";let i=u(this,le,an).get(t);if(i)return i;const[s,a,l]=k(this,le,Ep).call(this,t),c=t.length===1?s:`${s}${a}${l}`;if(i=u(this,le,an).get(c),i)return u(this,le,an).set(t,i),i;const d=`g_${u(this,Jr)}_transfer_map_${yn(this,bo)._++}`,p=k(this,le,Nl).call(this,d);u(this,le,an).set(t,p),u(this,le,an).set(c,p);const g=k(this,le,jl).call(this,d);return k(this,le,Xc).call(this,s,a,l,g),p}addHCMFilter(t,i){var A;const s=`${t}-${i}`,a="base";let l=u(this,le,Ol).get(a);if((l==null?void 0:l.key)===s||(l?((A=l.filter)==null||A.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},u(this,le,Ol).set(a,l)),!t||!i))return l.url;const c=k(this,le,Yc).call(this,t);t=_e.makeHexColor(...c);const d=k(this,le,Yc).call(this,i);if(i=_e.makeHexColor(...d),u(this,le,Fl).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return l.url;const p=new Array(256);for(let E=0;E<=255;E++){const x=E/255;p[E]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const g=p.join(","),y=`g_${u(this,Jr)}_hcm_filter`,v=l.filter=k(this,le,jl).call(this,y);k(this,le,Xc).call(this,g,g,g,v),k(this,le,Yy).call(this,v);const w=(E,x)=>{const S=c[E]/255,R=d[E]/255,P=new Array(x+1);for(let M=0;M<=x;M++)P[M]=S+M/x*(R-S);return P.join(",")};return k(this,le,Xc).call(this,w(0,5),w(1,5),w(2,5),v),l.url=k(this,le,Nl).call(this,y),l.url}addAlphaFilter(t){let i=u(this,le,an).get(t);if(i)return i;const[s]=k(this,le,Ep).call(this,[t]),a=`alpha_${s}`;if(i=u(this,le,an).get(a),i)return u(this,le,an).set(t,i),i;const l=`g_${u(this,Jr)}_alpha_map_${yn(this,bo)._++}`,c=k(this,le,Nl).call(this,l);u(this,le,an).set(t,c),u(this,le,an).set(a,c);const d=k(this,le,jl).call(this,l);return k(this,le,Ky).call(this,s,d),c}addLuminosityFilter(t){let i=u(this,le,an).get(t||"luminosity");if(i)return i;let s,a;if(t?([s]=k(this,le,Ep).call(this,[t]),a=`luminosity_${s}`):a="luminosity",i=u(this,le,an).get(a),i)return u(this,le,an).set(t,i),i;const l=`g_${u(this,Jr)}_luminosity_map_${yn(this,bo)._++}`,c=k(this,le,Nl).call(this,l);u(this,le,an).set(t,c),u(this,le,an).set(a,c);const d=k(this,le,jl).call(this,l);return k(this,le,sb).call(this,d),t&&k(this,le,Ky).call(this,s,d),c}addHighlightHCMFilter(t,i,s,a,l){var R;const c=`${i}-${s}-${a}-${l}`;let d=u(this,le,Ol).get(t);if((d==null?void 0:d.key)===c||(d?((R=d.filter)==null||R.remove(),d.key=c,d.url="none",d.filter=null):(d={key:c,url:"none",filter:null},u(this,le,Ol).set(t,d)),!i||!s))return d.url;const[p,g]=[i,s].map(k(this,le,Yc).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),v=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[w,A]=[a,l].map(k(this,le,Yc).bind(this));v<y&&([y,v,w,A]=[v,y,A,w]),u(this,le,Fl).style.color="";const E=(P,M,N)=>{const F=new Array(256),H=(v-y)/N,V=P/255,B=(M-P)/(255*N);let Y=0;for(let X=0;X<=N;X++){const ie=Math.round(y+X*H),ne=V+X*B;for(let pe=Y;pe<=ie;pe++)F[pe]=ne;Y=ie+1}for(let X=Y;X<256;X++)F[X]=F[Y-1];return F.join(",")},x=`g_${u(this,Jr)}_hcm_${t}_filter`,S=d.filter=k(this,le,jl).call(this,x);return k(this,le,Yy).call(this,S),k(this,le,Xc).call(this,E(w[0],A[0],5),E(w[1],A[1],5),E(w[2],A[2],5),S),d.url=k(this,le,Nl).call(this,x),d.url}destroy(t=!1){t&&u(this,le,Ol).size!==0||(u(this,yr)&&(u(this,yr).parentNode.parentNode.remove(),b(this,yr,null)),u(this,Eo)&&(u(this,Eo).clear(),b(this,Eo,null)),b(this,bo,0))}}Ao=new WeakMap,Eo=new WeakMap,yr=new WeakMap,Jr=new WeakMap,ln=new WeakMap,rg=new WeakMap,bo=new WeakMap,le=new WeakSet,an=function(){return u(this,Eo)||b(this,Eo,new Map)},Ol=function(){return u(this,rg)||b(this,rg,new Map)},Fl=function(){if(!u(this,yr)){const t=u(this,ln).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=u(this,ln).createElementNS(Wr,"svg");s.setAttribute("width",0),s.setAttribute("height",0),b(this,yr,u(this,ln).createElementNS(Wr,"defs")),t.append(s),s.append(u(this,yr)),u(this,ln).body.append(t)}return u(this,yr)},Ep=function(t){if(t.length===1){const p=t[0],g=new Array(256);for(let v=0;v<256;v++)g[v]=p[v]/255;const y=g.join(",");return[y,y,y]}const[i,s,a]=t,l=new Array(256),c=new Array(256),d=new Array(256);for(let p=0;p<256;p++)l[p]=i[p]/255,c[p]=s[p]/255,d[p]=a[p]/255;return[l.join(","),c.join(","),d.join(",")]},Nl=function(t){if(u(this,Ao)===void 0){b(this,Ao,"");const i=u(this,ln).URL;i!==u(this,ln).baseURI&&(Eg(i)?Ie('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,Ao,i.split("#",1)[0]))}return`url(${u(this,Ao)}#${t})`},sb=function(t){const i=u(this,ln).createElementNS(Wr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},Yy=function(t){const i=u(this,ln).createElementNS(Wr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},jl=function(t){const i=u(this,ln).createElementNS(Wr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),u(this,le,Fl).append(i),i},qc=function(t,i,s){const a=u(this,ln).createElementNS(Wr,i);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)},Xc=function(t,i,s,a){const l=u(this,ln).createElementNS(Wr,"feComponentTransfer");a.append(l),k(this,le,qc).call(this,l,"feFuncR",t),k(this,le,qc).call(this,l,"feFuncG",i),k(this,le,qc).call(this,l,"feFuncB",s)},Ky=function(t,i){const s=u(this,ln).createElementNS(Wr,"feComponentTransfer");i.append(s),k(this,le,qc).call(this,s,"feFuncA",t)},Yc=function(t){return u(this,le,Fl).style.color=t,Zv(getComputedStyle(u(this,le,Fl)).getPropertyValue("color"))};class ab{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){tt("Abstract method `_fetch` called.")}}class ob extends ab{async _fetch(e){const t=await Ag(e,"arraybuffer");return new Uint8Array(t)}}if(hn){var Qy=Promise.withResolvers(),ah=null;(async()=>{const e=await Gf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Gf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Gf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Gf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let a,l;return new Map(Object.entries({fs:e,http:t,https:i,url:s,canvas:a,path2d:l}))})().then(e=>{ah=e,Qy.resolve()},e=>{Ie(`loadPackages: ${e}`),ah=new Map,Qy.resolve()})}class Ra{static get promise(){return Qy.promise}static get(e){return ah==null?void 0:ah.get(e)}}async function lb(h){const t=await Ra.get("fs").promises.readFile(h);return new Uint8Array(t)}class Uk extends rb{}class $k extends tb{_createCanvas(e,t){return Ra.get("canvas").createCanvas(e,t)}}class Wk extends nb{async _fetch(e){return lb(e)}}class Vk extends ab{async _fetch(e){return lb(e)}}const wn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Jy(h,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),h.clip(s)}class t0{getPattern(){tt("Abstract method `getPattern` called.")}}class Gk extends t0{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let a;if(s===wn.STROKE||s===wn.FILL){const l=t.current.getClippedPathBoundingBox(s,ct(e))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,p=t.cachedCanvases.getCanvas("pattern",c,d),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),i=_e.transform(i,[1,0,0,1,l[0],l[1]]),g.transform(...t.baseTransform),this.matrix&&g.transform(...this.matrix),Jy(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),a=e.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(i);a.setTransform(y)}else Jy(e,this._bbox),a=this._createGradient(e);return a}}function yy(h,e,t,i,s,a,l,c){const d=e.coords,p=e.colors,g=h.data,y=h.width*4;let v;d[t+1]>d[i+1]&&(v=t,t=i,i=v,v=a,a=l,l=v),d[i+1]>d[s+1]&&(v=i,i=s,s=v,v=l,l=c,c=v),d[t+1]>d[i+1]&&(v=t,t=i,i=v,v=a,a=l,l=v);const w=(d[t]+e.offsetX)*e.scaleX,A=(d[t+1]+e.offsetY)*e.scaleY,E=(d[i]+e.offsetX)*e.scaleX,x=(d[i+1]+e.offsetY)*e.scaleY,S=(d[s]+e.offsetX)*e.scaleX,R=(d[s+1]+e.offsetY)*e.scaleY;if(A>=R)return;const P=p[a],M=p[a+1],N=p[a+2],F=p[l],H=p[l+1],V=p[l+2],B=p[c],Y=p[c+1],X=p[c+2],ie=Math.round(A),ne=Math.round(R);let pe,de,ue,G,$,ee,Q,D;for(let W=ie;W<=ne;W++){if(W<x){const ce=W<A?0:(A-W)/(A-x);pe=w-(w-E)*ce,de=P-(P-F)*ce,ue=M-(M-H)*ce,G=N-(N-V)*ce}else{let ce;W>R?ce=1:x===R?ce=0:ce=(x-W)/(x-R),pe=E-(E-S)*ce,de=F-(F-B)*ce,ue=H-(H-Y)*ce,G=V-(V-X)*ce}let re;W<A?re=0:W>R?re=1:re=(A-W)/(A-R),$=w-(w-S)*re,ee=P-(P-B)*re,Q=M-(M-Y)*re,D=N-(N-X)*re;const fe=Math.round(Math.min(pe,$)),we=Math.round(Math.max(pe,$));let ge=y*W+fe*4;for(let ce=fe;ce<=we;ce++)re=(pe-ce)/(pe-$),re<0?re=0:re>1&&(re=1),g[ge++]=de-(de-ee)*re|0,g[ge++]=ue-(ue-Q)*re|0,g[ge++]=G-(G-D)*re|0,g[ge++]=255}}function qk(h,e,t){const i=e.coords,s=e.colors;let a,l;switch(e.type){case"lattice":const c=e.verticesPerRow,d=Math.floor(i.length/c)-1,p=c-1;for(a=0;a<d;a++){let g=a*c;for(let y=0;y<p;y++,g++)yy(h,t,i[g],i[g+1],i[g+c],s[g],s[g+1],s[g+c]),yy(h,t,i[g+c+1],i[g+1],i[g+c],s[g+c+1],s[g+1],s[g+c])}break;case"triangles":for(a=0,l=i.length;a<l;a+=3)yy(h,t,i[a],i[a+1],i[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class Xk extends t0{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-c,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),w=p/y,A=g/v,E={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/w,scaleY:1/A},x=y+2*2,S=v+2*2,R=i.getCanvas("mesh",x,S),P=R.context,M=P.createImageData(y,v);if(t){const F=M.data;for(let H=0,V=F.length;H<V;H+=4)F[H]=t[0],F[H+1]=t[1],F[H+2]=t[2],F[H+3]=255}for(const F of this._figures)qk(M,F,E);return P.putImageData(M,2,2),{canvas:R.canvas,offsetX:c-2*w,offsetY:d-2*A,scaleX:w,scaleY:A}}getPattern(e,t,i,s){Jy(e,this._bbox);let a;if(s===wn.SHADING)a=_e.singularValueDecompose2dScale(ct(e));else if(a=_e.singularValueDecompose2dScale(t.baseTransform),this.matrix){const c=_e.singularValueDecompose2dScale(this.matrix);a=[a[0]*c[0],a[1]*c[1]]}const l=this._createMeshCanvas(a,s===wn.SHADING?null:this._background,t.cachedCanvases);return s!==wn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class Yk extends t0{getPattern(){return"hotpink"}}function Kk(h){switch(h[0]){case"RadialAxial":return new Gk(h);case"Mesh":return new Xk(h);case"Dummy":return new Yk}throw new Error(`Unknown IR type: ${h[0]}`)}const uA={COLORED:1,UNCOLORED:2},sg=class sg{constructor(e,t,i,s,a){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:s,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),vg("TilingType: "+a);const g=t[0],y=t[1],v=t[2],w=t[3],A=v-g,E=w-y,x=_e.singularValueDecompose2dScale(this.matrix),S=_e.singularValueDecompose2dScale(this.baseTransform),R=x[0]*S[0],P=x[1]*S[1];let M=A,N=E,F=!1,H=!1;const V=Math.ceil(d*R),B=Math.ceil(p*P),Y=Math.ceil(A*R),X=Math.ceil(E*P);V>=Y?M=d:F=!0,B>=X?N=p:H=!0;const ie=this.getSizeAndScale(M,this.ctx.canvas.width,R),ne=this.getSizeAndScale(N,this.ctx.canvas.height,P),pe=e.cachedCanvases.getCanvas("pattern",ie.size,ne.size),de=pe.context,ue=c.createCanvasGraphics(de);if(ue.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ue,s,l),de.translate(-ie.scale*g,-ne.scale*y),ue.transform(ie.scale,0,0,ne.scale,0,0),de.save(),this.clipBbox(ue,g,y,v,w),ue.baseTransform=ct(ue.ctx),ue.executeOperatorList(i),ue.endDrawing(),de.restore(),F||H){const G=pe.canvas;F&&(M=d),H&&(N=p);const $=this.getSizeAndScale(M,this.ctx.canvas.width,R),ee=this.getSizeAndScale(N,this.ctx.canvas.height,P),Q=$.size,D=ee.size,W=e.cachedCanvases.getCanvas("pattern-workaround",Q,D),re=W.context,fe=F?Math.floor(A/d):0,we=H?Math.floor(E/p):0;for(let ge=0;ge<=fe;ge++)for(let ce=0;ce<=we;ce++)re.drawImage(G,Q*ge,D*ce,Q,D,0,0,Q,D);return{canvas:W.canvas,scaleX:$.scale,scaleY:ee.scale,offsetX:g,offsetY:y}}return{canvas:pe.canvas,scaleX:ie.scale,scaleY:ne.scale,offsetX:g,offsetY:y}}getSizeAndScale(e,t,i){const s=Math.max(sg.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*i);return a>=s?a=s:i=a/e,{scale:i,size:a}}clipBbox(e,t,i,s,a){const l=s-t,c=a-i;e.ctx.rect(t,i,l,c),e.current.updateRectMinMax(ct(e.ctx),[t,i,s,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,a=e.current;switch(t){case uA.COLORED:const l=this.ctx;s.fillStyle=l.fillStyle,s.strokeStyle=l.strokeStyle,a.fillColor=l.fillStyle,a.strokeColor=l.strokeStyle;break;case uA.UNCOLORED:const c=_e.makeHexColor(i[0],i[1],i[2]);s.fillStyle=c,s.strokeStyle=c,a.fillColor=c,a.strokeColor=c;break;default:throw new Ak(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,s){let a=i;s!==wn.SHADING&&(a=_e.transform(a,t.baseTransform),this.matrix&&(a=_e.transform(a,this.matrix)));const l=this.createPatternCanvas(t);let c=new DOMMatrix(a);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(c),d}};Ce(sg,"MAX_PATTERN_SIZE",3e3);let Zy=sg;function Qk({src:h,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const c=An.isLittleEndian?4278190080:255,[d,p]=l?[a,c]:[c,a],g=i>>3,y=i&7,v=h.length;t=new Uint32Array(t.buffer);let w=0;for(let A=0;A<s;A++){for(const x=e+g;e<x;e++){const S=e<v?h[e]:255;t[w++]=S&128?p:d,t[w++]=S&64?p:d,t[w++]=S&32?p:d,t[w++]=S&16?p:d,t[w++]=S&8?p:d,t[w++]=S&4?p:d,t[w++]=S&2?p:d,t[w++]=S&1?p:d}if(y===0)continue;const E=e<v?h[e++]:255;for(let x=0;x<y;x++)t[w++]=E&1<<7-x?p:d}return{srcPos:e,destPos:w}}const cA=16,hA=100,Jk=15,dA=10,fA=1e3,Fn=16;function Zk(h,e){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){e.save(),this.__originalSave()},h.restore=function(){e.restore(),this.__originalRestore()},h.translate=function(i,s){e.translate(i,s),this.__originalTranslate(i,s)},h.scale=function(i,s){e.scale(i,s),this.__originalScale(i,s)},h.transform=function(i,s,a,l,c,d){e.transform(i,s,a,l,c,d),this.__originalTransform(i,s,a,l,c,d)},h.setTransform=function(i,s,a,l,c,d){e.setTransform(i,s,a,l,c,d),this.__originalSetTransform(i,s,a,l,c,d)},h.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},h.rotate=function(i){e.rotate(i),this.__originalRotate(i)},h.clip=function(i){e.clip(i),this.__originalClip(i)},h.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},h.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},h.bezierCurveTo=function(t,i,s,a,l,c){e.bezierCurveTo(t,i,s,a,l,c),this.__originalBezierCurveTo(t,i,s,a,l,c)},h.rect=function(t,i,s,a){e.rect(t,i,s,a),this.__originalRect(t,i,s,a)},h.closePath=function(){e.closePath(),this.__originalClosePath()},h.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class eT{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function qf(h,e,t,i,s,a,l,c,d,p){const[g,y,v,w,A,E]=ct(h);if(y===0&&v===0){const R=l*g+A,P=Math.round(R),M=c*w+E,N=Math.round(M),F=(l+d)*g+A,H=Math.abs(Math.round(F)-P)||1,V=(c+p)*w+E,B=Math.abs(Math.round(V)-N)||1;return h.setTransform(Math.sign(g),0,0,Math.sign(w),P,N),h.drawImage(e,t,i,s,a,0,0,H,B),h.setTransform(g,y,v,w,A,E),[H,B]}if(g===0&&w===0){const R=c*v+A,P=Math.round(R),M=l*y+E,N=Math.round(M),F=(c+p)*v+A,H=Math.abs(Math.round(F)-P)||1,V=(l+d)*y+E,B=Math.abs(Math.round(V)-N)||1;return h.setTransform(0,Math.sign(y),Math.sign(v),0,P,N),h.drawImage(e,t,i,s,a,0,0,B,H),h.setTransform(g,y,v,w,A,E),[B,H]}h.drawImage(e,t,i,s,a,l,c,d,p);const x=Math.hypot(g,y),S=Math.hypot(v,w);return[x*d,S*p]}function tT(h){const{width:e,height:t}=h;if(e>fA||t>fA)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=e+1;let l=new Uint8Array(a*(t+1)),c,d,p;const g=e+7&-8;let y=new Uint8Array(g*t),v=0;for(const S of h.data){let R=128;for(;R>0;)y[v++]=S&R?0:255,R>>=1}let w=0;for(v=0,y[v]!==0&&(l[0]=1,++w),d=1;d<e;d++)y[v]!==y[v+1]&&(l[d]=y[v]?2:1,++w),v++;for(y[v]!==0&&(l[d]=2,++w),c=1;c<t;c++){v=c*g,p=c*a,y[v-g]!==y[v]&&(l[p]=y[v]?1:8,++w);let S=(y[v]?4:0)+(y[v-g]?8:0);for(d=1;d<e;d++)S=(S>>2)+(y[v+1]?4:0)+(y[v-g+1]?8:0),s[S]&&(l[p+d]=s[S],++w),v++;if(y[v-g]!==y[v]&&(l[p+d]=y[v]?2:4,++w),w>i)return null}for(v=g*(t-1),p=c*a,y[v]!==0&&(l[p]=8,++w),d=1;d<e;d++)y[v]!==y[v+1]&&(l[p+d]=y[v]?4:8,++w),v++;if(y[v]!==0&&(l[p+d]=4,++w),w>i)return null;const A=new Int32Array([0,a,-1,0,-a,0,0,0,1]),E=new Path2D;for(c=0;w&&c<=t;c++){let S=c*a;const R=S+e;for(;S<R&&!l[S];)S++;if(S===R)continue;E.moveTo(S%a,c);const P=S;let M=l[S];do{const N=A[M];do S+=N;while(!l[S]);const F=l[S];F!==5&&F!==10?(M=F,l[S]=0):(M=F&51*M>>4,l[S]&=M>>2|M<<2),E.lineTo(S%a,S/a|0),l[S]||--w}while(P!==S);--c}return y=null,l=null,function(S){S.save(),S.scale(1/e,-1/t),S.translate(0,-t),S.fill(E),S.beginPath(),S.restore()}}class pA{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=xE,this.textMatrixScale=1,this.fontMatrix=xy,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=sn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=_e.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=_e.applyTransform(t,e),s=_e.applyTransform(t.slice(2),e),a=_e.applyTransform([t[0],t[3]],e),l=_e.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],s[0],a[0],l[0]),this.minY=Math.min(this.minY,i[1],s[1],a[1],l[1]),this.maxX=Math.max(this.maxX,i[0],s[0],a[0],l[0]),this.maxY=Math.max(this.maxY,i[1],s[1],a[1],l[1])}updateScalingPathMinMax(e,t){_e.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,s,a,l,c,d,p,g){const y=_e.bezierBoundingBox(t,i,s,a,l,c,d,p,g);g||this.updateRectMinMax(e,y)}getPathBoundingBox(e=wn.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===wn.STROKE){t||tt("Stroke bounding box must include transform.");const s=_e.singularValueDecompose2dScale(t),a=s[0]*this.lineWidth/2,l=s[1]*this.lineWidth/2;i[0]-=a,i[1]-=l,i[2]+=a,i[3]+=l}return i}updateClipFromPath(){const e=_e.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=wn.FILL,t=null){return _e.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function gA(h,e){if(typeof ImageData<"u"&&e instanceof ImageData){h.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%Fn,a=(t-s)/Fn,l=s===0?a:a+1,c=h.createImageData(i,Fn);let d=0,p;const g=e.data,y=c.data;let v,w,A,E;if(e.kind===gp.GRAYSCALE_1BPP){const x=g.byteLength,S=new Uint32Array(y.buffer,0,y.byteLength>>2),R=S.length,P=i+7>>3,M=4294967295,N=An.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(A=v<a?Fn:s,p=0,w=0;w<A;w++){const F=x-d;let H=0;const V=F>P?i:F*8-7,B=V&-8;let Y=0,X=0;for(;H<B;H+=8)X=g[d++],S[p++]=X&128?M:N,S[p++]=X&64?M:N,S[p++]=X&32?M:N,S[p++]=X&16?M:N,S[p++]=X&8?M:N,S[p++]=X&4?M:N,S[p++]=X&2?M:N,S[p++]=X&1?M:N;for(;H<V;H++)Y===0&&(X=g[d++],Y=128),S[p++]=X&Y?M:N,Y>>=1}for(;p<R;)S[p++]=0;h.putImageData(c,0,v*Fn)}}else if(e.kind===gp.RGBA_32BPP){for(w=0,E=i*Fn*4,v=0;v<a;v++)y.set(g.subarray(d,d+E)),d+=E,h.putImageData(c,0,w),w+=Fn;v<l&&(E=i*s*4,y.set(g.subarray(d,d+E)),h.putImageData(c,0,w))}else if(e.kind===gp.RGB_24BPP)for(A=Fn,E=i*A,v=0;v<l;v++){for(v>=a&&(A=s,E=i*A),p=0,w=E;w--;)y[p++]=g[d++],y[p++]=g[d++],y[p++]=g[d++],y[p++]=255;h.putImageData(c,0,v*Fn)}else throw new Error(`bad image kind: ${e.kind}`)}function mA(h,e){if(e.bitmap){h.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%Fn,a=(t-s)/Fn,l=s===0?a:a+1,c=h.createImageData(i,Fn);let d=0;const p=e.data,g=c.data;for(let y=0;y<l;y++){const v=y<a?Fn:s;({srcPos:d}=Qk({src:p,srcPos:d,dest:g,width:i,height:v,nonBlackColor:0})),h.putImageData(c,0,y*Fn)}}function Fc(h,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)h[i]!==void 0&&(e[i]=h[i]);h.setLineDash!==void 0&&(e.setLineDash(h.getLineDash()),e.lineDashOffset=h.lineDashOffset)}function Xf(h){if(h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0),!hn){const{filter:e}=h;e!=="none"&&e!==""&&(h.filter="none")}}function yA(h,e){if(e)return!0;const t=_e.singularValueDecompose2dScale(h);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Pa.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const nT=["butt","round","square"],iT=["miter","round","bevel"],rT={},vA={};var Ma,ev,tv;const u0=class u0{constructor(e,t,i,s,a,{optionalContentConfig:l,markedContentStack:c=null},d,p){T(this,Ma);this.ctx=e,this.current=new pA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new eT(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=c,i){const d=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ct(this.compositeCtx))}this.ctx.save(),Xf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ct(this.ctx)}executeOperatorList(e,t,i,s){const a=e.argsArray,l=e.fnArray;let c=t||0;const d=a.length;if(d===c)return c;const p=d-c>dA&&typeof i=="function",g=p?Date.now()+Jk:0;let y=0;const v=this.commonObjs,w=this.objs;let A;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,i),c;if(A=l[c],A!==Ni.dependency)this[A].apply(this,a[c]);else for(const E of a[c]){const x=E.startsWith("g_")?v:w;if(!x.has(E))return x.get(E,i),c}if(c++,c===d)return c;if(p&&++y>dA){if(Date.now()>g)return i(),c;y=0}}}endDrawing(){k(this,Ma,ev).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),k(this,Ma,tv).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,s=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),c=i,d=s,p="prescale1",g,y;for(;a>2&&c>1||l>2&&d>1;){let v=c,w=d;a>2&&c>1&&(v=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/v),l>2&&d>1&&(w=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/w),g=this.cachedCanvases.getCanvas(p,v,w),y=g.context,y.clearRect(0,0,v,w),y.drawImage(e,0,0,c,d,0,0,v,w),e=g.canvas,c=v,d=w,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,a=this.current.fillColor,l=this.current.patternFill,c=ct(t);let d,p,g,y;if((e.bitmap||e.data)&&e.count>1){const V=e.bitmap||e.data.buffer;p=JSON.stringify(l?c:[c.slice(0,4),a]),d=this._cachedBitmapsMap.get(V),d||(d=new Map,this._cachedBitmapsMap.set(V,d));const B=d.get(p);if(B&&!l){const Y=Math.round(Math.min(c[0],c[2])+c[4]),X=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:B,offsetX:Y,offsetY:X}}g=B}g||(y=this.cachedCanvases.getCanvas("maskCanvas",i,s),mA(y.context,e));let v=_e.transform(c,[1/i,0,0,-1/s,0,0]);v=_e.transform(v,[1,0,0,1,0,-s]);const[w,A,E,x]=_e.getAxialAlignedBoundingBox([0,0,i,s],v),S=Math.round(E-w)||1,R=Math.round(x-A)||1,P=this.cachedCanvases.getCanvas("fillCanvas",S,R),M=P.context,N=w,F=A;M.translate(-N,-F),M.transform(...v),g||(g=this._scaleImage(y.canvas,Ur(M)),g=g.img,d&&l&&d.set(p,g)),M.imageSmoothingEnabled=yA(ct(M),e.interpolate),qf(M,g,0,0,g.width,g.height,0,0,i,s),M.globalCompositeOperation="source-in";const H=_e.transform(Ur(M),[1,0,0,1,-N,-F]);return M.fillStyle=l?a.getPattern(t,this,H,wn.FILL):a,M.fillRect(0,0,i,s),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,P.canvas)),{canvas:P.canvas,offsetX:Math.round(N),offsetY:Math.round(F)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=nT[e]}setLineJoin(e){this.ctx.lineJoin=iT[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const a=this.ctx;a.setTransform(...ct(this.suspendedCtx)),Fc(this.suspendedCtx,a),Zk(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Fc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const a=s[0],l=s[1],c=s[2]-a,d=s[3]-l;c===0||d===0||(this.genericComposeSMask(t.context,i,c,d,t.subtype,t.backdrop,t.transferMap,a,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,a,l,c,d,p,g,y){let v=e.canvas,w=d-g,A=p-y;if(l){const x=_e.makeHexColor(...l);if(w<0||A<0||w+i>v.width||A+s>v.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,s),R=S.context;R.drawImage(v,-w,-A),R.globalCompositeOperation="destination-atop",R.fillStyle=x,R.fillRect(0,0,i,s),R.globalCompositeOperation="source-over",v=S.canvas,w=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(w,A,i,s),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=x,e.fillRect(w,A,i,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const E=new Path2D;E.rect(d,p,i,s),t.clip(E),t.globalCompositeOperation="destination-in",t.drawImage(v,w,A,i,s,d,p,i,s),t.restore()}save(){this.inSMaskMode?(Fc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Fc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,s,a,l){this.ctx.transform(e,t,i,s,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const s=this.ctx,a=this.current;let l=a.x,c=a.y,d,p;const g=ct(s),y=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,v=y?i.slice(0):null;for(let w=0,A=0,E=e.length;w<E;w++)switch(e[w]|0){case Ni.rectangle:l=t[A++],c=t[A++];const x=t[A++],S=t[A++],R=l+x,P=c+S;s.moveTo(l,c),x===0||S===0?s.lineTo(R,P):(s.lineTo(R,c),s.lineTo(R,P),s.lineTo(l,P)),y||a.updateRectMinMax(g,[l,c,R,P]),s.closePath();break;case Ni.moveTo:l=t[A++],c=t[A++],s.moveTo(l,c),y||a.updatePathMinMax(g,l,c);break;case Ni.lineTo:l=t[A++],c=t[A++],s.lineTo(l,c),y||a.updatePathMinMax(g,l,c);break;case Ni.curveTo:d=l,p=c,l=t[A+4],c=t[A+5],s.bezierCurveTo(t[A],t[A+1],t[A+2],t[A+3],l,c),a.updateCurvePathMinMax(g,d,p,t[A],t[A+1],t[A+2],t[A+3],l,c,v),A+=6;break;case Ni.curveTo2:d=l,p=c,s.bezierCurveTo(l,c,t[A],t[A+1],t[A+2],t[A+3]),a.updateCurvePathMinMax(g,d,p,l,c,t[A],t[A+1],t[A+2],t[A+3],v),l=t[A+2],c=t[A+3],A+=4;break;case Ni.curveTo3:d=l,p=c,l=t[A+2],c=t[A+3],s.bezierCurveTo(t[A],t[A+1],l,c,l,c),a.updateCurvePathMinMax(g,d,p,t[A],t[A+1],l,c,l,c,v),A+=4;break;case Ni.closePath:s.closePath();break}y&&a.updateScalingPathMinMax(g,v),a.setCurrentPoint(l,c)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,Ur(t),wn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let a=!1;s&&(t.save(),t.fillStyle=i.getPattern(t,this,Ur(t),wn.FILL),a=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),a&&t.restore(),e&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=rT}eoClip(){this.pendingClip=vA}beginText(){this.current.textMatrix=xE,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var g;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||xy,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Ie("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const a=i.loadedName||"sans-serif",l=((g=i.systemFontInfo)==null?void 0:g.css)||`"${a}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const d=i.italic?"italic":"normal";let p=t;t<cA?p=cA:t>hA&&(p=hA),this.current.fontSizeScale=t/p,this.ctx.font=`${d} ${c} ${p}px ${l}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,s,a,l){this.current.textMatrix=[e,t,i,s,a,l],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,s){const a=this.ctx,l=this.current,c=l.font,d=l.textRenderingMode,p=l.fontSize/l.fontSizeScale,g=d&sn.FILL_STROKE_MASK,y=!!(d&sn.ADD_TO_PATH_FLAG),v=l.patternFill&&!c.missingFile;let w;(c.disableFontFace||y||v)&&(w=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||v?(a.save(),a.translate(t,i),a.beginPath(),w(a,p),s&&a.setTransform(...s),(g===sn.FILL||g===sn.FILL_STROKE)&&a.fill(),(g===sn.STROKE||g===sn.FILL_STROKE)&&a.stroke(),a.restore()):((g===sn.FILL||g===sn.FILL_STROKE)&&a.fillText(e,t,i),(g===sn.STROKE||g===sn.FILL_STROKE)&&a.strokeText(e,t,i)),y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ct(a),x:t,y:i,fontSize:p,addToPath:w})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return Ne(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const a=this.ctx,l=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,p=t.fontDirection,g=t.textHScale*p,y=e.length,v=i.vertical,w=v?1:-1,A=i.defaultVMetrics,E=s*t.fontMatrix[0],x=t.textRenderingMode===sn.FILL&&!i.disableFontFace&&!t.patternFill;a.save(),a.transform(...t.textMatrix),a.translate(t.x,t.y+t.textRise),p>0?a.scale(g,-1):a.scale(g,1);let S;if(t.patternFill){a.save();const F=t.fillColor.getPattern(a,this,Ur(a),wn.FILL);S=ct(a),a.restore(),a.fillStyle=F}let R=t.lineWidth;const P=t.textMatrixScale;if(P===0||R===0){const F=t.textRenderingMode&sn.FILL_STROKE_MASK;(F===sn.STROKE||F===sn.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=P;if(l!==1&&(a.scale(l,l),R/=l),a.lineWidth=R,i.isInvalidPDFjsFont){const F=[];let H=0;for(const V of e)F.push(V.unicode),H+=V.width;a.fillText(F.join(""),0,0),t.x+=H*E*g,a.restore(),this.compose();return}let M=0,N;for(N=0;N<y;++N){const F=e[N];if(typeof F=="number"){M+=w*F*s/1e3;continue}let H=!1;const V=(F.isSpace?d:0)+c,B=F.fontChar,Y=F.accent;let X,ie,ne=F.width;if(v){const de=F.vmetric||A,ue=-(F.vmetric?de[1]:ne*.5)*E,G=de[2]*E;ne=de?-de[0]:ne,X=ue/l,ie=(M+G)/l}else X=M/l,ie=0;if(i.remeasure&&ne>0){const de=a.measureText(B).width*1e3/s*l;if(ne<de&&this.isFontSubpixelAAEnabled){const ue=ne/de;H=!0,a.save(),a.scale(ue,1),X/=ue}else ne!==de&&(X+=(ne-de)/2e3*s/l)}if(this.contentVisible&&(F.isInFont||i.missingFile)){if(x&&!Y)a.fillText(B,X,ie);else if(this.paintChar(B,X,ie,S),Y){const de=X+s*Y.offset.x/l,ue=ie-s*Y.offset.y/l;this.paintChar(Y.fontChar,de,ue,S)}}const pe=v?ne*E-V*p:ne*E+V*p;M+=pe,H&&a.restore()}v?t.y-=M:t.x+=M*g,a.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,s=i.font,a=i.fontSize,l=i.fontDirection,c=s.vertical?1:-1,d=i.charSpacing,p=i.wordSpacing,g=i.textHScale*l,y=i.fontMatrix||xy,v=e.length,w=i.textRenderingMode===sn.INVISIBLE;let A,E,x,S;if(!(w||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(g,l),A=0;A<v;++A){if(E=e[A],typeof E=="number"){S=c*E*a/1e3,this.ctx.translate(S,0),i.x+=S*g;continue}const R=(E.isSpace?p:0)+d,P=s.charProcOperatorList[E.operatorListId];if(!P){Ie(`Type3 character "${E.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=E,this.save(),t.scale(a,a),t.transform(...y),this.executeOperatorList(P),this.restore()),x=_e.applyTransform([E.width,0],y)[0]*a+R,t.translate(x,0),i.x+=x*g}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,s,a,l){this.ctx.rect(i,s,a-i,l-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],s=this.baseTransform||ct(this.ctx),a={createCanvasGraphics:l=>new u0(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Zy(e,i,this.ctx,a,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=_e.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=_e.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=Kk(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,Ur(t),wn.SHADING);const s=Ur(t);{const{width:a,height:l}=t.canvas,[c,d,p,g]=_e.getAxialAlignedBoundingBox([0,0,a,l],s);this.ctx.fillRect(c,d,p-c,g-d)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){tt("Should not call beginInlineImage")}beginImageData(){tt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ct(this.ctx),t)){const i=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],i,s),this.current.updateRectMinMax(ct(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||vg("TODO: Support non-isolated groups."),e.knockout&&Ie("Knockout groups not supported.");const i=ct(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=_e.getAxialAlignedBoundingBox(e.bbox,ct(t));const a=[0,0,t.canvas.width,t.canvas.height];s=_e.intersect(s,a)||[0,0,0,0];const l=Math.floor(s[0]),c=Math.floor(s[1]),d=Math.max(Math.ceil(s[2])-l,1),p=Math.max(Math.ceil(s[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,p]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,p),v=y.context;v.translate(-l,-c),v.transform(...i),e.smask?this.smaskStack.push({canvas:y.canvas,context:v,offsetX:l,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(l,c),t.save()),Fc(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=ct(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const a=_e.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,i,s,a){if(k(this,Ma,ev).call(this),Xf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const l=t[2]-t[0],c=t[3]-t[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=l,t[3]=c;const[d,p]=_e.singularValueDecompose2dScale(ct(this.ctx)),{viewportScale:g}=this,y=Math.ceil(l*this.outputScaleX*g),v=Math.ceil(c*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(y,v);const{canvas:w,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(d,0,0,-p,0,c*p),Xf(this.ctx)}else Xf(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],l,c),this.ctx.clip(),this.ctx.beginPath()}this.current=new pA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,Ma,tv).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=tT(e)),s.compiled)){s.compiled(i);return}const a=this._createMaskCanvas(e),l=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(l,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,s=0,a,l){if(!this.contentVisible)return;e=this.getObject(e.data,e);const c=this.ctx;c.save();const d=ct(c);c.transform(t,i,s,a,0,0);const p=this._createMaskCanvas(e);c.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let g=0,y=l.length;g<y;g+=2){const v=_e.transform(d,[t,i,s,a,l[g],l[g+1]]),[w,A]=_e.applyTransform([0,0],v);c.drawImage(p.canvas,w,A)}c.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const a of e){const{data:l,width:c,height:d,transform:p}=a,g=this.cachedCanvases.getCanvas("maskCanvas",c,d),y=g.context;y.save();const v=this.getObject(l,a);mA(y,v),y.globalCompositeOperation="source-in",y.fillStyle=s?i.getPattern(y,this,Ur(t),wn.FILL):i,y.fillRect(0,0,c,d),y.restore(),t.save(),t.transform(...p),t.scale(1,-1),qf(t,g.canvas,0,0,c,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ie("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,s){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){Ie("Dependent image isn't ready yet");return}const l=a.width,c=a.height,d=[];for(let p=0,g=s.length;p<g;p+=2)d.push({transform:[t,0,0,i,s[p],s[p+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,a=this.cachedCanvases.getCanvas("inlineImage",i,s),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;if(this.save(),!hn){const{filter:c}=s;c!=="none"&&c!==""&&(s.filter="none")}s.scale(1/t,-1/i);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,i).context;gA(d,e),a=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(a,Ur(s));s.imageSmoothingEnabled=yA(ct(s),e.interpolate),qf(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const a=e.width,l=e.height,d=this.cachedCanvases.getCanvas("inlineImage",a,l).context;gA(d,e),s=this.applyTransferMapsToCanvas(d)}for(const a of t)i.save(),i.transform(...a.transform),i.scale(1,-1),qf(i,s,a.x,a.y,a.w,a.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===vA?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ct(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:a}=this.ctx.getTransform();let l,c;if(i===0&&s===0){const d=Math.abs(t),p=Math.abs(a);if(d===p)if(e===0)l=c=1/d;else{const g=d*e;l=c=g<1?1/g:1}else if(e===0)l=1/d,c=1/p;else{const g=d*e,y=p*e;l=g<1?1/g:1,c=y<1?1/y:1}}else{const d=Math.abs(t*a-i*s),p=Math.hypot(t,i),g=Math.hypot(s,a);if(e===0)l=g/d,c=p/d;else{const y=e*d;l=g>y?g/y:1,c=p>y?p/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[s,a]=this.getScaleForStroking();if(t.lineWidth=i||1,s===1&&a===1){t.stroke();return}const l=t.getLineDash();if(e&&t.save(),t.scale(s,a),l.length>0){const c=Math.max(s,a);t.setLineDash(l.map(d=>d/c)),t.lineDashOffset/=c}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ma=new WeakSet,ev=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},tv=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Wl=u0;for(const h in Ni)Wl.prototype[h]!==void 0&&(Wl.prototype[Ni[h]]=Wl.prototype[h]);var Lh,Mh;class ys{static get workerPort(){return u(this,Lh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");b(this,Lh,e)}static get workerSrc(){return u(this,Mh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");b(this,Mh,e)}}Lh=new WeakMap,Mh=new WeakMap,T(ys,Lh,null),T(ys,Mh,"");const Yf={UNKNOWN:0,DATA:1,ERROR:2},Et={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function qn(h){switch(h instanceof Error||typeof h=="object"&&h!==null||tt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new ll(h.message);case"MissingPDFException":return new ol(h.message);case"PasswordException":return new Cy(h.message,h.code);case"UnexpectedResponseException":return new _g(h.message,h.status);case"UnknownErrorException":return new ky(h.message,h.details);default:return new ky(h.message,h.toString())}}var au,Ai,ub,cb,hb,bp;class Kc{constructor(e,t,i){T(this,Ai);T(this,au,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",k(this,Ai,ub).bind(this),{signal:u(this,au).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(l){a.reject(l)}return a.promise}sendWithStream(e,t,i,s){const a=this.streamId++,l=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[a]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:c,action:e,streamId:a,data:t,desiredSize:p.desiredSize},s),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[a].pullCall=g,d.postMessage({sourceName:l,targetName:c,stream:Et.PULL,streamId:a,desiredSize:p.desiredSize}),g.promise},cancel:p=>{Mt(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[a].cancelCall=g,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:l,targetName:c,stream:Et.CANCEL,streamId:a,reason:qn(p)}),g.promise}},i)}destroy(){var e;(e=u(this,au))==null||e.abort(),b(this,au,null)}}au=new WeakMap,Ai=new WeakSet,ub=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){k(this,Ai,hb).call(this,e);return}if(e.callback){const i=e.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Yf.DATA)s.resolve(e.data);else if(e.callback===Yf.ERROR)s.reject(qn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,s=e.sourceName,a=this.comObj;new Promise(function(l){l(t(e.data))}).then(function(l){a.postMessage({sourceName:i,targetName:s,callback:Yf.DATA,callbackId:e.callbackId,data:l})},function(l){a.postMessage({sourceName:i,targetName:s,callback:Yf.ERROR,callbackId:e.callbackId,reason:qn(l)})});return}if(e.streamId){k(this,Ai,cb).call(this,e);return}t(e.data)},cb=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,a=this.comObj,l=this,c=this.actionHandler[e.action],d={enqueue(p,g=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=g,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:s,stream:Et.ENQUEUE,streamId:t,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:s,stream:Et.CLOSE,streamId:t}),delete l.streamSinks[t])},error(p){Mt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:s,stream:Et.ERROR,streamId:t,reason:qn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise(function(p){p(c(e.data,d))}).then(function(){a.postMessage({sourceName:i,targetName:s,stream:Et.START_COMPLETE,streamId:t,success:!0})},function(p){a.postMessage({sourceName:i,targetName:s,stream:Et.START_COMPLETE,streamId:t,reason:qn(p)})})},hb=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,a=this.comObj,l=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case Et.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(qn(e.reason));break;case Et.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(qn(e.reason));break;case Et.PULL:if(!c){a.postMessage({sourceName:i,targetName:s,stream:Et.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,new Promise(function(d){var p;d((p=c.onPull)==null?void 0:p.call(c))}).then(function(){a.postMessage({sourceName:i,targetName:s,stream:Et.PULL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:i,targetName:s,stream:Et.PULL_COMPLETE,streamId:t,reason:qn(d)})});break;case Et.ENQUEUE:if(Mt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case Et.CLOSE:if(Mt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),k(this,Ai,bp).call(this,l,t);break;case Et.ERROR:Mt(l,"error should have stream controller"),l.controller.error(qn(e.reason)),k(this,Ai,bp).call(this,l,t);break;case Et.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(qn(e.reason)),k(this,Ai,bp).call(this,l,t);break;case Et.CANCEL:if(!c)break;new Promise(function(d){var p;d((p=c.onCancel)==null?void 0:p.call(c,qn(e.reason)))}).then(function(){a.postMessage({sourceName:i,targetName:s,stream:Et.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:i,targetName:s,stream:Et.CANCEL_COMPLETE,streamId:t,reason:qn(d)})}),c.sinkCapability.reject(qn(e.reason)),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},bp=async function(e,t){var i,s,a;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(s=e.pullCall)==null?void 0:s.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[t]};var So,Ih;class sT{constructor({parsedData:e,rawData:t}){T(this,So);T(this,Ih);b(this,So,e),b(this,Ih,t)}getRaw(){return u(this,Ih)}get(e){return u(this,So).get(e)??null}getAll(){return Xv(u(this,So))}has(e){return u(this,So).has(e)}}So=new WeakMap,Ih=new WeakMap;const Hl=Symbol("INTERNAL");var Dh,Oh,Fh,ou;class aT{constructor(e,{name:t,intent:i,usage:s,rbGroups:a}){T(this,Dh,!1);T(this,Oh,!1);T(this,Fh,!1);T(this,ou,!0);b(this,Dh,!!(e&ni.DISPLAY)),b(this,Oh,!!(e&ni.PRINT)),this.name=t,this.intent=i,this.usage=s,this.rbGroups=a}get visible(){if(u(this,Fh))return u(this,ou);if(!u(this,ou))return!1;const{print:e,view:t}=this.usage;return u(this,Dh)?(t==null?void 0:t.viewState)!=="OFF":u(this,Oh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==Hl&&tt("Internal method `_setVisible` called."),b(this,Fh,i),b(this,ou,t)}}Dh=new WeakMap,Oh=new WeakMap,Fh=new WeakMap,ou=new WeakMap;var da,Ve,lu,uu,Nh,nv;class oT{constructor(e,t=ni.DISPLAY){T(this,Nh);T(this,da,null);T(this,Ve,new Map);T(this,lu,null);T(this,uu,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,b(this,uu,e.order);for(const i of e.groups)u(this,Ve).set(i.id,new aT(t,i));if(e.baseState==="OFF")for(const i of u(this,Ve).values())i._setVisible(Hl,!1);for(const i of e.on)u(this,Ve).get(i)._setVisible(Hl,!0);for(const i of e.off)u(this,Ve).get(i)._setVisible(Hl,!1);b(this,lu,this.getHash())}}isVisible(e){if(u(this,Ve).size===0)return!0;if(!e)return vg("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,Ve).has(e.id)?u(this,Ve).get(e.id).visible:(Ie(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return k(this,Nh,nv).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,Ve).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(u(this,Ve).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,Ve).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(!u(this,Ve).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,Ve).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(!u(this,Ve).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,Ve).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(u(this,Ve).get(t).visible)return!1}return!0}return Ie(`Unknown optional content policy ${e.policy}.`),!0}return Ie(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var a;const s=u(this,Ve).get(e);if(!s){Ie(`Optional content group not found: ${e}`);return}if(i&&t&&s.rbGroups.length)for(const l of s.rbGroups)for(const c of l)c!==e&&((a=u(this,Ve).get(c))==null||a._setVisible(Hl,!1,!0));s._setVisible(Hl,!!t,!0),b(this,da,null)}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const a=u(this,Ve).get(s);if(a)switch(i){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!a.visible,t);break}}b(this,da,null)}get hasInitialVisibility(){return u(this,lu)===null||this.getHash()===u(this,lu)}getOrder(){return u(this,Ve).size?u(this,uu)?u(this,uu).slice():[...u(this,Ve).keys()]:null}getGroups(){return u(this,Ve).size>0?Xv(u(this,Ve)):null}getGroup(e){return u(this,Ve).get(e)||null}getHash(){if(u(this,da)!==null)return u(this,da);const e=new JE;for(const[t,i]of u(this,Ve))e.update(`${t}:${i.visible}`);return b(this,da,e.hexdigest())}}da=new WeakMap,Ve=new WeakMap,lu=new WeakMap,uu=new WeakMap,Nh=new WeakSet,nv=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const a=e[s];let l;if(Array.isArray(a))l=k(this,Nh,nv).call(this,a);else if(u(this,Ve).has(a))l=u(this,Ve).get(a).visible;else return Ie(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return i==="And"};class lT{constructor(e,{disableRange:t=!1,disableStream:i=!1}){Mt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:l,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,(a==null?void 0:a.length)>0){const d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),e.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(i),!0)});Mt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,s,a;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(a=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||a.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Mt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new uT(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new cT(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class uT{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=Qv(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cT{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function hT(h){let e=!0,t=i("filename\\*","i").exec(h);if(t){t=t[1];let g=c(t);return g=unescape(g),g=d(g),g=p(g),a(g)}if(t=l(h),t){const g=p(t);return a(g)}if(t=i("filename","i").exec(h),t){t=t[1];let g=c(t);return g=p(g),a(g)}function i(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function s(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(g,{fatal:!0}),w=wg(y);y=v.decode(w),e=!1}catch{}}return y}function a(g){return e&&/[\x80-\xff]/.test(g)&&(g=s("utf-8",g),e&&(g=s("iso-8859-1",g))),g}function l(g){const y=[];let v;const w=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=w.exec(g))!==null;){let[,E,x,S]=v;if(E=parseInt(E,10),E in y){if(E===0)break;continue}y[E]=[x,S]}const A=[];for(let E=0;E<y.length&&E in y;++E){let[x,S]=y[E];S=c(S),x&&(S=unescape(S),E===0&&(S=d(S))),A.push(S)}return A.join("")}function c(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let v=0;v<y.length;++v){const w=y[v].indexOf('"');w!==-1&&(y[v]=y[v].slice(0,w),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const v=g.slice(0,y),A=g.slice(y+1).replace(/^[^']*'/,"");return s(v,A)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,w,A){if(w==="q"||w==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,x){return String.fromCharCode(parseInt(x,16))}),s(v,A);try{A=atob(A)}catch{}return s(v,A)})}return""}function n0(h,e){const t=new Headers;if(!h||!e||typeof e!="object")return t;for(const i in e){const s=e[i];s!==void 0&&t.append(i,s)}return t}function i0({responseHeaders:h,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(h.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*t)||i||!e||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function r0(h){const e=h.get("Content-Disposition");if(e){let t=hT(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Qv(t))return t}return null}function bg(h,e){return h===404||h===0&&e.startsWith("file:")?new ol('Missing PDF "'+e+'".'):new _g(`Unexpected server response (${h}) while retrieving PDF "${e}".`,h)}function db(h){return h===200||h===206}function fb(h,e,t){return{method:"GET",headers:h,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function pb(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(Ie(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class _A{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=n0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new dT(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new fT(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class dT{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),s=t.url;fetch(s,fb(i,this._withCredentials,this._abortController)).then(a=>{if(!db(a.status))throw bg(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:c,suggestedLength:d}=i0({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=r0(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ll("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:pb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class fT{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${i-1}`);const l=s.url;fetch(l,fb(a,this._withCredentials,this._abortController)).then(c=>{if(!db(c.status))throw bg(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:pb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const vy=200,_y=206;function pT(h){const e=h.response;return typeof e!="string"?e:wg(e).buffer}class gT{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=n0(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const s={begin:e,end:t};for(const a in i)s[a]=i[a];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,l]of this.headers)t.setRequestHeader(a,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=_y):s.expectedStatus=vy,t.responseType="arraybuffer",e.onError&&(t.onerror=function(a){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var s;const i=this.pendingRequests[e];i&&((s=i.onProgress)==null||s.call(i,t))}onStateChange(e,t){var d,p,g;const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(d=i.onError)==null||d.call(i,s.status);return}const a=s.status||vy;if(!(a===vy&&i.expectedStatus===_y)&&a!==i.expectedStatus){(p=i.onError)==null||p.call(i,s.status);return}const c=pT(s);if(a===_y){const y=s.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);i.onDone({begin:parseInt(v[1],10),chunk:c})}else c?i.onDone({begin:0,chunk:c}):(g=i.onError)==null||g.call(i,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class mT{constructor(e){this._source=e,this._manager=new gT(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Mt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new yT(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new vT(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class yT{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]})),{allowRangeRequests:s,suggestedLength:a}=i0({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=r0(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=bg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class vT{constructor(e,t,i){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=bg(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const _T=/^[a-z][a-z0-9\-+.]+:/i;function wT(h){if(_T.test(h))return new URL(h);const e=Ra.get("url");return new URL(e.pathToFileURL(h))}function gb(h,e,t){return h.protocol==="http:"?Ra.get("http").request(h,{headers:e},t):Ra.get("https").request(h,{headers:e},t)}class AT{constructor(e){this.source=e,this.url=wT(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=n0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new ST(this):new ET(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new xT(this,e,t):new bT(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class mb{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ll("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class yb{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class ET extends mb{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=s=>{if(s.statusCode===404){const d=new ol(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(s);const a=new Headers(this._readableStream.headers),{allowRangeRequests:l,suggestedLength:c}=i0({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=r0(a)};this._request=gb(this._url,t,i),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class bT extends yb{constructor(e,t,i){super(e);const s=Object.fromEntries(e.headers);s.Range=`bytes=${t}-${i-1}`;const a=l=>{if(l.statusCode===404){const c=new ol(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(l)};this._request=gb(this._url,s,a),this._request.on("error",l=>{this._storedError=l}),this._request.end()}}class ST extends mb{constructor(e){super(e);const t=Ra.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new ol(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class xT extends yb{constructor(e,t,i){super(e);const s=Ra.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:i-1}))}}const CT=1e5,Ln=30,kT=.8;var sE,fa,Dn,jh,Hh,xo,Zr,zh,Bh,Co,cu,hu,pa,du,Uh,fu,ko,$h,Wh,pt,To,Po,Vh,ga,pu,Es,vb,_b,rv,ri,Sp,sv,wb,Ab;let iv=(pt=class{constructor({textContentSource:e,container:t,viewport:i}){T(this,Es);T(this,fa,Promise.withResolvers());T(this,Dn,null);T(this,jh,!1);T(this,Hh,!!((sE=globalThis.FontInspector)!=null&&sE.enabled));T(this,xo,null);T(this,Zr,null);T(this,zh,0);T(this,Bh,0);T(this,Co,null);T(this,cu,null);T(this,hu,0);T(this,pa,0);T(this,du,Object.create(null));T(this,Uh,[]);T(this,fu,null);T(this,ko,[]);T(this,$h,new WeakMap);T(this,Wh,null);var d;if(e instanceof ReadableStream)b(this,fu,e);else if(typeof e=="object")b(this,fu,new ReadableStream({start(p){p.enqueue(e),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,Dn,b(this,cu,t)),b(this,pa,i.scale*(globalThis.devicePixelRatio||1)),b(this,hu,i.rotation),b(this,Zr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:l,pageY:c}=i.rawDims;b(this,Wh,[1,0,0,-1,-l,c+a]),b(this,Bh,s),b(this,zh,a),k(d=pt,ri,wb).call(d),tl(t,i),u(this,fa).promise.finally(()=>{u(pt,pu).delete(this),b(this,Zr,null),b(this,du,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=An.platform;return Ne(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,Co).read().then(({value:t,done:i})=>{if(i){u(this,fa).resolve();return}u(this,xo)??b(this,xo,t.lang),Object.assign(u(this,du),t.styles),k(this,Es,vb).call(this,t.items),e()},u(this,fa).reject)};return b(this,Co,u(this,fu).getReader()),u(pt,pu).add(this),e(),u(this,fa).promise}update({viewport:e,onBefore:t=null}){var a;const i=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==u(this,hu)&&(t==null||t(),b(this,hu,s),tl(u(this,cu),{rotation:s})),i!==u(this,pa)){t==null||t(),b(this,pa,i);const l={div:null,properties:null,ctx:k(a=pt,ri,Sp).call(a,u(this,xo))};for(const c of u(this,ko))l.properties=u(this,$h).get(c),l.div=c,k(this,Es,rv).call(this,l)}}cancel(){var t;const e=new ll("TextLayer task cancelled.");(t=u(this,Co))==null||t.cancel(e).catch(()=>{}),b(this,Co,null),u(this,fa).reject(e)}get textDivs(){return u(this,ko)}get textContentItemsStr(){return u(this,Uh)}static cleanup(){if(!(u(this,pu).size>0)){u(this,To).clear();for(const{canvas:e}of u(this,Po).values())e.remove();u(this,Po).clear()}}},fa=new WeakMap,Dn=new WeakMap,jh=new WeakMap,Hh=new WeakMap,xo=new WeakMap,Zr=new WeakMap,zh=new WeakMap,Bh=new WeakMap,Co=new WeakMap,cu=new WeakMap,hu=new WeakMap,pa=new WeakMap,du=new WeakMap,Uh=new WeakMap,fu=new WeakMap,ko=new WeakMap,$h=new WeakMap,Wh=new WeakMap,To=new WeakMap,Po=new WeakMap,Vh=new WeakMap,ga=new WeakMap,pu=new WeakMap,Es=new WeakSet,vb=function(e){var s,a;if(u(this,jh))return;(a=u(this,Zr)).ctx??(a.ctx=k(s=pt,ri,Sp).call(s,u(this,xo)));const t=u(this,ko),i=u(this,Uh);for(const l of e){if(t.length>CT){Ie("Ignoring additional textDivs for performance reasons."),b(this,jh,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const c=u(this,Dn);b(this,Dn,document.createElement("span")),u(this,Dn).classList.add("markedContent"),l.id!==null&&u(this,Dn).setAttribute("id",`${l.id}`),c.append(u(this,Dn))}else l.type==="endMarkedContent"&&b(this,Dn,u(this,Dn).parentNode);continue}i.push(l.str),k(this,Es,_b).call(this,l)}},_b=function(e){var E;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,ko).push(t);const s=_e.transform(u(this,Wh),e.transform);let a=Math.atan2(s[1],s[0]);const l=u(this,du)[e.fontName];l.vertical&&(a+=Math.PI/2);let c=u(this,Hh)&&l.fontSubstitution||l.fontFamily;c=pt.fontFamilyMap.get(c)||c;const d=Math.hypot(s[2],s[3]),p=d*k(E=pt,ri,Ab).call(E,c,u(this,xo));let g,y;a===0?(g=s[4],y=s[5]-p):(g=s[4]+p*Math.sin(a),y=s[5]-p*Math.cos(a));const v="calc(var(--scale-factor)*",w=t.style;u(this,Dn)===u(this,cu)?(w.left=`${(100*g/u(this,Bh)).toFixed(2)}%`,w.top=`${(100*y/u(this,zh)).toFixed(2)}%`):(w.left=`${v}${g.toFixed(2)}px)`,w.top=`${v}${y.toFixed(2)}px)`),w.fontSize=`${v}${(u(pt,ga)*d).toFixed(2)}px)`,w.fontFamily=c,i.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,Hh)&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),a!==0&&(i.angle=a*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),S=Math.abs(e.transform[3]);x!==S&&Math.max(x,S)/Math.min(x,S)>1.5&&(A=!0)}if(A&&(i.canvasWidth=l.vertical?e.height:e.width),u(this,$h).set(t,i),u(this,Zr).div=t,u(this,Zr).properties=i,k(this,Es,rv).call(this,u(this,Zr)),i.hasText&&u(this,Dn).append(t),i.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),u(this,Dn).append(x)}},rv=function(e){var c;const{div:t,properties:i,ctx:s}=e,{style:a}=t;let l="";if(u(pt,ga)>1&&(l=`scale(${1/u(pt,ga)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:d}=a,{canvasWidth:p,fontSize:g}=i;k(c=pt,ri,sv).call(c,s,g*u(this,pa),d);const{width:y}=s.measureText(t.textContent);y>0&&(l=`scaleX(${p*u(this,pa)/y}) ${l}`)}i.angle!==0&&(l=`rotate(${i.angle}deg) ${l}`),l.length>0&&(a.transform=l)},ri=new WeakSet,Sp=function(e=null){let t=u(this,Po).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Po).set(e,t),u(this,Vh).set(t,{size:0,family:""})}return t},sv=function(e,t,i){const s=u(this,Vh).get(e);t===s.size&&i===s.family||(e.font=`${t}px ${i}`,s.size=t,s.family=i)},wb=function(){if(u(this,ga)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),b(this,ga,e.getBoundingClientRect().height),e.remove()},Ab=function(e,t){const i=u(this,To).get(e);if(i)return i;const s=k(this,ri,Sp).call(this,t);s.canvas.width=s.canvas.height=Ln,k(this,ri,sv).call(this,s,Ln,e);const a=s.measureText("");let l=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);if(l){const g=l/(l+c);return u(this,To).set(e,g),s.canvas.width=s.canvas.height=0,g}s.strokeStyle="red",s.clearRect(0,0,Ln,Ln),s.strokeText("g",0,0);let d=s.getImageData(0,0,Ln,Ln).data;c=0;for(let g=d.length-1-3;g>=0;g-=4)if(d[g]>0){c=Math.ceil(g/4/Ln);break}s.clearRect(0,0,Ln,Ln),s.strokeText("A",0,Ln),d=s.getImageData(0,0,Ln,Ln).data,l=0;for(let g=0,y=d.length;g<y;g+=4)if(d[g]>0){l=Ln-Math.floor(g/4/Ln);break}s.canvas.width=s.canvas.height=0;const p=l?l/(l+c):kT;return u(this,To).set(e,p),p},T(pt,ri),T(pt,To,new Map),T(pt,Po,new Map),T(pt,Vh,new WeakMap),T(pt,ga,null),T(pt,pu,new Set),pt);class uh{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(a){var d;if(!a)return;let l=null;const c=a.name;if(c==="#text")l=a.value;else if(uh.shouldBuildText(c))(d=a==null?void 0:a.attributes)!=null&&d.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&t.push({str:l}),!!a.children)for(const p of a.children)s(p)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const TT=65536,PT=100,RT=5e3,LT=hn?$k:zk,MT=hn?Wk:ib,IT=hn?Uk:Bk,DT=hn?Vk:ob;function OT(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const e=new av,{docId:t}=e,i=h.url?FT(h.url):null,s=h.data?NT(h.data):null,a=h.httpHeaders||null,l=h.withCredentials===!0,c=h.password??null,d=h.range instanceof Eb?h.range:null,p=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:TT;let g=h.worker instanceof Vl?h.worker:null;const y=h.verbosity,v=typeof h.docBaseUrl=="string"&&!Eg(h.docBaseUrl)?h.docBaseUrl:null,w=typeof h.cMapUrl=="string"?h.cMapUrl:null,A=h.cMapPacked!==!1,E=h.CMapReaderFactory||MT,x=typeof h.standardFontDataUrl=="string"?h.standardFontDataUrl:null,S=h.StandardFontDataFactory||DT,R=h.stopAtErrors!==!0,P=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,M=h.isEvalSupported!==!1,N=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!hn,F=typeof h.isChrome=="boolean"?h.isChrome:!An.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),H=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,V=typeof h.disableFontFace=="boolean"?h.disableFontFace:hn,B=h.fontExtraProperties===!0,Y=h.enableXfa===!0,X=h.ownerDocument||globalThis.document,ie=h.disableRange===!0,ne=h.disableStream===!0,pe=h.disableAutoFetch===!0,de=h.pdfBug===!0,ue=h.CanvasFactory||LT,G=h.FilterFactory||IT,$=h.enableHWA===!0,ee=d?d.length:h.length??NaN,Q=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!hn&&!V,D=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:E===ib&&S===ob&&w&&x&&$c(w,document.baseURI)&&$c(x,document.baseURI);h.canvasFactory&&oA("`canvasFactory`-instance option, please use `CanvasFactory` instead."),h.filterFactory&&oA("`filterFactory`-instance option, please use `FilterFactory` instead.");const W=null;yk(y);const re={canvasFactory:new ue({ownerDocument:X,enableHWA:$}),filterFactory:new G({docId:t,ownerDocument:X}),cMapReaderFactory:D?null:new E({baseUrl:w,isCompressed:A}),standardFontDataFactory:D?null:new S({baseUrl:x})};if(!g){const ge={verbosity:y,port:ys.workerPort};g=ge.port?Vl.fromPort(ge):new Vl(ge),e._worker=g}const fe={docId:t,apiVersion:"4.8.69",data:s,password:c,disableAutoFetch:pe,rangeChunkSize:p,length:ee,docBaseUrl:v,enableXfa:Y,evaluatorOptions:{maxImageSize:P,disableFontFace:V,ignoreErrors:R,isEvalSupported:M,isOffscreenCanvasSupported:N,isChrome:F,canvasMaxAreaInBytes:H,fontExtraProperties:B,useSystemFonts:Q,cMapUrl:D?w:null,standardFontDataUrl:D?x:null}},we={disableFontFace:V,fontExtraProperties:B,ownerDocument:X,pdfBug:de,styleElement:W,loadingParams:{disableAutoFetch:pe,enableXfa:Y}};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ge=g.messageHandler.sendWithPromise("GetDocRequest",fe,s?[s.buffer]:null);let ce;if(d)ce=new lT(d,{disableRange:ie,disableStream:ne});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");let xe;hn?xe=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&$c(i)?_A:AT:xe=$c(i)?_A:mT,ce=new xe({url:i,length:ee,httpHeaders:a,withCredentials:l,rangeChunkSize:p,disableRange:ie,disableStream:ne})}return ge.then(xe=>{if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Te=new Kc(t,xe,g.port),rt=new BT(Te,e,ce,we,re);e._transport=rt,Te.send("Ready",null)})}).catch(e._capability.reject),e}function FT(h){if(h instanceof URL)return h.href;try{return new URL(h,window.location).href}catch{if(hn&&typeof h=="string")return h}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function NT(h){if(hn&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return wg(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h==null?void 0:h.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function wA(h){return typeof h=="object"&&Number.isInteger(h==null?void 0:h.num)&&h.num>=0&&Number.isInteger(h==null?void 0:h.gen)&&h.gen>=0}var ag;const og=class og{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${yn(og,ag)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};ag=new WeakMap,T(og,ag,0);let av=og;class Eb{constructor(e,t,i=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){tt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class jT{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ne(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ma,es,_i,zl,xp;class HT{constructor(e,t,i,s=!1){T(this,_i);T(this,ma,null);T(this,es,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new aA:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new bb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:a=!1}={}){return new Td({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ne(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:s=ea.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1}){var M,N;(M=this._stats)==null||M.time("Overall");const v=this._transport.getRenderingIntent(i,s,g,y),{renderingIntent:w,cacheKey:A}=v;b(this,es,!1),k(this,_i,xp).call(this),c||(c=this._transport.getOptionalContentConfig(w));let E=this._intentStates.get(A);E||(E=Object.create(null),this._intentStates.set(A,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const x=!!(w&ni.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)==null||N.time("Page Request"),this._pumpOperatorList(v));const S=F=>{var H;E.renderTasks.delete(R),(this._maybeCleanupAfterRender||x)&&b(this,es,!0),k(this,_i,zl).call(this,!x),F?(R.capability.reject(F),this._abortOperatorList({intentState:E,reason:F instanceof Error?F:new Error(F)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(H=globalThis.Stats)!=null&&H.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new lv({callback:S,params:{canvasContext:e,viewport:t,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:p});(E.renderTasks||(E.renderTasks=new Set)).add(R);const P=R.task;return Promise.all([E.displayReadyCapability.promise,c]).then(([F,H])=>{var V;if(this.destroyed){S();return}if((V=this._stats)==null||V.time("Rendering"),!(H.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:F,optionalContentConfig:H}),R.operatorListChanged()}).catch(S),P}getOperatorList({intent:e="display",annotationMode:t=ea.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var p;function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(e,t,i,s,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>uh.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function a(){l.read().then(function({value:d,done:p}){if(p){i(c);return}c.lang??(c.lang=d.lang),Object.assign(c.styles,d.styles),c.items.push(...d.items),a()},s)}const l=t.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),b(this,es,!1),k(this,_i,xp).call(this),Promise.all(e)}cleanup(e=!1){b(this,es,!0);const t=k(this,_i,zl).call(this,!1);return e&&t&&this._stats&&(this._stats=new aA),t}_startRenderPage(e,t){var s,a;const i=this._intentStates.get(t);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(a=i.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&k(this,_i,zl).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:s}){const{map:a,transfer:l}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:s},l).getReader(),p=this._intentStates.get(t);p.streamReader=d;const g=()=>{d.read().then(({value:y,done:v})=>{if(v){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const v of p.renderTasks)v.operatorListChanged();k(this,_i,zl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Kv){let s=PT;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new ll(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}ma=new WeakMap,es=new WeakMap,_i=new WeakSet,zl=function(e=!1){if(k(this,_i,xp).call(this),!u(this,es)||this.destroyed)return!1;if(e)return b(this,ma,setTimeout(()=>{b(this,ma,null),k(this,_i,zl).call(this,!1)},RT)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,es,!1),!0},xp=function(){u(this,ma)&&(clearTimeout(u(this,ma)),b(this,ma,null))};var ts,lg;class zT{constructor(){T(this,ts,new Map);T(this,lg,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};u(this,lg).then(()=>{for(const[s]of u(this,ts))s.call(this,i)})}addEventListener(e,t,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:a}=i;if(a.aborted){Ie("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);s=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}u(this,ts).set(t,s)}removeEventListener(e,t){const i=u(this,ts).get(t);i==null||i(),u(this,ts).delete(t)}terminate(){for(const[,e]of u(this,ts))e==null||e();u(this,ts).clear()}}ts=new WeakMap,lg=new WeakMap;var ug,Ro,Lo,gu,Cp,mu,kp;const it=class it{constructor({name:e=null,port:t=null,verbosity:i=vk()}={}){T(this,gu);var s;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=u(it,Lo))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(u(it,Lo)||b(it,Lo,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return hn?Promise.all([Ra.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Kc("main","worker",e),this._messageHandler.on("ready",function(){}),k(this,gu,Cp).call(this)}_initialize(){if(u(it,Ro)||u(it,mu,kp)){this._setupFakeWorker();return}let{workerSrc:e}=it;try{it._isSameOrigin(window.location.href,e)||(e=it._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Kc("main","worker",t),s=()=>{a.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:a.signal}),i.on("test",c=>{if(a.abort(),this.destroyed||!c){s();return}this._messageHandler=i,this._port=t,this._webWorker=t,k(this,gu,Cp).call(this)}),i.on("ready",c=>{if(a.abort(),this.destroyed){s();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const c=new Uint8Array;i.send("test",c,[c.buffer])};l();return}catch{vg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){u(it,Ro)||(Ie("Setting up fake worker."),b(it,Ro,!0)),it._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new zT;this._port=t;const i=`fake${yn(it,ug)._++}`,s=new Kc(i+"_worker",i,t);e.setup(s,t),this._messageHandler=new Kc(i,i+"_worker",t),k(this,gu,Cp).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=u(it,Lo))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=u(this,Lo))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new it(e)}static get workerSrc(){if(ys.workerSrc)return ys.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ne(this,"_setupFakeWorkerGlobal",(async()=>u(this,mu,kp)?u(this,mu,kp):(await import(this.workerSrc)).WorkerMessageHandler)())}};ug=new WeakMap,Ro=new WeakMap,Lo=new WeakMap,gu=new WeakSet,Cp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},mu=new WeakSet,kp=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},T(it,mu),T(it,ug,0),T(it,Ro,!1),T(it,Lo),hn&&(b(it,Ro,!0),ys.workerSrc||(ys.workerSrc="./pdf.worker.mjs")),it._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const s=new URL(t,i);return i.origin===s.origin},it._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Vl=it;var ns,vr,yu,vu,_r,Mo,Qc;class BT{constructor(e,t,i,s,a){T(this,Mo);T(this,ns,new Map);T(this,vr,new Map);T(this,yu,new Map);T(this,vu,new Map);T(this,_r,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new bb,this.fontLoader=new jk({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ne(this,"annotationStorage",new e0)}getRenderingIntent(e,t=ea.ENABLE,i=null,s=!1,a=!1){let l=ni.DISPLAY,c=Xy;switch(e){case"any":l=ni.ANY;break;case"display":break;case"print":l=ni.PRINT;break;default:Ie(`getRenderingIntent - invalid intent: ${e}`)}const d=l&ni.PRINT&&i instanceof eb?i:this.annotationStorage;switch(t){case ea.DISABLE:l+=ni.ANNOTATIONS_DISABLE;break;case ea.ENABLE:break;case ea.ENABLE_FORMS:l+=ni.ANNOTATIONS_FORMS;break;case ea.ENABLE_STORAGE:l+=ni.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Ie(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(l+=ni.IS_EDITING),a&&(l+=ni.OPLIST);const{ids:p,hash:g}=d.modifiedIds,y=[l,c.hash,g];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:c,modifiedIds:p}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=u(this,_r))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of u(this,vr).values())e.push(s._destroy());u(this,vr).clear(),u(this,yu).clear(),u(this,vu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),u(this,ns).clear(),this.filterFactory.destroy(),iv.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new ll("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{Mt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){s.close();return}Mt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async i=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:l}=this._fullReader;return(!s||!a)&&(this._lastProgress&&((c=t.onProgress)==null||c.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var p;(p=t.onProgress)==null||p.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:s,isRangeSupported:a,contentLength:l}}),e.on("GetRangeReader",(i,s)=>{Mt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:l,done:c}){if(c){s.close();return}Mt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{a.cancel(l),s.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new jT(i,this))}),e.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new Cy(i.message,i.code);break;case"InvalidPDFException":s=new CE(i.message);break;case"MissingPDFException":s=new ol(i.message);break;case"UnexpectedResponseException":s=new _g(i.message,i.status);break;case"UnknownErrorException":s=new ky(i.message,i.details);break;default:tt("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",i=>{if(b(this,_r,Promise.withResolvers()),t.onPassword){const s=a=>{a instanceof Error?u(this,_r).reject(a):u(this,_r).resolve({password:a})};try{t.onPassword(s,i.code)}catch(a){u(this,_r).reject(a)}}else u(this,_r).reject(new Cy(i.message,i.code));return u(this,_r).promise}),e.on("DataLoaded",i=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;u(this,vr).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,a])=>{var l;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:c,fontExtraProperties:d,pdfBug:p}=this._params;if("error"in a){const w=a.error;Ie(`Error during font loading: ${w}`),this.commonObjs.resolve(i,w);break}const g=p&&((l=globalThis.FontInspector)!=null&&l.enabled)?(w,A)=>globalThis.FontInspector.fontAdded(w,A):null,y=new Hk(a,{disableFontFace:c,inspectFont:g});this.fontLoader.bind(y).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d&&y.data&&(y.data=null),this.commonObjs.resolve(i,y)});break;case"CopyLocalImage":const{imageRef:v}=a;Mt(v,"The imageRef must be defined.");for(const w of u(this,vr).values())for(const[,A]of w.objs)if((A==null?void 0:A.ref)===v)return A.dataLen?(this.commonObjs.resolve(i,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,a,l])=>{var d;if(this.destroyed)return;const c=u(this,vr).get(s);if(!c.objs.has(i)){if(c._intentStates.size===0){(d=l==null?void 0:l.bitmap)==null||d.close();return}switch(a){case"Image":c.objs.resolve(i,l),(l==null?void 0:l.dataLen)>fk&&(c._maybeCleanupAfterRender=!0);break;case"Pattern":c.objs.resolve(i,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",i=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Ie("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=u(this,yu).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&u(this,vu).set(a.refStr,e);const l=new HT(t,a,this,this._params.pdfBug);return u(this,vr).set(t,l),l});return u(this,yu).set(t,s),s}getPageIndex(e){return wA(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return k(this,Mo,Qc).call(this,"GetFieldObjects")}hasJSActions(){return k(this,Mo,Qc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,Mo,Qc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return k(this,Mo,Qc).call(this,"GetOptionalContentConfig").then(t=>new oT(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,ns).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>{var a,l;return{info:s[0],metadata:s[1]?new sT(s[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}});return u(this,ns).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,vr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,ns).clear(),this.filterFactory.destroy(!0),iv.cleanup()}}cachedPageNumber(e){if(!wA(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,vu).get(t)??null}}ns=new WeakMap,vr=new WeakMap,yu=new WeakMap,vu=new WeakMap,_r=new WeakMap,Mo=new WeakSet,Qc=function(e,t=null){const i=u(this,ns).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return u(this,ns).set(e,s),s};const Kf=Symbol("INITIAL_DATA");var $i,Gh,ov;class bb{constructor(){T(this,Gh);T(this,$i,Object.create(null))}get(e,t=null){if(t){const s=k(this,Gh,ov).call(this,e);return s.promise.then(()=>t(s.data)),null}const i=u(this,$i)[e];if(!i||i.data===Kf)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=u(this,$i)[e];return!!t&&t.data!==Kf}resolve(e,t=null){const i=k(this,Gh,ov).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in u(this,$i)){const{data:i}=u(this,$i)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}b(this,$i,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,$i)){const{data:t}=u(this,$i)[e];t!==Kf&&(yield[e,t])}}}$i=new WeakMap,Gh=new WeakSet,ov=function(e){var t;return(t=u(this,$i))[e]||(t[e]={...Promise.withResolvers(),data:Kf})};var ya;class UT{constructor(e){T(this,ya,null);b(this,ya,e),this.onContinue=null}get promise(){return u(this,ya).capability.promise}cancel(e=0){u(this,ya).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,ya).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,ya);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}ya=new WeakMap;var va,Io;const io=class io{constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:a,operatorList:l,pageIndex:c,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:v=null}){T(this,va,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new UT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,d;if(this.cancelled)return;if(this._canvas){if(u(io,Io).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(io,Io).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:a,background:l}=this.params;this.gfx=new Wl(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:s,transparency:e,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),u(this,va)&&(window.cancelAnimationFrame(u(this,va)),b(this,va,null)),u(io,Io).delete(this._canvas),this.callback(e||new Kv(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,va,window.requestAnimationFrame(()=>{b(this,va,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(io,Io).delete(this._canvas),this.callback())))}};va=new WeakMap,Io=new WeakMap,T(io,Io,new WeakSet);let lv=io;const $T="4.8.69",WT="3634dab10";function AA(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function Nc(h){return Math.max(0,Math.min(255,255*h))}class EA{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Nc(e),[e,e,e]}static G_HTML([e]){const t=AA(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Nc)}static RGB_HTML(e){return`#${e.map(AA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[Nc(1-Math.min(1,e+s)),Nc(1-Math.min(1,i+s)),Nc(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,a=1-t,l=1-i,c=Math.min(s,a,l);return["CMYK",s,a,l,c]}}class VT{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){tt("Abstract method `_createSVG` called.")}}class s0 extends VT{_createSVG(e){return document.createElementNS(Wr,e)}}class Sb{static setupStorage(e,t,i,s,a){const l=s.getValue(t,{value:null});switch(i.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),a==="print")break;e.addEventListener("input",c=>{s.setValue(t,{value:c.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(l.value===i.attributes.xfaOn?e.setAttribute("checked",!0):l.value===i.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",c=>{s.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),a==="print")break;e.addEventListener("input",c=>{s.setValue(t,{value:c.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const c of i.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const d=c.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;s.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:a}){const{attributes:l}=t,c=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[d,p]of Object.entries(l))if(p!=null)switch(d){case"class":p.length&&e.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!c||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,p)}c&&a.addLinkAttributes(e,l.href,l.newWindow),i&&l.dataId&&this.setupStorage(e,l.dataId,t,i)}static render(e){var y,v;const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,a=e.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:a,linkService:i});const c=a!=="richText",d=e.div;if(d.append(l),e.viewport){const w=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=w}c&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(s.children.length===0){if(s.value){const w=document.createTextNode(s.value);l.append(w),c&&uh.shouldBuildText(s.name)&&p.push(w)}return{textDivs:p}}const g=[[s,-1,l]];for(;g.length>0;){const[w,A,E]=g.at(-1);if(A+1===w.children.length){g.pop();continue}const x=w.children[++g.at(-1)[1]];if(x===null)continue;const{name:S}=x;if(S==="#text"){const P=document.createTextNode(x.value);p.push(P),E.append(P);continue}const R=(y=x==null?void 0:x.attributes)!=null&&y.xmlns?document.createElementNS(x.attributes.xmlns,S):document.createElement(S);if(E.append(R),x.attributes&&this.setAttributes({html:R,element:x,storage:t,intent:a,linkService:i}),((v=x.children)==null?void 0:v.length)>0)g.push([x,-1,R]);else if(x.value){const P=document.createTextNode(x.value);c&&uh.shouldBuildText(S)&&p.push(P),R.append(P)}}for(const w of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Rd=1e3,GT=9,il=new WeakSet;function _s(h){return{width:h[2]-h[0],height:h[3]-h[1]}}class qT{static create(e){switch(e.data.annotationType){case Tt.LINK:return new xb(e);case Tt.TEXT:return new XT(e);case Tt.WIDGET:switch(e.data.fieldType){case"Tx":return new YT(e);case"Btn":return e.data.radioButton?new Tb(e):e.data.checkBox?new QT(e):new JT(e);case"Ch":return new ZT(e);case"Sig":return new KT(e)}return new ul(e);case Tt.POPUP:return new cv(e);case Tt.FREETEXT:return new Ib(e);case Tt.LINE:return new tP(e);case Tt.SQUARE:return new nP(e);case Tt.CIRCLE:return new iP(e);case Tt.POLYLINE:return new Db(e);case Tt.CARET:return new sP(e);case Tt.INK:return new a0(e);case Tt.POLYGON:return new rP(e);case Tt.HIGHLIGHT:return new Ob(e);case Tt.UNDERLINE:return new aP(e);case Tt.SQUIGGLY:return new oP(e);case Tt.STRIKEOUT:return new lP(e);case Tt.STAMP:return new Fb(e);case Tt.FILEATTACHMENT:return new uP(e);default:return new _t(e)}}}var Do,_u,wu,qh,uv;const c0=class c0{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){T(this,qh);T(this,Do,null);T(this,_u,!1);T(this,wu,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return c0._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;u(this,Do)||b(this,Do,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&k(this,qh,uv).call(this,t),(i=u(this,wu))==null||i.popup.updateEdited(e)}resetEdited(){var e;u(this,Do)&&(k(this,qh,uv).call(this,u(this,Do).rect),(e=u(this,wu))==null||e.popup.resetEdited(),b(this,Do,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof ul||(a.tabIndex=Rd);const{style:l}=a;if(l.zIndex=this.parent.zIndex++,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof cv){const{rotation:E}=t;return!t.hasOwnCanvas&&E!==0&&this.setRotation(E,a),a}const{width:c,height:d}=_s(t.rect);if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const E=t.borderStyle.horizontalCornerRadius,x=t.borderStyle.verticalCornerRadius;if(E>0||x>0){const R=`calc(${E}px * var(--scale-factor)) / calc(${x}px * var(--scale-factor))`;l.borderRadius=R}else if(this instanceof Tb){const R=`calc(${c}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;l.borderRadius=R}switch(t.borderStyle.style){case Oc.SOLID:l.borderStyle="solid";break;case Oc.DASHED:l.borderStyle="dashed";break;case Oc.BEVELED:Ie("Unimplemented border style: beveled");break;case Oc.INSET:Ie("Unimplemented border style: inset");break;case Oc.UNDERLINE:l.borderBottomStyle="solid";break}const S=t.borderColor||null;S?(b(this,_u,!0),l.borderColor=_e.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):l.borderWidth=0}const p=_e.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:g,pageHeight:y,pageX:v,pageY:w}=s.rawDims;l.left=`${100*(p[0]-v)/g}%`,l.top=`${100*(p[1]-w)/y}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(l.width=`${100*c/g}%`,l.height=`${100*d/y}%`):this.setRotation(A,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:a,height:l}=_s(this.data.rect);let c,d;e%180===0?(c=100*a/i,d=100*l/s):(c=100*l/i,d=100*a/s),t.style.width=`${c}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const a=s.detail[t],l=a[0],c=a.slice(1);s.target.style[i]=EA[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[i]:EA[`${l}_rgb`](c)})};return Ne(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail)){const a=e[s]||i[s];a==null||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,a]of Object.entries(t)){const l=i[s];if(l){const c={detail:{[s]:a},target:e};l(c),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,a]=this.data.rect.map(E=>Math.fround(E));if(e.length===8){const[E,x,S,R]=e.subarray(2,6);if(s===E&&a===x&&t===S&&i===R)return}const{style:l}=this.container;let c;if(u(this,_u)){const{borderColor:E,borderWidth:x}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const d=s-t,p=a-i,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const v=g.createElement("defs");y.append(v);const w=g.createElement("clipPath"),A=`clippath_${this.data.id}`;w.setAttribute("id",A),w.setAttribute("clipPathUnits","objectBoundingBox"),v.append(w);for(let E=2,x=e.length;E<x;E+=8){const S=e[E],R=e[E+1],P=e[E+2],M=e[E+3],N=g.createElement("rect"),F=(P-t)/d,H=(a-R)/p,V=(S-P)/d,B=(R-M)/p;N.setAttribute("x",F),N.setAttribute("y",H),N.setAttribute("width",V),N.setAttribute("height",B),w.append(N),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${H}" width="${V}" height="${B}"/>`)}u(this,_u)&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(y),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{data:e}=this,t=b(this,wu,new cv({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){tt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:a,id:l,exportValues:c}of s){if(a===-1||l===t)continue;const d=typeof c=="string"?c:null,p=document.querySelector(`[data-element-id="${l}"]`);if(p&&!il.has(p)){Ie(`_getElementsByName - element not allowed: ${l}`);continue}i.push({id:l,exportValue:d,domElement:p})}return i}for(const s of document.getElementsByName(e)){const{exportValue:a}=s,l=s.getAttribute("data-element-id");l!==t&&il.has(s)&&i.push({id:l,exportValue:a,domElement:s})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Do=new WeakMap,_u=new WeakMap,wu=new WeakMap,qh=new WeakSet,uv=function(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:d}}}}=this;i==null||i.splice(0,4,...e);const{width:p,height:g}=_s(e);t.left=`${100*(e[0]-c)/a}%`,t.top=`${100*(l-e[3]+d)/l}%`,s===0?(t.width=`${100*p/a}%`,t.height=`${100*g/l}%`):this.setRotation(s)};let _t=c0;var ii,Ja,Cb,kb;class xb extends _t{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});T(this,ii);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action),a=!0):t.attachment?(k(this,ii,Cb).call(this,s,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(k(this,ii,kb).call(this,s,t.setOCGState),a=!0):t.dest?(this._bindLink(s,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&k(this,ii,Ja).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),k(this,ii,Ja).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(i.actions)){const l=s.get(a);l&&(t[l]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:a}}),!1})}t.onclick||(t.onclick=()=>!1),k(this,ii,Ja).call(this)}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),k(this,ii,Ja).call(this),!this._fieldObjects){Ie('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var y;s==null||s();const{fields:a,refs:l,include:c}=i,d=[];if(a.length!==0||l.length!==0){const v=new Set(l);for(const w of a){const A=this._fieldObjects[w]||[];for(const{id:E}of A)v.add(E)}for(const w of Object.values(this._fieldObjects))for(const A of w)v.has(A.id)===c&&d.push(A)}else for(const v of Object.values(this._fieldObjects))d.push(...v);const p=this.annotationStorage,g=[];for(const v of d){const{id:w}=v;switch(g.push(w),v.type){case"text":{const E=v.defaultValue||"";p.setValue(w,{value:E});break}case"checkbox":case"radiobutton":{const E=v.defaultValue===v.exportValues;p.setValue(w,{value:E});break}case"combobox":case"listbox":{const E=v.defaultValue||"";p.setValue(w,{value:E});break}default:continue}const A=document.querySelector(`[data-element-id="${w}"]`);if(A){if(!il.has(A)){Ie(`_bindResetFormAction - element not allowed: ${w}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}ii=new WeakSet,Ja=function(){this.container.setAttribute("data-internal-link","")},Cb=function(t,i,s=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(i.content,i.filename,s),!1},k(this,ii,Ja).call(this)},kb=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),k(this,ii,Ja).call(this)};class XT extends _t{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class ul extends _t{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return An.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,a){i.includes("mouse")?e.addEventListener(i,l=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(i,l=>{var c;if(i==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}a&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l)}}))})}_setEventListeners(e,t,i,s){var a,l,c;for(const[d,p]of i)(p==="Action"||(a=this.data.actions)!=null&&a[p])&&((p==="Focus"||p==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,p,s),p==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(e,t,"blur","Blur",null):p==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":_e.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||GT,a=e.style;let l;const c=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c),g=Math.round(p/(py*s))||1,y=p/g;l=Math.min(s,d(y/py))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(s,d(p/py))}a.fontSize=`calc(${l}px * var(--scale-factor))`,a.color=_e.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class YT extends ul{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const a=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=i),a.setValue(l.id,{[s]:i})}render(){var s,a;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const l=e.getValue(t,{value:this.data.fieldValue});let c=l.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&c.length>d&&(c=c.slice(0,d));let p=l.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:c,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=p??c,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",p??c),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),il.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Rd,this._setRequired(i,this.data.required),d&&(i.maxLength=d),i.addEventListener("input",v=>{e.setValue(t,{value:v.target.value}),this.setPropertyOnSiblings(i,"value",v.target.value,"value"),g.formattedValue=null}),i.addEventListener("resetform",v=>{const w=this.data.defaultFieldValue??"";i.value=g.userValue=w,g.formattedValue=null});let y=v=>{const{formattedValue:w}=g;w!=null&&(v.target.value=w),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",w=>{var E;if(g.focused)return;const{target:A}=w;g.userValue&&(A.value=g.userValue),g.lastCommittedValue=A.value,g.commitKey=1,(E=this.data.actions)!=null&&E.Focus||(g.focused=!0)}),i.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const A={value(E){g.userValue=E.detail.value??"",e.setValue(t,{value:g.userValue.toString()}),E.target.value=g.userValue},formattedValue(E){const{formattedValue:x}=E.detail;g.formattedValue=x,x!=null&&E.target!==document.activeElement&&(E.target.value=x),e.setValue(t,{formattedValue:x})},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{var P;const{charLimit:x}=E.detail,{target:S}=E;if(x===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",x);let R=g.userValue;!R||R.length<=x||(R=R.slice(0,x),S.value=g.userValue=R,e.setValue(t,{value:R}),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(A,w)}),i.addEventListener("keydown",w=>{var x;g.commitKey=1;let A=-1;if(w.key==="Escape"?A=0:w.key==="Enter"&&!this.data.multiLine?A=2:w.key==="Tab"&&(g.commitKey=3),A===-1)return;const{value:E}=w.target;g.lastCommittedValue!==E&&(g.lastCommittedValue=E,g.userValue=E,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:A,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const v=y;y=null,i.addEventListener("blur",w=>{var E,x;if(!g.focused||!w.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(g.focused=!1);const{value:A}=w.target;g.userValue=A,g.lastCommittedValue!==A&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:g.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),v(w)}),(a=this.data.actions)!=null&&a.Keystroke&&i.addEventListener("beforeinput",w=>{var N;g.lastCommittedValue=null;const{data:A,target:E}=w,{value:x,selectionStart:S,selectionEnd:R}=E;let P=S,M=R;switch(w.inputType){case"deleteWordBackward":{const F=x.substring(0,S).match(/\w*[^\w]*$/);F&&(P-=F[0].length);break}case"deleteWordForward":{const F=x.substring(S).match(/^[^\w]*\w*/);F&&(M+=F[0].length);break}case"deleteContentBackward":S===R&&(P-=1);break;case"deleteContentForward":S===R&&(M+=1);break}w.preventDefault(),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:A||"",willCommit:!1,selStart:P,selEnd:M}})}),this._setEventListeners(i,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/d;i.classList.add("comb"),i.style.letterSpacing=`calc(${w}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class KT extends ul{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class QT extends ul{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return il.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=Rd,a.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const p of this._getElementsByName(c,i)){const g=d&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}e.setValue(i,{value:d})}),a.addEventListener("resetform",l=>{const c=t.defaultFieldValue||"Off";l.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const c={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Tb extends ul{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const l of this._getElementsByName(t.fieldName,i))e.setValue(l.id,{value:!1});const a=document.createElement("input");if(il.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=Rd,a.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const p of this._getElementsByName(c,i))e.setValue(p.id,{value:!1});e.setValue(i,{value:d})}),a.addEventListener("resetform",l=>{const c=t.defaultFieldValue;l.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;a.addEventListener("updatefromsandbox",c=>{const d={value:p=>{const g=l===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const v=g&&y.id===i;y.domElement&&(y.domElement.checked=v),e.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class JT extends xb{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class ZT extends ul{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");il.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Rd;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,i.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),a=!1),s.append(y)}let l=null;if(a){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),s.prepend(g),l=()=>{g.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const c=g=>{const y=g?"value":"textContent",{options:v,multiple:w}=s;return w?Array.prototype.filter.call(v,A=>A.selected).map(A=>A[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let d=c(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",g=>{const y={value(v){l==null||l();const w=v.detail.value,A=new Set(Array.isArray(w)?w:[w]);for(const E of s.options)E.selected=A.has(E.value);e.setValue(t,{value:c(!0)}),d=c(!1)},multipleSelection(v){s.multiple=!0},remove(v){const w=s.options,A=v.detail.remove;w[A].selected=!1,s.remove(A),w.length>0&&Array.prototype.findIndex.call(w,x=>x.selected)===-1&&(w[0].selected=!0),e.setValue(t,{value:c(!0),items:p(v)}),d=c(!1)},clear(v){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),d=c(!1)},insert(v){const{index:w,displayValue:A,exportValue:E}=v.detail.insert,x=s.children[w],S=document.createElement("option");S.textContent=A,S.value=E,x?x.before(S):s.append(S),e.setValue(t,{value:c(!0),items:p(v)}),d=c(!1)},items(v){const{items:w}=v.detail;for(;s.length!==0;)s.remove(0);for(const A of w){const{displayValue:E,exportValue:x}=A,S=document.createElement("option");S.textContent=E,S.value=x,s.append(S)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:c(!0),items:p(v)}),d=c(!1)},indices(v){const w=new Set(v.detail.indices);for(const A of v.target.options)A.selected=w.has(A.index);e.setValue(t,{value:c(!0)}),d=c(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,g)}),s.addEventListener("input",g=>{var w;const y=c(!0),v=c(!1);e.setValue(t,{value:y}),g.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):s.addEventListener("input",function(g){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class cv extends _t{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:_t._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new eP({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${Yv}${i}`).join(",")),this.container}}var Au,cg,hg,Eu,Oo,ft,is,bu,Xh,Yh,Su,rs,Wi,ss,Kh,as,Qh,Fo,No,Ye,Tp,hv,Pb,Rb,Lb,Mb,Pp,Rp,dv;class eP{constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:a,contentsObj:l,richText:c,parent:d,rect:p,parentRect:g,open:y}){T(this,Ye);T(this,Au,k(this,Ye,Lb).bind(this));T(this,cg,k(this,Ye,dv).bind(this));T(this,hg,k(this,Ye,Rp).bind(this));T(this,Eu,k(this,Ye,Pp).bind(this));T(this,Oo,null);T(this,ft,null);T(this,is,null);T(this,bu,null);T(this,Xh,null);T(this,Yh,null);T(this,Su,null);T(this,rs,!1);T(this,Wi,null);T(this,ss,null);T(this,Kh,null);T(this,as,null);T(this,Qh,null);T(this,Fo,null);T(this,No,!1);var v;b(this,ft,e),b(this,Qh,s),b(this,is,l),b(this,as,c),b(this,Yh,d),b(this,Oo,t),b(this,Kh,p),b(this,Su,g),b(this,Xh,i),b(this,bu,Jv.toDateObject(a)),this.trigger=i.flatMap(w=>w.getElementsToTriggerPopup());for(const w of this.trigger)w.addEventListener("click",u(this,Eu)),w.addEventListener("mouseenter",u(this,hg)),w.addEventListener("mouseleave",u(this,cg)),w.classList.add("popupTriggerArea");for(const w of i)(v=w.container)==null||v.addEventListener("keydown",u(this,Au));u(this,ft).hidden=!0,y&&k(this,Ye,Pp).call(this)}render(){if(u(this,Wi))return;const e=b(this,Wi,document.createElement("div"));if(e.className="popup",u(this,Oo)){const a=e.style.outlineColor=_e.makeHexColor(...u(this,Oo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:e.style.backgroundColor=_e.makeHexColor(...u(this,Oo).map(c=>Math.floor(.7*(255-c)+c)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=u(this,Qh),e.append(t),u(this,bu)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,bu).valueOf()})),t.append(a)}const s=u(this,Ye,Tp);if(s)Sb.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(u(this,is));e.append(a)}u(this,ft).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let a=0,l=s.length;a<l;++a){const c=s[a];i.append(document.createTextNode(c)),a<l-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;u(this,Fo)||b(this,Fo,{contentsObj:u(this,is),richText:u(this,as)}),e&&b(this,ss,null),t&&(b(this,as,k(this,Ye,Rb).call(this,t)),b(this,is,null)),(i=u(this,Wi))==null||i.remove(),b(this,Wi,null)}resetEdited(){var e;u(this,Fo)&&({contentsObj:yn(this,is)._,richText:yn(this,as)._}=u(this,Fo),b(this,Fo,null),(e=u(this,Wi))==null||e.remove(),b(this,Wi,null),b(this,ss,null))}forceHide(){b(this,No,this.isVisible),u(this,No)&&(u(this,ft).hidden=!0)}maybeShow(){u(this,No)&&(u(this,Wi)||k(this,Ye,Rp).call(this),b(this,No,!1),u(this,ft).hidden=!1)}get isVisible(){return u(this,ft).hidden===!1}}Au=new WeakMap,cg=new WeakMap,hg=new WeakMap,Eu=new WeakMap,Oo=new WeakMap,ft=new WeakMap,is=new WeakMap,bu=new WeakMap,Xh=new WeakMap,Yh=new WeakMap,Su=new WeakMap,rs=new WeakMap,Wi=new WeakMap,ss=new WeakMap,Kh=new WeakMap,as=new WeakMap,Qh=new WeakMap,Fo=new WeakMap,No=new WeakMap,Ye=new WeakSet,Tp=function(){const e=u(this,as),t=u(this,is);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,as).html||null},hv=function(){var e,t,i;return((i=(t=(e=u(this,Ye,Tp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},Pb=function(){var e,t,i;return((i=(t=(e=u(this,Ye,Tp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},Rb=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:u(this,Ye,Pb),fontSize:u(this,Ye,hv)?`calc(${u(this,Ye,hv)}px * var(--scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:s});return i},Lb=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,rs))&&k(this,Ye,Pp).call(this)},Mb=function(){if(u(this,ss)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:a}}}=u(this,Yh);let l=!!u(this,Su),c=l?u(this,Su):u(this,Kh);for(const A of u(this,Xh))if(!c||_e.intersect(A.data.rect,c)!==null){c=A.data.rect,l=!0;break}const d=_e.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),g=l?c[2]-c[0]+5:0,y=d[0]+g,v=d[1];b(this,ss,[100*(y-s)/t,100*(v-a)/i]);const{style:w}=u(this,ft);w.left=`${u(this,ss)[0]}%`,w.top=`${u(this,ss)[1]}%`},Pp=function(){b(this,rs,!u(this,rs)),u(this,rs)?(k(this,Ye,Rp).call(this),u(this,ft).addEventListener("click",u(this,Eu)),u(this,ft).addEventListener("keydown",u(this,Au))):(k(this,Ye,dv).call(this),u(this,ft).removeEventListener("click",u(this,Eu)),u(this,ft).removeEventListener("keydown",u(this,Au)))},Rp=function(){u(this,Wi)||this.render(),this.isVisible?u(this,rs)&&u(this,ft).classList.add("focused"):(k(this,Ye,Mb).call(this),u(this,ft).hidden=!1,u(this,ft).style.zIndex=parseInt(u(this,ft).style.zIndex)+1e3)},dv=function(){u(this,ft).classList.remove("focused"),!(u(this,rs)||!this.isVisible)&&(u(this,ft).hidden=!0,u(this,ft).style.zIndex=parseInt(u(this,ft).style.zIndex)-1e3)};class Ib extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Le.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Jh;class tP extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Jh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:s}=_s(t.rect),a=this.svgFactory.create(i,s,!0),l=b(this,Jh,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Jh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jh=new WeakMap;var Zh;class nP extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Zh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:s}=_s(t.rect),a=this.svgFactory.create(i,s,!0),l=t.borderStyle.width,c=b(this,Zh,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",i-l),c.setAttribute("height",s-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Zh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zh=new WeakMap;var ed;class iP extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,ed,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:s}=_s(t.rect),a=this.svgFactory.create(i,s,!0),l=t.borderStyle.width,c=b(this,ed,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",i/2),c.setAttribute("cy",s/2),c.setAttribute("rx",i/2-l/2),c.setAttribute("ry",s/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,ed)}addHighlightArea(){this.container.classList.add("highlightArea")}}ed=new WeakMap;var td;class Db extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,td,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:a}}=this;if(!i)return this.container;const{width:l,height:c}=_s(t),d=this.svgFactory.create(l,c,!0);let p=[];for(let y=0,v=i.length;y<v;y+=2){const w=i[y]-t[0],A=t[3]-i[y+1];p.push(`${w},${A}`)}p=p.join(" ");const g=b(this,td,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",p),g.setAttribute("stroke-width",s.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,td)}addHighlightArea(){this.container.classList.add("highlightArea")}}td=new WeakMap;class rP extends Db{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sP extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var nd;class a0 extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,nd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Le.HIGHLIGHT:Le.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:s,popupRef:a}}=this,{width:l,height:c}=_s(t),d=this.svgFactory.create(l,c,!0);for(const p of i){let g=[];for(let v=0,w=p.length;v<w;v+=2){const A=p[v]-t[0],E=t[3]-p[v+1];g.push(`${A},${E}`)}g=g.join(" ");const y=this.svgFactory.createElement(this.svgElementName);u(this,nd).push(y),y.setAttribute("points",g),y.setAttribute("stroke-width",s.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),d.append(y)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return u(this,nd)}addHighlightArea(){this.container.classList.add("highlightArea")}}nd=new WeakMap;class Ob extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Le.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class aP extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class oP extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class lP extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Fb extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Le.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var id,rd,fv;class uP extends _t{constructor(t){var s;super(t,{isRenderable:!0});T(this,rd);T(this,id,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",k(this,rd,fv).bind(this)),b(this,id,s);const{isMac:a}=An.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&k(this,rd,fv).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return u(this,id)}addHighlightArea(){this.container.classList.add("highlightArea")}}id=new WeakMap,rd=new WeakSet,fv=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var sd,jo,Ho,ad,rl,Nb,pv,aE;let cP=(aE=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:a,viewport:l,structTreeLayer:c}){T(this,rl);T(this,sd,null);T(this,jo,null);T(this,Ho,new Map);T(this,ad,null);this.div=e,b(this,sd,t),b(this,jo,i),b(this,ad,c||null),this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return u(this,Ho).size>0}async render(e){var l;const{annotations:t}=e,i=this.div;tl(i,this.viewport);const s=new Map,a={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new s0,annotationStorage:e.annotationStorage||new e0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const d=c.annotationType===Tt.POPUP;if(d){const y=s.get(c.id);if(!y)continue;a.elements=y}else{const{width:y,height:v}=_s(c.rect);if(y<=0||v<=0)continue}a.data=c;const p=qT.create(a);if(!p.isRenderable)continue;if(!d&&c.popupRef){const y=s.get(c.popupRef);y?y.push(p):s.set(c.popupRef,[p])}const g=p.render();c.hidden&&(g.style.visibility="hidden"),await k(this,rl,Nb).call(this,g,c.id),p._isEditable&&(u(this,Ho).set(p.data.id,p),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(p))}k(this,rl,pv).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,tl(t,{rotation:e.rotation}),k(this,rl,pv).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,Ho).values())}getEditableAnnotation(e){return u(this,Ho).get(e)}},sd=new WeakMap,jo=new WeakMap,Ho=new WeakMap,ad=new WeakMap,rl=new WeakSet,Nb=async function(e,t){var l,c;const i=e.firstChild||e,s=i.id=`${Yv}${t}`,a=await((l=u(this,ad))==null?void 0:l.getAriaAttributes(s));if(a)for(const[d,p]of a)i.setAttribute(d,p);this.div.append(e),(c=u(this,sd))==null||c.moveElementInDOM(this.div,e,i,!1)},pv=function(){if(!u(this,jo))return;const e=this.div;for(const[t,i]of u(this,jo)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):s.append(i)}u(this,jo).clear()},aE);const Qf=/\r\n?|\n/g;var Vi,Kn,od,zo,Qn,St,jb,Hb,zb,Lp,As,Mp,Ip,Bb,mv,Ub;const Qe=class Qe extends Ge{constructor(t){super({...t,name:"freeTextEditor"});T(this,St);T(this,Vi);T(this,Kn,"");T(this,od,`${this.id}-editor`);T(this,zo,null);T(this,Qn);b(this,Vi,t.color||Qe._defaultColor||Ge._defaultLineColor),b(this,Qn,t.fontSize||Qe._defaultFontSize)}static get _keyboardManager(){const t=Qe.prototype,i=l=>l.isEmpty(),s=nl.TRANSLATE_SMALL,a=nl.TRANSLATE_BIG;return Ne(this,"_keyboardManager",new Pd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:i}]]))}static initialize(t,i){Ge.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case ke.FREETEXT_SIZE:Qe._defaultFontSize=i;break;case ke.FREETEXT_COLOR:Qe._defaultColor=i;break}}updateParams(t,i){switch(t){case ke.FREETEXT_SIZE:k(this,St,jb).call(this,i);break;case ke.FREETEXT_COLOR:k(this,St,Hb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ke.FREETEXT_SIZE,Qe._defaultFontSize],[ke.FREETEXT_COLOR,Qe._defaultColor||Ge._defaultLineColor]]}get propertiesToUpdate(){return[[ke.FREETEXT_SIZE,u(this,Qn)],[ke.FREETEXT_COLOR,u(this,Vi)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Qe._internalPadding*t,-(Qe._internalPadding+u(this,Qn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Le.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,zo,new AbortController);const t=this._uiManager.combinedSignal(u(this,zo));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,od)),this._isDraggable=!0,(t=u(this,zo))==null||t.abort(),b(this,zo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Kn),i=b(this,Kn,k(this,St,zb).call(this).trimEnd());if(t===i)return;const s=a=>{if(b(this,Kn,a),!a){this.remove();return}k(this,St,Ip).call(this),this._uiManager.rebuild(this),k(this,St,Lp).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),k(this,St,Lp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Qe._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,od)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${u(this,Qn)}px * var(--scale-factor))`,s.color=u(this,Vi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Gp(this,this.div,["dblclick","keydown"]),this.width){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[d,p]=this.getInitialTranslation();[d,p]=this.pageTranslationToScreen(d,p);const[g,y]=this.pageDimensions,[v,w]=this.pageTranslation;let A,E;switch(this.rotation){case 0:A=t+(c[0]-v)/g,E=i+this.height-(c[1]-w)/y;break;case 90:A=t+(c[0]-v)/g,E=i-(c[1]-w)/y,[d,p]=[p,-d];break;case 180:A=t-this.width+(c[0]-v)/g,E=i-(c[1]-w)/y,[d,p]=[-d,-p];break;case 270:A=t+(c[0]-v-this.height*y)/g,E=i+(c[1]-w-this.width*g)/y,[d,p]=[-p,d];break}this.setAt(A*a,E*l,d,p)}else this.setAt(t*a,i*l,this.width*a,this.height*l);k(this,St,Ip).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var A,E,x;const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=k(A=Qe,As,mv).call(A,i.getData("text")||"").replaceAll(Qf,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:d,startOffset:p}=c,g=[],y=[];if(d.nodeType===Node.TEXT_NODE){const S=d.parentElement;if(y.push(d.nodeValue.slice(p).replaceAll(Qf,"")),S!==this.editorDiv){let R=g;for(const P of this.editorDiv.childNodes){if(P===S){R=y;continue}R.push(k(E=Qe,As,Mp).call(E,P))}}g.push(d.nodeValue.slice(0,p).replaceAll(Qf,""))}else if(d===this.editorDiv){let S=g,R=0;for(const P of this.editorDiv.childNodes)R++===p&&(S=y),S.push(k(x=Qe,As,Mp).call(x,P))}b(this,Kn,`${g.join(`
`)}${a}${y.join(`
`)}`),k(this,St,Ip).call(this);const v=new Range;let w=g.reduce((S,R)=>S+R.length,0);for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const R=S.nodeValue.length;if(w<=R){v.setStart(S,w),v.setEnd(S,w);break}w-=R}l.removeAllRanges(),l.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,s){var c;let a=null;if(t instanceof Ib){const{data:{defaultAppearanceData:{fontSize:d,fontColor:p},rect:g,rotation:y,id:v,popupRef:w},textContent:A,textPosition:E,parent:{page:{pageNumber:x}}}=t;if(!A||A.length===0)return null;a=t={annotationType:Le.FREETEXT,color:Array.from(p),fontSize:d,value:A.join(`
`),position:E,pageIndex:x-1,rect:g.slice(0),rotation:y,id:v,deleted:!1,popupRef:w}}const l=await super.deserialize(t,i,s);return b(l,Qn,t.fontSize),b(l,Vi,_e.makeHexColor(...t.color)),b(l,Kn,k(c=Qe,As,mv).call(c,t.value)),l.annotationElementId=t.id||null,l._initialData=a,l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Qe._internalPadding*this.parentScale,s=this.getRect(i,i),a=Ge._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,Vi)),l={annotationType:Le.FREETEXT,color:a,fontSize:u(this,Qn),value:k(this,St,Bb).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?l:this.annotationElementId&&!k(this,St,Ub).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${u(this,Qn)}px * var(--scale-factor))`,s.color=u(this,Vi),i.replaceChildren();for(const l of u(this,Kn).split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),i.append(c)}const a=Qe._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:u(this,Kn)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Vi=new WeakMap,Kn=new WeakMap,od=new WeakMap,zo=new WeakMap,Qn=new WeakMap,St=new WeakSet,jb=function(t){const i=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-u(this,Qn))*this.parentScale),b(this,Qn,a),k(this,St,Lp).call(this)},s=u(this,Qn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Hb=function(t){const i=a=>{b(this,Vi,this.editorDiv.style.color=a)},s=u(this,Vi);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},zb=function(){var s;const t=[];this.editorDiv.normalize();let i=null;for(const a of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push(k(s=Qe,As,Mp).call(s,a)),i=a);return t.join(`
`)},Lp=function(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,c=l.style.display,d=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()},As=new WeakSet,Mp=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Qf,"")},Ip=function(){if(this.editorDiv.replaceChildren(),!!u(this,Kn))for(const t of u(this,Kn).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},Bb=function(){return u(this,Kn).replaceAll(""," ")},mv=function(t){return t.replaceAll(" ","")},Ub=function(t){const{value:i,fontSize:s,color:a,pageIndex:l}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((c,d)=>c!==a[d])||t.pageIndex!==l},T(Qe,As),Ce(Qe,"_freeTextDefaultContent",""),Ce(Qe,"_internalPadding",0),Ce(Qe,"_defaultColor",null),Ce(Qe,"_defaultFontSize",10),Ce(Qe,"_type","freetext"),Ce(Qe,"_editorType",Le.FREETEXT);let gv=Qe,$b=class{toSVGPath(){tt("Abstract method `toSVGPath` must be implemented.")}get box(){tt("Abstract getter `box` must be implemented.")}serialize(e,t){tt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){tt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){tt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}};var Jn,Gi,xu,Cu,wr,Oe,Bo,Uo,ld,ud,ku,Tu,_a,cd,dg,fg,It,Jc,Wb,Vb,Gb,qb,Xb,Yb;const Gr=class Gr{constructor({x:e,y:t},i,s,a,l,c=0){T(this,It);T(this,Jn);T(this,Gi,[]);T(this,xu);T(this,Cu);T(this,wr,[]);T(this,Oe,new Float64Array(18));T(this,Bo);T(this,Uo);T(this,ld);T(this,ud);T(this,ku);T(this,Tu);T(this,_a,[]);b(this,Jn,i),b(this,Tu,a*s),b(this,Cu,l),u(this,Oe).set([NaN,NaN,NaN,NaN,e,t],6),b(this,xu,c),b(this,ud,u(Gr,cd)*s),b(this,ld,u(Gr,fg)*s),b(this,ku,s),u(this,_a).push(e,t)}isEmpty(){return isNaN(u(this,Oe)[8])}add({x:e,y:t}){var B;b(this,Bo,e),b(this,Uo,t);const[i,s,a,l]=u(this,Jn);let[c,d,p,g]=u(this,Oe).subarray(8,12);const y=e-p,v=t-g,w=Math.hypot(y,v);if(w<u(this,ld))return!1;const A=w-u(this,ud),E=A/w,x=E*y,S=E*v;let R=c,P=d;c=p,d=g,p+=x,g+=S,(B=u(this,_a))==null||B.push(e,t);const M=-S/A,N=x/A,F=M*u(this,Tu),H=N*u(this,Tu);return u(this,Oe).set(u(this,Oe).subarray(2,8),0),u(this,Oe).set([p+F,g+H],4),u(this,Oe).set(u(this,Oe).subarray(14,18),12),u(this,Oe).set([p-F,g-H],16),isNaN(u(this,Oe)[6])?(u(this,wr).length===0&&(u(this,Oe).set([c+F,d+H],2),u(this,wr).push(NaN,NaN,NaN,NaN,(c+F-i)/a,(d+H-s)/l),u(this,Oe).set([c-F,d-H],14),u(this,Gi).push(NaN,NaN,NaN,NaN,(c-F-i)/a,(d-H-s)/l)),u(this,Oe).set([R,P,c,d,p,g],6),!this.isEmpty()):(u(this,Oe).set([R,P,c,d,p,g],6),Math.abs(Math.atan2(P-d,R-c)-Math.atan2(S,x))<Math.PI/2?([c,d,p,g]=u(this,Oe).subarray(2,6),u(this,wr).push(NaN,NaN,NaN,NaN,((c+p)/2-i)/a,((d+g)/2-s)/l),[c,d,R,P]=u(this,Oe).subarray(14,18),u(this,Gi).push(NaN,NaN,NaN,NaN,((R+c)/2-i)/a,((P+d)/2-s)/l),!0):([R,P,c,d,p,g]=u(this,Oe).subarray(0,6),u(this,wr).push(((R+5*c)/6-i)/a,((P+5*d)/6-s)/l,((5*c+p)/6-i)/a,((5*d+g)/6-s)/l,((c+p)/2-i)/a,((d+g)/2-s)/l),[p,g,c,d,R,P]=u(this,Oe).subarray(12,18),u(this,Gi).push(((R+5*c)/6-i)/a,((P+5*d)/6-s)/l,((5*c+p)/6-i)/a,((5*d+g)/6-s)/l,((c+p)/2-i)/a,((d+g)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,wr),t=u(this,Gi);if(isNaN(u(this,Oe)[6])&&!this.isEmpty())return k(this,It,Wb).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);k(this,It,Gb).call(this,i);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return k(this,It,Vb).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,s,a,l){return new Kb(e,t,i,s,a,l)}getOutlines(){var y;const e=u(this,wr),t=u(this,Gi),i=u(this,Oe),[s,a,l,c]=u(this,Jn),d=new Float64Array((((y=u(this,_a))==null?void 0:y.length)??0)+2);for(let v=0,w=d.length-2;v<w;v+=2)d[v]=(u(this,_a)[v]-s)/l,d[v+1]=(u(this,_a)[v+1]-a)/c;if(d[d.length-2]=(u(this,Bo)-s)/l,d[d.length-1]=(u(this,Uo)-a)/c,isNaN(i[6])&&!this.isEmpty())return k(this,It,qb).call(this,d);const p=new Float64Array(u(this,wr).length+24+u(this,Gi).length);let g=e.length;for(let v=0;v<g;v+=2){if(isNaN(e[v])){p[v]=p[v+1]=NaN;continue}p[v]=e[v],p[v+1]=e[v+1]}g=k(this,It,Yb).call(this,p,g);for(let v=t.length-6;v>=6;v-=6)for(let w=0;w<6;w+=2){if(isNaN(t[v+w])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=t[v+w],p[g+1]=t[v+w+1],g+=2}return k(this,It,Xb).call(this,p,g),this.newFreeDrawOutline(p,d,u(this,Jn),u(this,ku),u(this,xu),u(this,Cu))}};Jn=new WeakMap,Gi=new WeakMap,xu=new WeakMap,Cu=new WeakMap,wr=new WeakMap,Oe=new WeakMap,Bo=new WeakMap,Uo=new WeakMap,ld=new WeakMap,ud=new WeakMap,ku=new WeakMap,Tu=new WeakMap,_a=new WeakMap,cd=new WeakMap,dg=new WeakMap,fg=new WeakMap,It=new WeakSet,Jc=function(){const e=u(this,Oe).subarray(4,6),t=u(this,Oe).subarray(16,18),[i,s,a,l]=u(this,Jn);return[(u(this,Bo)+(e[0]-t[0])/2-i)/a,(u(this,Uo)+(e[1]-t[1])/2-s)/l,(u(this,Bo)+(t[0]-e[0])/2-i)/a,(u(this,Uo)+(t[1]-e[1])/2-s)/l]},Wb=function(){const[e,t,i,s]=u(this,Jn),[a,l,c,d]=k(this,It,Jc).call(this);return`M${(u(this,Oe)[2]-e)/i} ${(u(this,Oe)[3]-t)/s} L${(u(this,Oe)[4]-e)/i} ${(u(this,Oe)[5]-t)/s} L${a} ${l} L${c} ${d} L${(u(this,Oe)[16]-e)/i} ${(u(this,Oe)[17]-t)/s} L${(u(this,Oe)[14]-e)/i} ${(u(this,Oe)[15]-t)/s} Z`},Vb=function(e){const t=u(this,Gi);e.push(`L${t[4]} ${t[5]} Z`)},Gb=function(e){const[t,i,s,a]=u(this,Jn),l=u(this,Oe).subarray(4,6),c=u(this,Oe).subarray(16,18),[d,p,g,y]=k(this,It,Jc).call(this);e.push(`L${(l[0]-t)/s} ${(l[1]-i)/a} L${d} ${p} L${g} ${y} L${(c[0]-t)/s} ${(c[1]-i)/a}`)},qb=function(e){const t=u(this,Oe),[i,s,a,l]=u(this,Jn),[c,d,p,g]=k(this,It,Jc).call(this),y=new Float64Array(36);return y.set([NaN,NaN,NaN,NaN,(t[2]-i)/a,(t[3]-s)/l,NaN,NaN,NaN,NaN,(t[4]-i)/a,(t[5]-s)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(t[16]-i)/a,(t[17]-s)/l,NaN,NaN,NaN,NaN,(t[14]-i)/a,(t[15]-s)/l],0),this.newFreeDrawOutline(y,e,u(this,Jn),u(this,ku),u(this,xu),u(this,Cu))},Xb=function(e,t){const i=u(this,Gi);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},Yb=function(e,t){const i=u(this,Oe).subarray(4,6),s=u(this,Oe).subarray(16,18),[a,l,c,d]=u(this,Jn),[p,g,y,v]=k(this,It,Jc).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-l)/d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(s[0]-a)/c,(s[1]-l)/d],t),t+=24},T(Gr,cd,8),T(Gr,dg,2),T(Gr,fg,u(Gr,cd)+u(Gr,dg));let Xp=Gr;var Pu,$o,os,hd,Zn,dd,vt,Nn,Zc,eh,Qb;class Kb extends $b{constructor(t,i,s,a,l,c){super();T(this,Nn);T(this,Pu);T(this,$o,null);T(this,os);T(this,hd);T(this,Zn);T(this,dd);T(this,vt);b(this,vt,t),b(this,Zn,i),b(this,Pu,s),b(this,dd,a),b(this,os,l),b(this,hd,c),k(this,Nn,Qb).call(this,c);const{x:d,y:p,width:g,height:y}=u(this,$o);for(let v=0,w=t.length;v<w;v+=2)t[v]=(t[v]-d)/g,t[v+1]=(t[v+1]-p)/y;for(let v=0,w=i.length;v<w;v+=2)i[v]=(i[v]-d)/g,i[v+1]=(i[v+1]-p)/y}toSVGPath(){const t=[`M${u(this,vt)[4]} ${u(this,vt)[5]}`];for(let i=6,s=u(this,vt).length;i<s;i+=6){if(isNaN(u(this,vt)[i])){t.push(`L${u(this,vt)[i+4]} ${u(this,vt)[i+5]}`);continue}t.push(`C${u(this,vt)[i]} ${u(this,vt)[i+1]} ${u(this,vt)[i+2]} ${u(this,vt)[i+3]} ${u(this,vt)[i+4]} ${u(this,vt)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,a],l){const c=s-t,d=a-i;let p,g;switch(l){case 0:p=k(this,Nn,Zc).call(this,u(this,vt),t,a,c,-d),g=k(this,Nn,Zc).call(this,u(this,Zn),t,a,c,-d);break;case 90:p=k(this,Nn,eh).call(this,u(this,vt),t,i,c,d),g=k(this,Nn,eh).call(this,u(this,Zn),t,i,c,d);break;case 180:p=k(this,Nn,Zc).call(this,u(this,vt),s,i,-c,d),g=k(this,Nn,Zc).call(this,u(this,Zn),s,i,-c,d);break;case 270:p=k(this,Nn,eh).call(this,u(this,vt),s,a,-c,-d),g=k(this,Nn,eh).call(this,u(this,Zn),s,a,-c,-d);break}return{outline:Array.from(p),points:[Array.from(g)]}}get box(){return u(this,$o)}newOutliner(t,i,s,a,l,c=0){return new Xp(t,i,s,a,l,c)}getNewOutline(t,i){const{x:s,y:a,width:l,height:c}=u(this,$o),[d,p,g,y]=u(this,Pu),v=l*g,w=c*y,A=s*g+d,E=a*y+p,x=this.newOutliner({x:u(this,Zn)[0]*v+A,y:u(this,Zn)[1]*w+E},u(this,Pu),u(this,dd),t,u(this,hd),i??u(this,os));for(let S=2;S<u(this,Zn).length;S+=2)x.add({x:u(this,Zn)[S]*v+A,y:u(this,Zn)[S+1]*w+E});return x.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Pu=new WeakMap,$o=new WeakMap,os=new WeakMap,hd=new WeakMap,Zn=new WeakMap,dd=new WeakMap,vt=new WeakMap,Nn=new WeakSet,Zc=function(t,i,s,a,l){const c=new Float64Array(t.length);for(let d=0,p=t.length;d<p;d+=2)c[d]=i+t[d]*a,c[d+1]=s+t[d+1]*l;return c},eh=function(t,i,s,a,l){const c=new Float64Array(t.length);for(let d=0,p=t.length;d<p;d+=2)c[d]=i+t[d+1]*a,c[d+1]=s+t[d]*l;return c},Qb=function(t){const i=u(this,vt);let s=i[4],a=i[5],l=s,c=a,d=s,p=a,g=s,y=a;const v=t?Math.max:Math.min;for(let S=6,R=i.length;S<R;S+=6){if(isNaN(i[S]))l=Math.min(l,i[S+4]),c=Math.min(c,i[S+5]),d=Math.max(d,i[S+4]),p=Math.max(p,i[S+5]),y<i[S+5]?(g=i[S+4],y=i[S+5]):y===i[S+5]&&(g=v(g,i[S+4]));else{const P=_e.bezierBoundingBox(s,a,...i.slice(S,S+6));l=Math.min(l,P[0]),c=Math.min(c,P[1]),d=Math.max(d,P[2]),p=Math.max(p,P[3]),y<P[3]?(g=P[2],y=P[3]):y===P[3]&&(g=v(g,P[2]))}s=i[S+4],a=i[S+5]}const w=l-u(this,os),A=c-u(this,os),E=d-l+2*u(this,os),x=p-c+2*u(this,os);b(this,$o,{x:w,y:A,width:E,height:x,lastPoint:[g,y]})};var fd,wa,qi,bn,Jb,Dp,Zb,eS,yv;class bA{constructor(e,t=0,i=0,s=!0){T(this,bn);T(this,fd);T(this,wa,[]);T(this,qi,[]);let a=1/0,l=-1/0,c=1/0,d=-1/0;const p=10**-4;for(const{x,y:S,width:R,height:P}of e){const M=Math.floor((x-t)/p)*p,N=Math.ceil((x+R+t)/p)*p,F=Math.floor((S-t)/p)*p,H=Math.ceil((S+P+t)/p)*p,V=[M,F,H,!0],B=[N,F,H,!1];u(this,wa).push(V,B),a=Math.min(a,M),l=Math.max(l,N),c=Math.min(c,F),d=Math.max(d,H)}const g=l-a+2*i,y=d-c+2*i,v=a-i,w=c-i,A=u(this,wa).at(s?-1:-2),E=[A[0],A[2]];for(const x of u(this,wa)){const[S,R,P]=x;x[0]=(S-v)/g,x[1]=(R-w)/y,x[2]=(P-w)/y}b(this,fd,{x:v,y:w,width:g,height:y,lastPoint:E})}getOutlines(){u(this,wa).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of u(this,wa))t[3]?(e.push(...k(this,bn,yv).call(this,t)),k(this,bn,Zb).call(this,t)):(k(this,bn,eS).call(this,t),e.push(...k(this,bn,yv).call(this,t)));return k(this,bn,Jb).call(this,e)}}fd=new WeakMap,wa=new WeakMap,qi=new WeakMap,bn=new WeakSet,Jb=function(e){const t=[],i=new Set;for(const l of e){const[c,d,p]=l;t.push([c,d,l],[c,p,l])}t.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=t.length;l<c;l+=2){const d=t[l][2],p=t[l+1][2];d.push(p),p.push(d),i.add(d),i.add(p)}const s=[];let a;for(;i.size>0;){const l=i.values().next().value;let[c,d,p,g,y]=l;i.delete(l);let v=c,w=d;for(a=[c,p],s.push(a);;){let A;if(i.has(g))A=g;else if(i.has(y))A=y;else break;i.delete(A),[c,d,p,g,y]=A,v!==c&&(a.push(v,w,c,w===d?d:p),v=c),w=w===d?p:d}a.push(v,w)}return new hP(s,u(this,fd))},Dp=function(e){const t=u(this,qi);let i=0,s=t.length-1;for(;i<=s;){const a=i+s>>1,l=t[a][0];if(l===e)return a;l<e?i=a+1:s=a-1}return s+1},Zb=function([,e,t]){const i=k(this,bn,Dp).call(this,e);u(this,qi).splice(i,0,[e,t])},eS=function([,e,t]){const i=k(this,bn,Dp).call(this,e);for(let s=i;s<u(this,qi).length;s++){const[a,l]=u(this,qi)[s];if(a!==e)break;if(a===e&&l===t){u(this,qi).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[a,l]=u(this,qi)[s];if(a!==e)break;if(a===e&&l===t){u(this,qi).splice(s,1);return}}},yv=function(e){const[t,i,s]=e,a=[[t,i,s]],l=k(this,bn,Dp).call(this,s);for(let c=0;c<l;c++){const[d,p]=u(this,qi)[c];for(let g=0,y=a.length;g<y;g++){const[,v,w]=a[g];if(!(p<=v||w<=d)){if(v>=d){if(w>p)a[g][1]=p;else{if(y===1)return[];a.splice(g,1),g--,y--}continue}a[g][2]=d,w>p&&a.push([t,p,w])}}}return a};var pd,Ru;class hP extends $b{constructor(t,i){super();T(this,pd);T(this,Ru);b(this,Ru,t),b(this,pd,i)}toSVGPath(){const t=[];for(const i of u(this,Ru)){let[s,a]=i;t.push(`M${s} ${a}`);for(let l=2;l<i.length;l+=2){const c=i[l],d=i[l+1];c===s?(t.push(`V${d}`),a=d):d===a&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,i,s,a],l){const c=[],d=s-t,p=a-i;for(const g of u(this,Ru)){const y=new Array(g.length);for(let v=0;v<g.length;v+=2)y[v]=t+g[v]*d,y[v+1]=a-g[v+1]*p;c.push(y)}return c}get box(){return u(this,pd)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}pd=new WeakMap,Ru=new WeakMap;class vv extends Xp{newFreeDrawOutline(e,t,i,s,a,l){return new dP(e,t,i,s,a,l)}get classNamesForDrawing(){return["highlight","free"]}}class dP extends Kb{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,s,a,l=0){return new vv(e,t,i,s,a,l)}}var Xi,Wo,Lu,Rt,gd,Mu,md,yd,Aa,Yi,Iu,vd,Xe,_v,wv,Av,Za,tS,Zs;const Mn=class Mn{constructor({editor:e=null,uiManager:t=null}){T(this,Xe);T(this,Xi,null);T(this,Wo,null);T(this,Lu);T(this,Rt,null);T(this,gd,!1);T(this,Mu,!1);T(this,md,null);T(this,yd);T(this,Aa,null);T(this,Yi,null);T(this,Iu);var i;e?(b(this,Mu,!1),b(this,Iu,ke.HIGHLIGHT_COLOR),b(this,md,e)):(b(this,Mu,!0),b(this,Iu,ke.HIGHLIGHT_DEFAULT_COLOR)),b(this,Yi,(e==null?void 0:e._uiManager)||t),b(this,yd,u(this,Yi)._eventBus),b(this,Lu,(e==null?void 0:e.color)||((i=u(this,Yi))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),u(Mn,vd)||b(Mn,vd,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ne(this,"_keyboardManager",new Pd([[["Escape","mac+Escape"],Mn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Mn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Mn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Mn.prototype._moveToPrevious],[["Home","mac+Home"],Mn.prototype._moveToBeginning],[["End","mac+End"],Mn.prototype._moveToEnd]]))}renderButton(){const e=b(this,Xi,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=u(this,Yi)._signal;e.addEventListener("click",k(this,Xe,Za).bind(this),{signal:t}),e.addEventListener("keydown",k(this,Xe,Av).bind(this),{signal:t});const i=b(this,Wo,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=u(this,Lu),e.append(i),e}renderMainDropdown(){const e=b(this,Rt,k(this,Xe,_v).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===u(this,Xi)){k(this,Xe,Za).call(this,e);return}const t=e.target.getAttribute("data-color");t&&k(this,Xe,wv).call(this,t,e)}_moveToNext(e){var t,i;if(!u(this,Xe,Zs)){k(this,Xe,Za).call(this,e);return}if(e.target===u(this,Xi)){(t=u(this,Rt).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=u(this,Rt))==null?void 0:t.firstChild)||e.target===u(this,Xi)){u(this,Xe,Zs)&&this._hideDropdownFromKeyboard();return}u(this,Xe,Zs)||k(this,Xe,Za).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!u(this,Xe,Zs)){k(this,Xe,Za).call(this,e);return}(t=u(this,Rt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,Xe,Zs)){k(this,Xe,Za).call(this,e);return}(t=u(this,Rt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,Rt))==null||e.classList.add("hidden"),(t=u(this,Aa))==null||t.abort(),b(this,Aa,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,Mu)){if(!u(this,Xe,Zs)){(e=u(this,md))==null||e.unselect();return}this.hideDropdown(),u(this,Xi).focus({preventScroll:!0,focusVisible:u(this,gd)})}}updateColor(e){if(u(this,Wo)&&(u(this,Wo).style.backgroundColor=e),!u(this,Rt))return;const t=u(this,Yi).highlightColors.values();for(const i of u(this,Rt).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=u(this,Xi))==null||e.remove(),b(this,Xi,null),b(this,Wo,null),(t=u(this,Rt))==null||t.remove(),b(this,Rt,null)}};Xi=new WeakMap,Wo=new WeakMap,Lu=new WeakMap,Rt=new WeakMap,gd=new WeakMap,Mu=new WeakMap,md=new WeakMap,yd=new WeakMap,Aa=new WeakMap,Yi=new WeakMap,Iu=new WeakMap,vd=new WeakMap,Xe=new WeakSet,_v=function(){const e=document.createElement("div"),t=u(this,Yi)._signal;e.addEventListener("contextmenu",Ei,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of u(this,Yi).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=i,a.setAttribute("data-l10n-id",u(Mn,vd)[i]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=s,a.setAttribute("aria-selected",s===u(this,Lu)),a.addEventListener("click",k(this,Xe,wv).bind(this,s),{signal:t}),e.append(a)}return e.addEventListener("keydown",k(this,Xe,Av).bind(this),{signal:t}),e},wv=function(e,t){t.stopPropagation(),u(this,yd).dispatch("switchannotationeditorparams",{source:this,type:u(this,Iu),value:e})},Av=function(e){Mn._keyboardManager.exec(this,e)},Za=function(e){if(u(this,Xe,Zs)){this.hideDropdown();return}if(b(this,gd,e.detail===0),u(this,Aa)||(b(this,Aa,new AbortController),window.addEventListener("pointerdown",k(this,Xe,tS).bind(this),{signal:u(this,Yi).combinedSignal(u(this,Aa))})),u(this,Rt)){u(this,Rt).classList.remove("hidden");return}const t=b(this,Rt,k(this,Xe,_v).call(this));u(this,Xi).append(t)},tS=function(e){var t;(t=u(this,Rt))!=null&&t.contains(e.target)||this.hideDropdown()},Zs=function(){return u(this,Rt)&&!u(this,Rt).classList.contains("hidden")},T(Mn,vd,null);let Yp=Mn;var Du,_d,ls,Vo,Ou,mi,wd,Ad,Go,Ki,un,On,Fu,us,Lt,Nu,yi,Ed,Re,Ev,Op,nS,iS,rS,bv,eo,wi,Bl,sS,Fp,th,aS,oS,lS,uS,cS;const Be=class Be extends Ge{constructor(t){super({...t,name:"highlightEditor"});T(this,Re);T(this,Du,null);T(this,_d,0);T(this,ls);T(this,Vo,null);T(this,Ou,null);T(this,mi,null);T(this,wd,null);T(this,Ad,0);T(this,Go,null);T(this,Ki,null);T(this,un,null);T(this,On,!1);T(this,Fu,null);T(this,us);T(this,Lt,null);T(this,Nu,"");T(this,yi);T(this,Ed,"");this.color=t.color||Be._defaultColor,b(this,yi,t.thickness||Be._defaultThickness),b(this,us,t.opacity||Be._defaultOpacity),b(this,ls,t.boxes||null),b(this,Ed,t.methodOfCreation||""),b(this,Nu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(b(this,On,!0),k(this,Re,Op).call(this,t),k(this,Re,eo).call(this)):u(this,ls)&&(b(this,Du,t.anchorNode),b(this,_d,t.anchorOffset),b(this,wd,t.focusNode),b(this,Ad,t.focusOffset),k(this,Re,Ev).call(this),k(this,Re,eo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Be.prototype;return Ne(this,"_keyboardManager",new Pd([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,On)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,yi),methodOfCreation:u(this,Ed)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var s;Ge.initialize(t,i),Be._defaultColor||(Be._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case ke.HIGHLIGHT_DEFAULT_COLOR:Be._defaultColor=i;break;case ke.HIGHLIGHT_THICKNESS:Be._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return u(this,Fu)}updateParams(t,i){switch(t){case ke.HIGHLIGHT_COLOR:k(this,Re,nS).call(this,i);break;case ke.HIGHLIGHT_THICKNESS:k(this,Re,iS).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ke.HIGHLIGHT_DEFAULT_COLOR,Be._defaultColor],[ke.HIGHLIGHT_THICKNESS,Be._defaultThickness]]}get propertiesToUpdate(){return[[ke.HIGHLIGHT_COLOR,this.color||Be._defaultColor],[ke.HIGHLIGHT_THICKNESS,u(this,yi)||Be._defaultThickness],[ke.HIGHLIGHT_FREE,u(this,On)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(b(this,Ou,new Yp({editor:this})),t.addColorPicker(u(this,Ou))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,Re,th).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,k(this,Re,th).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){k(this,Re,bv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,Re,eo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?k(this,Re,bv).call(this):t&&(k(this,Re,eo).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var a,l,c;const{drawLayer:i}=this.parent;let s;u(this,On)?(t=(t-this.rotation+360)%360,s=k(a=Be,wi,Bl).call(a,u(this,Ki).box,t)):s=k(l=Be,wi,Bl).call(l,this,t),i.rotate(u(this,un),t),i.rotate(u(this,Lt),t),i.updateBox(u(this,un),s),i.updateBox(u(this,Lt),k(c=Be,wi,Bl).call(c,u(this,mi).box,t))}render(){if(this.div)return this.div;const t=super.render();u(this,Nu)&&(t.setAttribute("aria-label",u(this,Nu)),t.setAttribute("role","mark")),u(this,On)?t.classList.add("free"):this.div.addEventListener("keydown",k(this,Re,sS).bind(this),{signal:this._uiManager._signal});const i=b(this,Go,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=u(this,Vo);const[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),Gp(this,u(this,Go),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(u(this,Lt),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(u(this,Lt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:k(this,Re,Fp).call(this,!0);break;case 1:case 3:k(this,Re,Fp).call(this,!1);break}}select(){var t,i;super.select(),u(this,Lt)&&((t=this.parent)==null||t.drawLayer.removeClass(u(this,Lt),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(u(this,Lt),"selected"))}unselect(){var t;super.unselect(),u(this,Lt)&&((t=this.parent)==null||t.drawLayer.removeClass(u(this,Lt),"selected"),u(this,On)||k(this,Re,Fp).call(this,!1))}get _mustFixPosition(){return!u(this,On)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(u(this,un),t),this.parent.drawLayer.show(u(this,Lt),t))}static startHighlighting(t,i,{target:s,x:a,y:l}){const{x:c,y:d,width:p,height:g}=s.getBoundingClientRect(),y=new AbortController,v=t.combinedSignal(y),w=E=>{E.preventDefault(),E.stopPropagation()},A=E=>{y.abort(),k(this,wi,uS).call(this,t,E)};window.addEventListener("blur",A,{signal:v}),window.addEventListener("pointerup",A,{signal:v}),window.addEventListener("pointerdown",w,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ei,{signal:v}),s.addEventListener("pointermove",k(this,wi,lS).bind(this,t),{signal:v}),this._freeHighlight=new vv({x:a,y:l},[c,d,p,g],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,i,s){var E,x,S,R;let a=null;if(t instanceof Ob){const{data:{quadPoints:P,rect:M,rotation:N,id:F,color:H,opacity:V,popupRef:B},parent:{page:{pageNumber:Y}}}=t;a=t={annotationType:Le.HIGHLIGHT,color:Array.from(H),opacity:V,quadPoints:P,boxes:null,pageIndex:Y-1,rect:M.slice(0),rotation:N,id:F,deleted:!1,popupRef:B}}else if(t instanceof a0){const{data:{inkLists:P,rect:M,rotation:N,id:F,color:H,borderStyle:{rawWidth:V},popupRef:B},parent:{page:{pageNumber:Y}}}=t;a=t={annotationType:Le.HIGHLIGHT,color:Array.from(H),thickness:V,inkLists:P,boxes:null,pageIndex:Y-1,rect:M.slice(0),rotation:N,id:F,deleted:!1,popupRef:B}}const{color:l,quadPoints:c,inkLists:d,opacity:p}=t,g=await super.deserialize(t,i,s);g.color=_e.makeHexColor(...l),b(g,us,p||1),d&&b(g,yi,t.thickness),g.annotationElementId=t.id||null,g._initialData=a;const[y,v]=g.pageDimensions,[w,A]=g.pageTranslation;if(c){const P=b(g,ls,[]);for(let M=0;M<c.length;M+=8)P.push({x:(c[M]-w)/y,y:1-(c[M+1]-A)/v,width:(c[M+2]-c[M])/y,height:(c[M+1]-c[M+5])/v});k(E=g,Re,Ev).call(E),k(x=g,Re,eo).call(x),g.rotate(g.rotation)}else if(d){b(g,On,!0);const P=d[0],M={x:P[0]-w,y:v-(P[1]-A)},N=new vv(M,[0,0,y,v],1,u(g,yi)/2,!0,.001);for(let V=0,B=P.length;V<B;V+=2)M.x=P[V]-w,M.y=v-(P[V+1]-A),N.add(M);const{id:F,clipPathId:H}=i.drawLayer.draw(N,g.color,g._defaultOpacity,!0);k(S=g,Re,Op).call(S,{highlightOutlines:N.getOutlines(),highlightId:F,clipPathId:H}),k(R=g,Re,eo).call(R)}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=Ge._colorManager.convert(this.color),a={annotationType:Le.HIGHLIGHT,color:s,opacity:u(this,us),thickness:u(this,yi),quadPoints:k(this,Re,aS).call(this),outlines:k(this,Re,oS).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:k(this,Re,th).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!k(this,Re,cS).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Du=new WeakMap,_d=new WeakMap,ls=new WeakMap,Vo=new WeakMap,Ou=new WeakMap,mi=new WeakMap,wd=new WeakMap,Ad=new WeakMap,Go=new WeakMap,Ki=new WeakMap,un=new WeakMap,On=new WeakMap,Fu=new WeakMap,us=new WeakMap,Lt=new WeakMap,Nu=new WeakMap,yi=new WeakMap,Ed=new WeakMap,Re=new WeakSet,Ev=function(){const t=new bA(u(this,ls),.001);b(this,Ki,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=u(this,Ki).box;const i=new bA(u(this,ls),.0025,.001,this._uiManager.direction==="ltr");b(this,mi,i.getOutlines());const{lastPoint:s}=u(this,mi).box;b(this,Fu,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Op=function({highlightOutlines:t,highlightId:i,clipPathId:s}){var y,v;if(b(this,Ki,t),b(this,mi,t.getNewOutline(u(this,yi)/2+1.5,.0025)),i>=0)b(this,un,i),b(this,Vo,s),this.parent.drawLayer.finalizeLine(i,t),b(this,Lt,this.parent.drawLayer.drawOutline(u(this,mi)));else if(this.parent){const w=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(u(this,un),t),this.parent.drawLayer.updateBox(u(this,un),k(y=Be,wi,Bl).call(y,u(this,Ki).box,(w-this.rotation+360)%360)),this.parent.drawLayer.updateLine(u(this,Lt),u(this,mi)),this.parent.drawLayer.updateBox(u(this,Lt),k(v=Be,wi,Bl).call(v,u(this,mi).box,w))}const{x:l,y:c,width:d,height:p}=t.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=d,this.height=p;break;case 90:{const[w,A]=this.parentDimensions;this.x=c,this.y=1-l,this.width=d*A/w,this.height=p*w/A;break}case 180:this.x=1-l,this.y=1-c,this.width=d,this.height=p;break;case 270:{const[w,A]=this.parentDimensions;this.x=1-c,this.y=l,this.width=d*A/w,this.height=p*w/A;break}}const{lastPoint:g}=u(this,mi).box;b(this,Fu,[(g[0]-l)/d,(g[1]-c)/p])},nS=function(t){const i=(l,c)=>{var d,p,g;this.color=l,(d=this.parent)==null||d.drawLayer.changeColor(u(this,un),l),(p=u(this,Ou))==null||p.updateColor(l),b(this,us,c),(g=this.parent)==null||g.drawLayer.changeOpacity(u(this,un),c)},s=this.color,a=u(this,us);this.addCommands({cmd:i.bind(this,t,Be._defaultOpacity),undo:i.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},iS=function(t){const i=u(this,yi),s=a=>{b(this,yi,a),k(this,Re,rS).call(this,a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},rS=function(t){if(!u(this,On))return;k(this,Re,Op).call(this,{highlightOutlines:u(this,Ki).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},bv=function(){u(this,un)===null||!this.parent||(this.parent.drawLayer.remove(u(this,un)),b(this,un,null),this.parent.drawLayer.remove(u(this,Lt)),b(this,Lt,null))},eo=function(t=this.parent){u(this,un)===null&&({id:yn(this,un)._,clipPathId:yn(this,Vo)._}=t.drawLayer.draw(u(this,Ki),this.color,u(this,us)),b(this,Lt,t.drawLayer.drawOutline(u(this,mi))),u(this,Go)&&(u(this,Go).style.clipPath=u(this,Vo)))},wi=new WeakSet,Bl=function({x:t,y:i,width:s,height:a},l){switch(l){case 90:return{x:1-i-a,y:t,width:a,height:s};case 180:return{x:1-t-s,y:1-i-a,width:s,height:a};case 270:return{x:i,y:1-t-s,width:a,height:s}}return{x:t,y:i,width:s,height:a}},sS=function(t){Be._keyboardManager.exec(this,t)},Fp=function(t){if(!u(this,Du))return;const i=window.getSelection();t?i.setPosition(u(this,Du),u(this,_d)):i.setPosition(u(this,wd),u(this,Ad))},th=function(){return u(this,On)?this.rotation:0},aS=function(){if(u(this,On))return null;const[t,i]=this.pageDimensions,[s,a]=this.pageTranslation,l=u(this,ls),c=new Float32Array(l.length*8);let d=0;for(const{x:p,y:g,width:y,height:v}of l){const w=p*t+s,A=(1-g-v)*i+a;c[d]=c[d+4]=w,c[d+1]=c[d+3]=A,c[d+2]=c[d+6]=w+y*t,c[d+5]=c[d+7]=A+v*i,d+=8}return c},oS=function(t){return u(this,Ki).serialize(t,k(this,Re,th).call(this))},lS=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},uS=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},cS=function(t){const{color:i}=this._initialData;return t.color.some((s,a)=>s!==i[a])},T(Be,wi),Ce(Be,"_defaultColor",null),Ce(Be,"_defaultOpacity",1),Ce(Be,"_defaultThickness",12),Ce(Be,"_type","highlight"),Ce(Be,"_editorType",Le.HIGHLIGHT),Ce(Be,"_freeHighlightId",-1),Ce(Be,"_freeHighlight",null),Ce(Be,"_freeHighlightClipId","");let Kp=Be;var qo,Xo,Ar,cs,vi,Yo,Ko,Qo,hs,ju,Jo,Zo,Ea,se,hS,dS,fS,pS,xv,gS,Cv,mS,yS,vS,_S,wS,to,kv,Tv,Pv,Np,jp,Ul,Rv,Hp,bs,AS,Lv,ES,bS,Mv,zp,nh;const ot=class ot extends Ge{constructor(t){super({...t,name:"inkEditor"});T(this,se);T(this,qo,0);T(this,Xo,0);T(this,Ar,null);T(this,cs,new Path2D);T(this,vi,!1);T(this,Yo,null);T(this,Ko,!1);T(this,Qo,!1);T(this,hs,null);T(this,ju,null);T(this,Jo,0);T(this,Zo,0);T(this,Ea,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){Ge.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case ke.INK_THICKNESS:ot._defaultThickness=i;break;case ke.INK_COLOR:ot._defaultColor=i;break;case ke.INK_OPACITY:ot._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case ke.INK_THICKNESS:k(this,se,hS).call(this,i);break;case ke.INK_COLOR:k(this,se,dS).call(this,i);break;case ke.INK_OPACITY:k(this,se,fS).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ke.INK_THICKNESS,ot._defaultThickness],[ke.INK_COLOR,ot._defaultColor||Ge._defaultLineColor],[ke.INK_OPACITY,Math.round(ot._defaultOpacity*100)]]}get propertiesToUpdate(){return[[ke.INK_THICKNESS,this.thickness||ot._defaultThickness],[ke.INK_COLOR,this.color||ot._defaultColor||Ge._defaultLineColor],[ke.INK_OPACITY,Math.round(100*(this.opacity??ot._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(k(this,se,Np).call(this),k(this,se,jp).call(this)),this.isAttachedToDOM||(this.parent.add(this),k(this,se,Ul).call(this)),k(this,se,nh).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,u(this,Ar)&&(clearTimeout(u(this,Ar)),b(this,Ar,null)),(t=u(this,hs))==null||t.disconnect(),b(this,hs,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,s=this.width*t,a=this.height*i;this.setDimensions(s,a)}enableEditMode(){u(this,vi)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,k(this,se,kv).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),k(this,se,Tv).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){u(this,vi)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),b(this,vi,!0),this.div.classList.add("disabled"),k(this,se,nh).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||u(this,vi)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),k(this,se,gS).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),k(this,se,Cv).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),k(this,se,Pv).call(this,t)}canvasPointerleave(t){k(this,se,Pv).call(this,t)}get isResizable(){return!this.isEmpty()&&u(this,vi)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,a,l,c]=k(this,se,pS).call(this);if(this.setAt(s,a,0,0),this.setDims(l,c),k(this,se,Np).call(this),this.width){const[d,p]=this.parentDimensions;this.setAspectRatio(this.width*d,this.height*p),this.setAt(t*d,i*p,this.width*d,this.height*p),b(this,Qo,!0),k(this,se,Ul).call(this),this.setDims(this.width*d,this.height*p),k(this,se,to).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return k(this,se,jp).call(this),this.div}setDimensions(t,i){const s=Math.round(t),a=Math.round(i);if(u(this,Jo)===s&&u(this,Zo)===a)return;b(this,Jo,s),b(this,Zo,a),this.canvas.style.visibility="hidden";const[l,c]=this.parentDimensions;this.width=t/l,this.height=i/c,this.fixAndSetPosition(),u(this,vi)&&k(this,se,Rv).call(this,t,i),k(this,se,Ul).call(this),k(this,se,to).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,i,s){var x,S,R;if(t instanceof a0)return null;const a=await super.deserialize(t,i,s);a.thickness=t.thickness,a.color=_e.makeHexColor(...t.color),a.opacity=t.opacity;const[l,c]=a.pageDimensions,d=a.width*l,p=a.height*c,g=a.parentScale,y=t.thickness/2;b(a,vi,!0),b(a,Jo,Math.round(d)),b(a,Zo,Math.round(p));const{paths:v,rect:w,rotation:A}=t;for(let{bezier:P}of v){P=k(x=ot,bs,ES).call(x,P,w,A);const M=[];a.paths.push(M);let N=g*(P[0]-y),F=g*(P[1]-y);for(let V=2,B=P.length;V<B;V+=6){const Y=g*(P[V]-y),X=g*(P[V+1]-y),ie=g*(P[V+2]-y),ne=g*(P[V+3]-y),pe=g*(P[V+4]-y),de=g*(P[V+5]-y);M.push([[N,F],[Y,X],[ie,ne],[pe,de]]),N=pe,F=de}const H=k(this,bs,AS).call(this,M);a.bezierPath2D.push(H)}const E=k(S=a,se,Mv).call(S);return b(a,Xo,Math.max(Ge.MIN_SIZE,E[2]-E[0])),b(a,qo,Math.max(Ge.MIN_SIZE,E[3]-E[1])),k(R=a,se,Rv).call(R,d,p),a}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=Ge._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Le.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:k(this,se,bS).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};qo=new WeakMap,Xo=new WeakMap,Ar=new WeakMap,cs=new WeakMap,vi=new WeakMap,Yo=new WeakMap,Ko=new WeakMap,Qo=new WeakMap,hs=new WeakMap,ju=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,Ea=new WeakMap,se=new WeakSet,hS=function(t){const i=a=>{this.thickness=a,k(this,se,nh).call(this)},s=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},dS=function(t){const i=a=>{this.color=a,k(this,se,to).call(this)},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},fS=function(t){const i=a=>{this.opacity=a,k(this,se,to).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},pS=function(){const{parentRotation:t,parentDimensions:[i,s]}=this;switch(t){case 90:return[0,s,s,i];case 180:return[i,s,i,s];case 270:return[i,0,s,i];default:return[0,0,i,s]}},xv=function(){const{ctx:t,color:i,opacity:s,thickness:a,parentScale:l,scaleFactor:c}=this;t.lineWidth=a*l/c,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${Dk(s)}`},gS=function(t,i){this.canvas.addEventListener("contextmenu",Ei,{signal:this._uiManager._signal}),k(this,se,Tv).call(this),b(this,Yo,new AbortController);const s=this._uiManager.combinedSignal(u(this,Yo));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,u(this,Qo)||(b(this,Qo,!0),k(this,se,Ul).call(this),this.thickness||(this.thickness=ot._defaultThickness),this.color||(this.color=ot._defaultColor||Ge._defaultLineColor),this.opacity??(this.opacity=ot._defaultOpacity)),this.currentPath.push([t,i]),b(this,Ko,!1),k(this,se,xv).call(this),b(this,Ea,()=>{k(this,se,vS).call(this),u(this,Ea)&&window.requestAnimationFrame(u(this,Ea))}),window.requestAnimationFrame(u(this,Ea))},Cv=function(t,i){const[s,a]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&i===a)return;const l=this.currentPath;let c=u(this,cs);if(l.push([t,i]),b(this,Ko,!0),l.length<=2){c.moveTo(...l[0]),c.lineTo(t,i);return}l.length===3&&(b(this,cs,c=new Path2D),c.moveTo(...l[0])),k(this,se,_S).call(this,c,...l.at(-3),...l.at(-2),t,i)},mS=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);u(this,cs).lineTo(...t)},yS=function(t,i){b(this,Ea,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),k(this,se,Cv).call(this,t,i),k(this,se,mS).call(this);let s;if(this.currentPath.length!==1)s=k(this,se,wS).call(this);else{const p=[t,i];s=[[p,p.slice(),p.slice(),p]]}const a=u(this,cs),l=this.currentPath;this.currentPath=[],b(this,cs,new Path2D);const c=()=>{this.allRawPaths.push(l),this.paths.push(s),this.bezierPath2D.push(a),this._uiManager.rebuild(this)},d=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(k(this,se,Np).call(this),k(this,se,jp).call(this)),k(this,se,nh).call(this))};this.addCommands({cmd:c,undo:d,mustExec:!0})},vS=function(){if(!u(this,Ko))return;b(this,Ko,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),s=i.map(c=>c[0]),a=i.map(c=>c[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...a)-t,Math.max(...a)+t;const{ctx:l}=this;l.save(),l.clearRect(0,0,this.canvas.width,this.canvas.height);for(const c of this.bezierPath2D)l.stroke(c);l.stroke(u(this,cs)),l.restore()},_S=function(t,i,s,a,l,c,d){const p=(i+a)/2,g=(s+l)/2,y=(a+c)/2,v=(l+d)/2;t.bezierCurveTo(p+2*(a-p)/3,g+2*(l-g)/3,y+2*(a-y)/3,v+2*(l-v)/3,y,v)},wS=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let s,[a,l]=t[0];for(s=1;s<t.length-2;s++){const[w,A]=t[s],[E,x]=t[s+1],S=(w+E)/2,R=(A+x)/2,P=[a+2*(w-a)/3,l+2*(A-l)/3],M=[S+2*(w-S)/3,R+2*(A-R)/3];i.push([[a,l],P,M,[S,R]]),[a,l]=[S,R]}const[c,d]=t[s],[p,g]=t[s+1],y=[a+2*(c-a)/3,l+2*(d-l)/3],v=[p+2*(c-p)/3,g+2*(d-g)/3];return i.push([[a,l],y,v,[p,g]]),i},to=function(){if(this.isEmpty()){k(this,se,Hp).call(this);return}k(this,se,xv).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),k(this,se,Hp).call(this);for(const s of this.bezierPath2D)i.stroke(s)},kv=function(){if(u(this,ju))return;b(this,ju,new AbortController);const t=this._uiManager.combinedSignal(u(this,ju));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},Tv=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},Pv=function(t){var i;(i=u(this,Yo))==null||i.abort(),b(this,Yo,null),k(this,se,kv).call(this),u(this,Ar)&&clearTimeout(u(this,Ar)),b(this,Ar,setTimeout(()=>{b(this,Ar,null),this.canvas.removeEventListener("contextmenu",Ei)},10)),k(this,se,yS).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Np=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},jp=function(){b(this,hs,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),u(this,hs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=u(this,hs))==null||t.disconnect(),b(this,hs,null)},{once:!0})},Ul=function(){if(!u(this,Qo))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),k(this,se,Hp).call(this)},Rv=function(t,i){const s=k(this,se,zp).call(this),a=(t-s)/u(this,Xo),l=(i-s)/u(this,qo);this.scaleFactor=Math.min(a,l)},Hp=function(){const t=k(this,se,zp).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},bs=new WeakSet,AS=function(t){const i=new Path2D;for(let s=0,a=t.length;s<a;s++){const[l,c,d,p]=t[s];s===0&&i.moveTo(...l),i.bezierCurveTo(c[0],c[1],d[0],d[1],p[0],p[1])}return i},Lv=function(t,i,s){const[a,l,c,d]=i;switch(s){case 0:for(let p=0,g=t.length;p<g;p+=2)t[p]+=a,t[p+1]=d-t[p+1];break;case 90:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=t[p+1]+a,t[p+1]=y+l}break;case 180:for(let p=0,g=t.length;p<g;p+=2)t[p]=c-t[p],t[p+1]+=l;break;case 270:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=c-t[p+1],t[p+1]=d-y}break;default:throw new Error("Invalid rotation")}return t},ES=function(t,i,s){const[a,l,c,d]=i;switch(s){case 0:for(let p=0,g=t.length;p<g;p+=2)t[p]-=a,t[p+1]=d-t[p+1];break;case 90:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=t[p+1]-l,t[p+1]=y-a}break;case 180:for(let p=0,g=t.length;p<g;p+=2)t[p]=c-t[p],t[p+1]-=l;break;case 270:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=d-t[p+1],t[p+1]=c-y}break;default:throw new Error("Invalid rotation")}return t},bS=function(t,i,s,a){var g,y;const l=[],c=this.thickness/2,d=t*i+c,p=t*s+c;for(const v of this.paths){const w=[],A=[];for(let E=0,x=v.length;E<x;E++){const[S,R,P,M]=v[E];if(S[0]===M[0]&&S[1]===M[1]&&x===1){const ne=t*S[0]+d,pe=t*S[1]+p;w.push(ne,pe),A.push(ne,pe);break}const N=t*S[0]+d,F=t*S[1]+p,H=t*R[0]+d,V=t*R[1]+p,B=t*P[0]+d,Y=t*P[1]+p,X=t*M[0]+d,ie=t*M[1]+p;E===0&&(w.push(N,F),A.push(N,F)),w.push(H,V,B,Y,X,ie),A.push(H,V),E===x-1&&A.push(X,ie)}l.push({bezier:k(g=ot,bs,Lv).call(g,w,a,this.rotation),points:k(y=ot,bs,Lv).call(y,A,a,this.rotation)})}return l},Mv=function(){let t=1/0,i=-1/0,s=1/0,a=-1/0;for(const l of this.paths)for(const[c,d,p,g]of l){const y=_e.bezierBoundingBox(...c,...d,...p,...g);t=Math.min(t,y[0]),s=Math.min(s,y[1]),i=Math.max(i,y[2]),a=Math.max(a,y[3])}return[t,s,i,a]},zp=function(){return u(this,vi)?Math.ceil(this.thickness*this.parentScale):0},nh=function(t=!1){if(this.isEmpty())return;if(!u(this,vi)){k(this,se,to).call(this);return}const i=k(this,se,Mv).call(this),s=k(this,se,zp).call(this);b(this,Xo,Math.max(Ge.MIN_SIZE,i[2]-i[0])),b(this,qo,Math.max(Ge.MIN_SIZE,i[3]-i[1]));const a=Math.ceil(s+u(this,Xo)*this.scaleFactor),l=Math.ceil(s+u(this,qo)*this.scaleFactor),[c,d]=this.parentDimensions;this.width=a/c,this.height=l/d,this.setAspectRatio(a,l);const p=this.translationX,g=this.translationY;this.translationX=-i[0],this.translationY=-i[1],k(this,se,Ul).call(this),k(this,se,to).call(this),b(this,Jo,a),b(this,Zo,l),this.setDims(a,l);const y=t?s/this.scaleFactor/2:0;this.translate(p-this.translationX-y,g-this.translationY-y)},T(ot,bs),Ce(ot,"_defaultColor",null),Ce(ot,"_defaultOpacity",1),Ce(ot,"_defaultThickness",1),Ce(ot,"_type","ink"),Ce(ot,"_editorType",Le.INK);let Sv=ot;var ut,Qt,ba,ds,Sa,Hu,Er,fs,br,ei,zu,Fe,ih,rh,Bp,Dv,SS,Up,Ov,$p,xS,CS;const oh=class oh extends Ge{constructor(t){super({...t,name:"stampEditor"});T(this,Fe);T(this,ut,null);T(this,Qt,null);T(this,ba,null);T(this,ds,null);T(this,Sa,null);T(this,Hu,"");T(this,Er,null);T(this,fs,null);T(this,br,null);T(this,ei,!1);T(this,zu,!1);b(this,ds,t.bitmapUrl),b(this,Sa,t.bitmapFile)}static initialize(t,i){Ge.initialize(t,i)}static get supportedTypes(){return Ne(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Ne(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Le.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:c}=t||this.copyCanvas(null,null,!0).imageData,d=await s.guess({name:"altText",request:{data:a,width:l,height:c,channels:a.length/(l*c)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const p=d.output;return await this.setGuessedAltText(p),i&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var t,i;u(this,Qt)&&(b(this,ut,null),this._uiManager.imageManager.deleteId(u(this,Qt)),(t=u(this,Er))==null||t.remove(),b(this,Er,null),(i=u(this,fs))==null||i.disconnect(),b(this,fs,null),u(this,br)&&(clearTimeout(u(this,br)),b(this,br,null))),super.remove()}rebuild(){if(!this.parent){u(this,Qt)&&k(this,Fe,Bp).call(this);return}super.rebuild(),this.div!==null&&(u(this,Qt)&&u(this,Er)===null&&k(this,Fe,Bp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(u(this,ba)||u(this,ut)||u(this,ds)||u(this,Sa)||u(this,Qt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),u(this,ut)?k(this,Fe,Dv).call(this):k(this,Fe,Bp).call(this),this.width&&!this.annotationElementId){const[s,a]=this.parentDimensions;this.setAt(t*s,i*a,this.width*s,this.height*a)}return this.div}copyCanvas(t,i,s=!1){var w;t||(t=224);const{width:a,height:l}=u(this,ut),c=new Py;let d=u(this,ut),p=a,g=l,y=null;if(i){if(a>i||l>i){const V=Math.min(i/a,i/l);p=Math.floor(a*V),g=Math.floor(l*V)}y=document.createElement("canvas");const A=y.width=Math.ceil(p*c.sx),E=y.height=Math.ceil(g*c.sy);u(this,ei)||(d=k(this,Fe,Up).call(this,A,E));const x=y.getContext("2d");x.filter=this._uiManager.hcmFilter;let S="white",R="#cfcfd8";this._uiManager.hcmFilter!=="none"?R="black":(w=window.matchMedia)!=null&&w.call(window,"(prefers-color-scheme: dark)").matches&&(S="#8f8f9d",R="#42414d");const P=15,M=P*c.sx,N=P*c.sy,F=new OffscreenCanvas(M*2,N*2),H=F.getContext("2d");H.fillStyle=S,H.fillRect(0,0,M*2,N*2),H.fillStyle=R,H.fillRect(0,0,M,N),H.fillRect(M,N,M,N),x.fillStyle=x.createPattern(F,"repeat"),x.fillRect(0,0,A,E),x.drawImage(d,0,0,d.width,d.height,0,0,A,E)}let v=null;if(s){let A,E;if(c.symmetric&&d.width<t&&d.height<t)A=d.width,E=d.height;else if(d=u(this,ut),a>t||l>t){const R=Math.min(t/a,t/l);A=Math.floor(a*R),E=Math.floor(l*R),u(this,ei)||(d=k(this,Fe,Up).call(this,A,E))}const S=new OffscreenCanvas(A,E).getContext("2d",{willReadFrequently:!0});S.drawImage(d,0,0,d.width,d.height,0,0,A,E),v={width:A,height:E,data:S.getImageData(0,0,A,E).data}}return{canvas:y,width:p,height:g,imageData:v}}getImageForAltText(){return u(this,Er)}static async deserialize(t,i,s){var E;let a=null;if(t instanceof Fb){const{data:{rect:x,rotation:S,id:R,structParent:P,popupRef:M},container:N,parent:{page:{pageNumber:F}}}=t,H=N.querySelector("canvas"),V=s.imageManager.getFromCanvas(N.id,H);H.remove();const B=((E=await i._structTree.getAriaAttributes(`${Yv}${R}`))==null?void 0:E.get("aria-label"))||"";a=t={annotationType:Le.STAMP,bitmapId:V.id,bitmap:V.bitmap,pageIndex:F-1,rect:x.slice(0),rotation:S,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:B},isSvg:!1,structParent:P,popupRef:M}}const l=await super.deserialize(t,i,s),{rect:c,bitmap:d,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:v}=t;g&&s.imageManager.isValidId(g)?(b(l,Qt,g),d&&b(l,ut,d)):b(l,ds,p),b(l,ei,y);const[w,A]=l.pageDimensions;return l.width=(c[2]-c[0])/w,l.height=(c[3]-c[1])/A,l.annotationElementId=t.id||null,v&&(l.altTextData=v),l._initialData=a,b(l,zu,!!a),l}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Le.STAMP,bitmapId:u(this,Qt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,ei),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=k(this,Fe,$p).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const d=k(this,Fe,CS).call(this,s);if(d.isSame)return null;d.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const c=u(this,ei)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(u(this,Qt)))i.stamps.set(u(this,Qt),{area:c,serialized:s}),s.bitmap=k(this,Fe,$p).call(this,!1);else if(u(this,ei)){const d=i.stamps.get(u(this,Qt));c>d.area&&(d.area=c,d.serialized.bitmap.close(),d.serialized.bitmap=k(this,Fe,$p).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};ut=new WeakMap,Qt=new WeakMap,ba=new WeakMap,ds=new WeakMap,Sa=new WeakMap,Hu=new WeakMap,Er=new WeakMap,fs=new WeakMap,br=new WeakMap,ei=new WeakMap,zu=new WeakMap,Fe=new WeakSet,ih=function(t,i=!1){if(!t){this.remove();return}b(this,ut,t.bitmap),i||(b(this,Qt,t.id),b(this,ei,t.isSvg)),t.file&&b(this,Hu,t.file.name),k(this,Fe,Dv).call(this)},rh=function(){if(b(this,ba,null),this._uiManager.enableWaiting(!1),!!u(this,Er)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,ut)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,ut)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Bp=function(){if(u(this,Qt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Qt)).then(s=>k(this,Fe,ih).call(this,s,!0)).finally(()=>k(this,Fe,rh).call(this));return}if(u(this,ds)){const s=u(this,ds);b(this,ds,null),this._uiManager.enableWaiting(!0),b(this,ba,this._uiManager.imageManager.getFromUrl(s).then(a=>k(this,Fe,ih).call(this,a)).finally(()=>k(this,Fe,rh).call(this)));return}if(u(this,Sa)){const s=u(this,Sa);b(this,Sa,null),this._uiManager.enableWaiting(!0),b(this,ba,this._uiManager.imageManager.getFromFile(s).then(a=>k(this,Fe,ih).call(this,a)).finally(()=>k(this,Fe,rh).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=oh.supportedTypesStr;const i=this._uiManager._signal;b(this,ba,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,Fe,ih).call(this,a)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>k(this,Fe,rh).call(this))),t.click()},Dv=function(){const{div:t}=this;let{width:i,height:s}=u(this,ut);const[a,l]=this.pageDimensions,c=.75;if(this.width)i=this.width*a,s=this.height*l;else if(i>c*a||s>c*l){const y=Math.min(c*a/i,c*l/s);i*=y,s*=y}const[d,p]=this.parentDimensions;this.setDims(i*d/a,s*p/l),this._uiManager.enableWaiting(!1);const g=b(this,Er,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),k(this,Fe,Ov).call(this,i,s),k(this,Fe,xS).call(this),u(this,zu)||(this.parent.addUndoableEditor(this),b(this,zu,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Hu)&&g.setAttribute("aria-label",u(this,Hu))},SS=function(t,i){var c;const[s,a]=this.parentDimensions;this.width=t/s,this.height=i/a,(c=this._initialOptions)!=null&&c.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,u(this,br)!==null&&clearTimeout(u(this,br)),b(this,br,setTimeout(()=>{b(this,br,null),k(this,Fe,Ov).call(this,t,i)},200))},Up=function(t,i){const{width:s,height:a}=u(this,ut);let l=s,c=a,d=u(this,ut);for(;l>2*t||c>2*i;){const p=l,g=c;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const y=new OffscreenCanvas(l,c);y.getContext("2d").drawImage(d,0,0,p,g,0,0,l,c),d=y.transferToImageBitmap()}return d},Ov=function(t,i){const s=new Py,a=Math.ceil(t*s.sx),l=Math.ceil(i*s.sy),c=u(this,Er);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const d=u(this,ei)?u(this,ut):k(this,Fe,Up).call(this,a,l),p=c.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,a,l)},$p=function(t){if(t){if(u(this,ei)){const a=this._uiManager.imageManager.getSvgUrl(u(this,Qt));if(a)return a}const i=document.createElement("canvas");return{width:i.width,height:i.height}=u(this,ut),i.getContext("2d").drawImage(u(this,ut),0,0),i.toDataURL()}if(u(this,ei)){const[i,s]=this.pageDimensions,a=Math.round(this.width*i*Pa.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*Pa.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,l);return c.getContext("2d").drawImage(u(this,ut),0,0,u(this,ut).width,u(this,ut).height,0,0,a,l),c.transferToImageBitmap()}return structuredClone(u(this,ut))},xS=function(){this._uiManager._signal&&(b(this,fs,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&k(this,Fe,SS).call(this,i.width,i.height)})),u(this,fs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=u(this,fs))==null||t.disconnect(),b(this,fs,null)},{once:!0}))},CS=function(t){var p;const{rect:i,pageIndex:s,accessibilityData:{altText:a}}=this._initialData,l=t.rect.every((g,y)=>Math.abs(g-i[y])<1),c=t.pageIndex===s,d=(((p=t.accessibilityData)==null?void 0:p.alt)||"")===a;return{isSame:l&&c&&d,isSameAltText:d}},Ce(oh,"_type","stamp"),Ce(oh,"_editorType",Le.STAMP);let Iv=oh;var el,Bu,Sr,xa,ps,ti,Ca,Uu,$u,cn,gs,Ae,ka,Jt,kS,Nv,jv,Hv,Wp;const Fi=class Fi{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:s,accessibilityManager:a,annotationLayer:l,drawLayer:c,textLayer:d,viewport:p,l10n:g}){T(this,Jt);T(this,el);T(this,Bu,!1);T(this,Sr,null);T(this,xa,null);T(this,ps,null);T(this,ti,new Map);T(this,Ca,!1);T(this,Uu,!1);T(this,$u,!1);T(this,cn,null);T(this,gs,null);T(this,Ae);const y=[...u(Fi,ka).values()];if(!Fi._initialized){Fi._initialized=!0;for(const v of y)v.initialize(g,e)}e.registerEditorTypes(y),b(this,Ae,e),this.pageIndex=t,this.div=i,b(this,el,a),b(this,Sr,l),this.viewport=p,b(this,cn,d),this.drawLayer=c,this._structTree=s,u(this,Ae).addLayer(this)}get isEmpty(){return u(this,ti).size===0}get isInvisible(){return this.isEmpty&&u(this,Ae).getMode()===Le.NONE}updateToolbar(e){u(this,Ae).updateToolbar(e)}updateMode(e=u(this,Ae).getMode()){switch(k(this,Jt,Wp).call(this),e){case Le.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Le.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Le.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of u(Fi,ka).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,cn))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(u(this,Ae).getMode()!==Le.INK)return;if(!e){for(const i of u(this,ti).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){u(this,Ae).setEditingState(e)}addCommands(e){u(this,Ae).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,Sr))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of u(this,ti).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(u(this,Ae).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!u(this,Sr))return;const t=u(this,Sr).getEditableAnnotations();for(const i of t){if(i.hide(),u(this,Ae).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;b(this,$u,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const a of u(this,ti).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){e.set(a.annotationElementId,a);continue}else t.set(a.annotationElementId,a);(s=this.getEditableAnnotation(a.annotationElementId))==null||s.show(),a.remove()}if(u(this,Sr)){const a=u(this,Sr).getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(u(this,Ae).isDeletedAnnotationElement(c))continue;let d=t.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=e.get(c),d&&(u(this,Ae).addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}k(this,Jt,Wp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of u(Fi,ka).values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,$u,!1)}getEditableAnnotation(e){var t;return((t=u(this,Sr))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,Ae).getActive()!==e&&u(this,Ae).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,cn))!=null&&e.div&&!u(this,gs)){b(this,gs,new AbortController);const t=u(this,Ae).combinedSignal(u(this,gs));u(this,cn).div.addEventListener("pointerdown",k(this,Jt,kS).bind(this),{signal:t}),u(this,cn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,cn))!=null&&e.div&&u(this,gs)&&(u(this,gs).abort(),b(this,gs,null),u(this,cn).div.classList.remove("highlighting"))}enableClick(){if(u(this,xa))return;b(this,xa,new AbortController);const e=u(this,Ae).combinedSignal(u(this,xa));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=u(this,xa))==null||e.abort(),b(this,xa,null)}attach(e){u(this,ti).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,Ae).isDeletedAnnotationElement(t)&&u(this,Ae).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,ti).delete(e.id),(t=u(this,el))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,$u)&&e.annotationElementId&&u(this,Ae).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,Ae).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,u(this,Uu)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,Ae).addDeletedAnnotationElement(e.annotationElementId),Ge.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,Ae).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),u(this,Ae).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,ps)&&(e._focusEventsAllowed=!1,b(this,ps,setTimeout(()=>{b(this,ps,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,Ae)._signal}),t.focus())},0))),e._structTreeParentId=(i=u(this,el))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return u(this,Ae).getId()}combinedSignal(e){return u(this,Ae).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,Jt,Nv))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){u(this,Ae).updateToolbar(e),u(this,Ae).updateMode(e);const{offsetX:i,offsetY:s}=k(this,Jt,Hv).call(this),a=this.getNextId(),l=k(this,Jt,jv).call(this,{parent:this,id:a,x:i,y:s,uiManager:u(this,Ae),isCentered:!0,...t});l&&this.add(l)}async deserialize(e){var t;return await((t=u(Fi,ka).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,Ae)))||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),a=k(this,Jt,jv).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:u(this,Ae),isCentered:t,...i});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(k(this,Jt,Hv).call(this),!0)}setSelected(e){u(this,Ae).setSelected(e)}toggleSelected(e){u(this,Ae).toggleSelected(e)}unselect(e){u(this,Ae).unselect(e)}pointerup(e){const{isMac:t}=An.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&u(this,Ca)){if(b(this,Ca,!1),!u(this,Bu)){b(this,Bu,!0);return}if(u(this,Ae).getMode()===Le.STAMP){u(this,Ae).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(u(this,Ae).getMode()===Le.HIGHLIGHT&&this.enableTextSelection(),u(this,Ca)){b(this,Ca,!1);return}const{isMac:t}=An.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;b(this,Ca,!0);const i=u(this,Ae).getActive();b(this,Bu,!i||i.isEmpty())}findNewParent(e,t,i){const s=u(this,Ae).findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=u(this,Ae).getActive())==null?void 0:e.parent)===this&&(u(this,Ae).commitOrRemove(),u(this,Ae).setActiveEditor(null)),u(this,ps)&&(clearTimeout(u(this,ps)),b(this,ps,null));for(const i of u(this,ti).values())(t=u(this,el))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,u(this,ti).clear(),u(this,Ae).removeLayer(this)}render({viewport:e}){this.viewport=e,tl(this.div,e);for(const t of u(this,Ae).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,Ae).commitOrRemove(),k(this,Jt,Wp).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,tl(this.div,{rotation:i}),t!==i)for(const s of u(this,ti).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,Ae).viewParameters.realScale}};el=new WeakMap,Bu=new WeakMap,Sr=new WeakMap,xa=new WeakMap,ps=new WeakMap,ti=new WeakMap,Ca=new WeakMap,Uu=new WeakMap,$u=new WeakMap,cn=new WeakMap,gs=new WeakMap,Ae=new WeakMap,ka=new WeakMap,Jt=new WeakSet,kS=function(e){u(this,Ae).unselectAll();const{target:t}=e;if(t===u(this,cn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,cn).div.contains(t)){const{isMac:i}=An.platform;if(e.button!==0||e.ctrlKey&&i)return;u(this,Ae).showAllEditors("highlight",!0,!0),u(this,cn).div.classList.add("free"),this.toggleDrawing(),Kp.startHighlighting(this,u(this,Ae).direction==="ltr",{target:u(this,cn).div,x:e.x,y:e.y}),u(this,cn).div.addEventListener("pointerup",()=>{u(this,cn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,Ae)._signal}),e.preventDefault()}},Nv=function(){return u(Fi,ka).get(u(this,Ae).getMode())},jv=function(e){const t=u(this,Jt,Nv);return t?new t.prototype.constructor(e):null},Hv=function(){const{x:e,y:t,width:i,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,e),l=Math.max(0,t),c=Math.min(window.innerWidth,e+i),d=Math.min(window.innerHeight,t+s),p=(a+c)/2-e,g=(l+d)/2-t,[y,v]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:v}},Wp=function(){b(this,Uu,!0);for(const e of u(this,ti).values())e.isEmpty()&&e.remove();b(this,Uu,!1)},Ce(Fi,"_initialized",!1),T(Fi,ka,new Map([gv,Sv,Iv,Kp].map(e=>[e._editorType,e])));let Fv=Fi;var xr,bd,bt,ms,Sd,Bv,sl,Uv,TS;const Xt=class Xt{constructor({pageIndex:e}){T(this,sl);T(this,xr,null);T(this,bd,0);T(this,bt,new Map);T(this,ms,new Map);this.pageIndex=e}setParent(e){if(!u(this,xr)){b(this,xr,e);return}if(u(this,xr)!==e){if(u(this,bt).size>0)for(const t of u(this,bt).values())t.remove(),e.append(t);b(this,xr,e)}}static get _svgFactory(){return Ne(this,"_svgFactory",new s0)}draw(e,t,i,s=!1){const a=yn(this,bd)._++,l=k(this,sl,Uv).call(this,e.box);l.classList.add(...e.classNamesForDrawing);const c=Xt._svgFactory.createElement("defs");l.append(c);const d=Xt._svgFactory.createElement("path");c.append(d);const p=`path_p${this.pageIndex}_${a}`;d.setAttribute("id",p),d.setAttribute("d",e.toSVGPath()),s&&u(this,ms).set(a,d);const g=k(this,sl,TS).call(this,c,p),y=Xt._svgFactory.createElement("use");return l.append(y),l.setAttribute("fill",t),l.setAttribute("fill-opacity",i),y.setAttribute("href",`#${p}`),u(this,bt).set(a,l),{id:a,clipPathId:`url(#${g})`}}drawOutline(e){const t=yn(this,bd)._++,i=k(this,sl,Uv).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const s=Xt._svgFactory.createElement("defs");i.append(s);const a=Xt._svgFactory.createElement("path");s.append(a);const l=`path_p${this.pageIndex}_${t}`;a.setAttribute("id",l),a.setAttribute("d",e.toSVGPath()),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(e.mustRemoveSelfIntersections){const g=Xt._svgFactory.createElement("mask");s.append(g),c=`mask_p${this.pageIndex}_${t}`,g.setAttribute("id",c),g.setAttribute("maskUnits","objectBoundingBox");const y=Xt._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const v=Xt._svgFactory.createElement("use");g.append(v),v.setAttribute("href",`#${l}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=Xt._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const p=d.cloneNode();return i.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),u(this,bt).set(t,i),t}finalizeLine(e,t){const i=u(this,ms).get(e);u(this,ms).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){u(this,bt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){u(this,ms).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;k(i=Xt,Sd,Bv).call(i,u(this,bt).get(e),t)}show(e,t){u(this,bt).get(e).classList.toggle("hidden",!t)}rotate(e,t){u(this,bt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){u(this,bt).get(e).setAttribute("fill",t)}changeOpacity(e,t){u(this,bt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){u(this,bt).get(e).classList.add(t)}removeClass(e,t){u(this,bt).get(e).classList.remove(t)}getSVGRoot(e){return u(this,bt).get(e)}remove(e){u(this,ms).delete(e),u(this,xr)!==null&&(u(this,bt).get(e).remove(),u(this,bt).delete(e))}destroy(){b(this,xr,null);for(const e of u(this,bt).values())e.remove();u(this,bt).clear(),u(this,ms).clear()}};xr=new WeakMap,bd=new WeakMap,bt=new WeakMap,ms=new WeakMap,Sd=new WeakSet,Bv=function(e,{x:t=0,y:i=0,width:s=1,height:a=1}={}){const{style:l}=e;l.top=`${100*i}%`,l.left=`${100*t}%`,l.width=`${100*s}%`,l.height=`${100*a}%`},sl=new WeakSet,Uv=function(e){var i;const t=Xt._svgFactory.create(1,1,!0);return u(this,xr).append(t),t.setAttribute("aria-hidden",!0),k(i=Xt,Sd,Bv).call(i,t,e),t},TS=function(e,t){const i=Xt._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const a=Xt._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),s},T(Xt,Sd);let zv=Xt;var fP=Pe.AbortException,pP=Pe.AnnotationEditorLayer,gP=Pe.AnnotationEditorParamsType,mP=Pe.AnnotationEditorType,yP=Pe.AnnotationEditorUIManager,vP=Pe.AnnotationLayer,_P=Pe.AnnotationMode,wP=Pe.ColorPicker,AP=Pe.DOMSVGFactory,EP=Pe.DrawLayer,bP=Pe.FeatureTest,SP=Pe.GlobalWorkerOptions,xP=Pe.ImageKind,CP=Pe.InvalidPDFException,kP=Pe.MissingPDFException,TP=Pe.OPS,PP=Pe.OutputScale,RP=Pe.PDFDataRangeTransport,LP=Pe.PDFDateString,MP=Pe.PDFWorker,IP=Pe.PasswordResponses,DP=Pe.PermissionFlag,OP=Pe.PixelsPerInch,FP=Pe.RenderingCancelledException,NP=Pe.TextLayer,jP=Pe.UnexpectedResponseException,HP=Pe.Util,zP=Pe.VerbosityLevel,BP=Pe.XfaLayer,UP=Pe.build,$P=Pe.createValidAbsoluteUrl,WP=Pe.fetchData,VP=Pe.getDocument,GP=Pe.getFilenameFromUrl,qP=Pe.getPdfFilenameFromUrl,XP=Pe.getXfaPageViewport,YP=Pe.isDataScheme,KP=Pe.isPdfFile,QP=Pe.noContextMenu,JP=Pe.normalizeUnicode,ZP=Pe.setLayerDimensions,eR=Pe.shadow,tR=Pe.version;const nR=Object.freeze(Object.defineProperty({__proto__:null,AbortException:fP,AnnotationEditorLayer:pP,AnnotationEditorParamsType:gP,AnnotationEditorType:mP,AnnotationEditorUIManager:yP,AnnotationLayer:vP,AnnotationMode:_P,ColorPicker:wP,DOMSVGFactory:AP,DrawLayer:EP,FeatureTest:bP,GlobalWorkerOptions:SP,ImageKind:xP,InvalidPDFException:CP,MissingPDFException:kP,OPS:TP,OutputScale:PP,PDFDataRangeTransport:RP,PDFDateString:LP,PDFWorker:MP,PasswordResponses:IP,PermissionFlag:DP,PixelsPerInch:OP,RenderingCancelledException:FP,TextLayer:NP,UnexpectedResponseException:jP,Util:HP,VerbosityLevel:zP,XfaLayer:BP,build:UP,createValidAbsoluteUrl:$P,fetchData:WP,getDocument:VP,getFilenameFromUrl:GP,getPdfFilenameFromUrl:qP,getXfaPageViewport:XP,isDataScheme:YP,isPdfFile:KP,noContextMenu:QP,normalizeUnicode:JP,setLayerDimensions:ZP,shadow:eR,version:tR},Symbol.toStringTag,{value:"Module"})),Ld=Mx(nR);var or={},Jf={},SA;function o0(){return SA||(SA=1,function(h){var e=Jf.__spreadArray||function(i,s,a){if(a||arguments.length===2)for(var l=0,c=s.length,d;l<c;l++)(d||!(l in s))&&(d||(d=Array.prototype.slice.call(s,0,l)),d[l]=s[l]);return i.concat(d||Array.prototype.slice.call(s))};Object.defineProperty(h,"__esModule",{value:!0}),h.allEvents=h.changeEvents=h.otherEvents=h.transitionEvents=h.animationEvents=h.wheelEvents=h.uiEvents=h.pointerEvents=h.touchEvents=h.selectionEvents=h.dragEvents=h.mouseEvents=h.mediaEvents=h.keyboardEvents=h.imageEvents=h.formEvents=h.focusEvents=h.compositionEvents=h.clipboardEvents=void 0,h.clipboardEvents=["onCopy","onCut","onPaste"],h.compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],h.focusEvents=["onFocus","onBlur"],h.formEvents=["onInput","onInvalid","onReset","onSubmit"],h.imageEvents=["onLoad","onError"],h.keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],h.mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],h.mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],h.dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],h.selectionEvents=["onSelect"],h.touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],h.pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],h.uiEvents=["onScroll"],h.wheelEvents=["onWheel"],h.animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],h.transitionEvents=["onTransitionEnd"],h.otherEvents=["onToggle"],h.changeEvents=["onChange"],h.allEvents=e(e(e(e(e(e(e(e(e(e(e(e(e(e(e(e(e(e([],h.clipboardEvents,!0),h.compositionEvents,!0),h.focusEvents,!0),h.formEvents,!0),h.imageEvents,!0),h.keyboardEvents,!0),h.mediaEvents,!0),h.mouseEvents,!0),h.dragEvents,!0),h.selectionEvents,!0),h.touchEvents,!0),h.pointerEvents,!0),h.uiEvents,!0),h.wheelEvents,!0),h.animationEvents,!0),h.transitionEvents,!0),h.changeEvents,!0),h.otherEvents,!0);function t(i,s){var a={};return h.allEvents.forEach(function(l){var c=i[l];c&&(s?a[l]=function(d){return c(d,s(l))}:a[l]=c)}),a}h.default=t}(Jf)),Jf}var Zf={},xA;function Gu(){if(xA)return Zf;xA=1,Object.defineProperty(Zf,"__esModule",{value:!0});function h(e){var t=!1,i=new Promise(function(s,a){e.then(function(l){return!t&&s(l)}).catch(function(l){return!t&&a(l)})});return{promise:i,cancel:function(){t=!0}}}return Zf.default=h,Zf}var ep={exports:{}},CA;function qu(){if(CA)return ep.exports;CA=1;function h(t){var i,s,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(i=0;i<l;i++)t[i]&&(s=h(t[i]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}function e(){for(var t,i,s=0,a="",l=arguments.length;s<l;s++)(t=arguments[s])&&(i=h(t))&&(a&&(a+=" "),a+=i);return a}return ep.exports=e,ep.exports.clsx=e,ep.exports}var wy,kA;function Ji(){if(kA)return wy;kA=1;var h="Invariant failed";function e(t,i){if(!t)throw new Error(h)}return wy=e,wy}var Ay,TA;function Da(){if(TA)return Ay;TA=1;var h=function(){};return Ay=h,Ay}var Ey={},PA;function iR(){if(PA)return Ey;PA=1;var h=Object.prototype.hasOwnProperty;function e(i,s,a){for(a of i.keys())if(t(a,s))return a}function t(i,s){var a,l,c;if(i===s)return!0;if(i&&s&&(a=i.constructor)===s.constructor){if(a===Date)return i.getTime()===s.getTime();if(a===RegExp)return i.toString()===s.toString();if(a===Array){if((l=i.length)===s.length)for(;l--&&t(i[l],s[l]););return l===-1}if(a===Set){if(i.size!==s.size)return!1;for(l of i)if(c=l,c&&typeof c=="object"&&(c=e(s,c),!c)||!s.has(c))return!1;return!0}if(a===Map){if(i.size!==s.size)return!1;for(l of i)if(c=l[0],c&&typeof c=="object"&&(c=e(s,c),!c)||!t(l[1],s.get(c)))return!1;return!0}if(a===ArrayBuffer)i=new Uint8Array(i),s=new Uint8Array(s);else if(a===DataView){if((l=i.byteLength)===s.byteLength)for(;l--&&i.getInt8(l)===s.getInt8(l););return l===-1}if(ArrayBuffer.isView(i)){if((l=i.byteLength)===s.byteLength)for(;l--&&i[l]===s[l];);return l===-1}if(!a||typeof i=="object"){l=0;for(a in i)if(h.call(i,a)&&++l&&!h.call(s,a)||!(a in s)||!t(i[a],s[a]))return!1;return Object.keys(s).length===l}}return i!==i&&s!==s}return Ey.dequal=t,Ey}var tp={},RA;function PS(){if(RA)return tp;RA=1,Object.defineProperty(tp,"__esModule",{value:!0});const e=(0,Dt().createContext)(null);return tp.default=e,tp}var np={},LA;function RS(){if(LA)return np;LA=1,Object.defineProperty(np,"__esModule",{value:!0}),np.default=e;const h=bi();function e({children:t,type:i}){return(0,h.jsx)("div",{className:`react-pdf__message react-pdf__message--${i}`,children:t})}return np}var jc={},MA;function rR(){if(MA)return jc;MA=1;var h=jc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(jc,"__esModule",{value:!0});const e=h(Ji()),t="noopener noreferrer nofollow";let i=class{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(a){this.pdfDocument=a}setViewer(a){this.pdfViewer=a}setExternalLinkRel(a){this.externalLinkRel=a}setExternalLinkTarget(a){this.externalLinkTarget=a}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return(0,e.default)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(a){(0,e.default)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=a}get rotation(){return 0}set rotation(a){}goToDestination(a){return new Promise(l=>{(0,e.default)(this.pdfDocument,"PDF document not loaded."),(0,e.default)(a,"Destination is not specified."),typeof a=="string"?this.pdfDocument.getDestination(a).then(l):Array.isArray(a)?l(a):a.then(l)}).then(l=>{(0,e.default)(Array.isArray(l),`"${l}" is not a valid destination array.`);const c=l[0];new Promise(d=>{(0,e.default)(this.pdfDocument,"PDF document not loaded."),c instanceof Object?this.pdfDocument.getPageIndex(c).then(p=>{d(p)}).catch(()=>{(0,e.default)(!1,`"${c}" is not a valid page reference.`)}):typeof c=="number"?d(c):(0,e.default)(!1,`"${c}" is not a valid destination reference.`)}).then(d=>{const p=d+1;(0,e.default)(this.pdfViewer,"PDF viewer is not initialized."),(0,e.default)(p>=1&&p<=this.pagesCount,`"${p}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:l,pageIndex:d,pageNumber:p})})})}navigateTo(a){this.goToDestination(a)}goToPage(a){const l=a-1;(0,e.default)(this.pdfViewer,"PDF viewer is not initialized."),(0,e.default)(a>=1&&a<=this.pagesCount,`"${a}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:l,pageNumber:a})}addLinkAttributes(a,l,c){a.href=l,a.rel=this.externalLinkRel||t,a.target=c?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}};return jc.default=i,jc}var ip={},IA;function LS(){if(IA)return ip;IA=1,Object.defineProperty(ip,"__esModule",{value:!0});const h={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};return ip.default=h,ip}var rp={},DA;function Tr(){return DA||(DA=1,function(h){var e=rp.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(h,"__esModule",{value:!0}),h.isLocalFileSystem=h.isBrowser=void 0,h.isDefined=s,h.isProvided=a,h.isString=l,h.isArrayBuffer=c,h.isBlob=d,h.isDataURI=p,h.dataURItoByteString=g,h.getDevicePixelRatio=y,h.displayCORSWarning=w,h.displayWorkerWarning=A,h.cancelRunningTask=E,h.makePageCallback=x,h.isCancelException=S,h.loadFromFile=R;const t=e(Ji()),i=e(Da());h.isBrowser=typeof window<"u",h.isLocalFileSystem=h.isBrowser&&window.location.protocol==="file:";function s(P){return typeof P<"u"}function a(P){return s(P)&&P!==null}function l(P){return typeof P=="string"}function c(P){return P instanceof ArrayBuffer}function d(P){return(0,t.default)(h.isBrowser,"isBlob can only be used in a browser environment"),P instanceof Blob}function p(P){return l(P)&&/^data:/.test(P)}function g(P){(0,t.default)(p(P),"Invalid data URI.");const[M="",N=""]=P.split(",");return M.split(";").indexOf("base64")!==-1?atob(N):unescape(N)}function y(){return h.isBrowser&&window.devicePixelRatio||1}const v="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function w(){(0,i.default)(!h.isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${v}`)}function A(){(0,i.default)(!h.isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${v}`)}function E(P){P!=null&&P.cancel&&P.cancel()}function x(P,M){return Object.defineProperty(P,"width",{get(){return this.view[2]*M},configurable:!0}),Object.defineProperty(P,"height",{get(){return this.view[3]*M},configurable:!0}),Object.defineProperty(P,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(P,"originalHeight",{get(){return this.view[3]},configurable:!0}),P}function S(P){return P.name==="RenderingCancelledException"}function R(P){return new Promise((M,N)=>{const F=new FileReader;F.onload=()=>{if(!F.result)return N(new Error("Error while reading a file."));M(F.result)},F.onerror=H=>{if(!H.target)return N(new Error("Error while reading a file."));const{error:V}=H.target;if(!V)return N(new Error("Error while reading a file."));switch(V.code){case V.NOT_FOUND_ERR:return N(new Error("Error while reading a file: File not found."));case V.SECURITY_ERR:return N(new Error("Error while reading a file: Security error."));case V.ABORT_ERR:return N(new Error("Error while reading a file: Aborted."));default:return N(new Error("Error while reading a file."))}},F.readAsArrayBuffer(P)})}}(rp)),rp}var sp={},OA;function Xu(){if(OA)return sp;OA=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.default=t;const h=Dt();function e(i,s){switch(s.type){case"RESOLVE":return{value:s.value,error:void 0};case"REJECT":return{value:!1,error:s.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function t(){return(0,h.useReducer)(e,{value:void 0,error:void 0})}return sp}var FA;function sR(){if(FA)return or;FA=1;var h=or.__createBinding||(Object.create?function(B,Y,X,ie){ie===void 0&&(ie=X);var ne=Object.getOwnPropertyDescriptor(Y,X);(!ne||("get"in ne?!Y.__esModule:ne.writable||ne.configurable))&&(ne={enumerable:!0,get:function(){return Y[X]}}),Object.defineProperty(B,ie,ne)}:function(B,Y,X,ie){ie===void 0&&(ie=X),B[ie]=Y[X]}),e=or.__setModuleDefault||(Object.create?function(B,Y){Object.defineProperty(B,"default",{enumerable:!0,value:Y})}:function(B,Y){B.default=Y}),t=or.__importStar||function(B){if(B&&B.__esModule)return B;var Y={};if(B!=null)for(var X in B)X!=="default"&&Object.prototype.hasOwnProperty.call(B,X)&&h(Y,B,X);return e(Y,B),Y},i=or.__awaiter||function(B,Y,X,ie){function ne(pe){return pe instanceof X?pe:new X(function(de){de(pe)})}return new(X||(X=Promise))(function(pe,de){function ue(ee){try{$(ie.next(ee))}catch(Q){de(Q)}}function G(ee){try{$(ie.throw(ee))}catch(Q){de(Q)}}function $(ee){ee.done?pe(ee.value):ne(ee.value).then(ue,G)}$((ie=ie.apply(B,Y||[])).next())})},s=or.__rest||function(B,Y){var X={};for(var ie in B)Object.prototype.hasOwnProperty.call(B,ie)&&Y.indexOf(ie)<0&&(X[ie]=B[ie]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ne=0,ie=Object.getOwnPropertySymbols(B);ne<ie.length;ne++)Y.indexOf(ie[ne])<0&&Object.prototype.propertyIsEnumerable.call(B,ie[ne])&&(X[ie[ne]]=B[ie[ne]]);return X},a=or.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(or,"__esModule",{value:!0});const l=bi(),c=Dt(),d=a(o0()),p=a(Gu()),g=a(qu()),y=a(Ji()),v=a(Da()),w=iR(),A=t(Ld),E=a(PS()),x=a(RS()),S=a(rR()),R=a(LS()),P=Tr(),M=a(Xu()),{PDFDataRangeTransport:N}=A,F=(B,Y)=>{switch(Y){case R.default.NEED_PASSWORD:{const X=prompt("Enter the password to open this PDF file.");B(X);break}case R.default.INCORRECT_PASSWORD:{const X=prompt("Invalid password. Please try again.");B(X);break}}};function H(B){return typeof B=="object"&&B!==null&&("data"in B||"range"in B||"url"in B)}const V=(0,c.forwardRef)(function(Y,X){var{children:ie,className:ne,error:pe="Failed to load PDF file.",externalLinkRel:de,externalLinkTarget:ue,file:G,inputRef:$,imageResourcesPath:ee,loading:Q="Loading PDF",noData:D="No PDF file specified.",onItemClick:W,onLoadError:re,onLoadProgress:fe,onLoadSuccess:we,onPassword:ge=F,onSourceError:ce,onSourceSuccess:xe,options:Te,renderMode:rt,rotate:jn}=Y,Hn=s(Y,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[Si,dn]=(0,M.default)(),{value:xt,error:si}=Si,[Sn,xi]=(0,M.default)(),{value:wt,error:ai}=Sn,fn=(0,c.useRef)(new S.default),zn=(0,c.useRef)([]),Zi=(0,c.useRef)(void 0),Ci=(0,c.useRef)(void 0);G&&G!==Zi.current&&H(G)&&((0,v.default)(!(0,w.dequal)(G,Zi.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Zi.current=G),Te&&Te!==Ci.current&&((0,v.default)(!(0,w.dequal)(Te,Ci.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Ci.current=Te);const Pr=(0,c.useRef)({scrollPageIntoView:gt=>{const{dest:Vt,pageNumber:pn,pageIndex:Ot=pn-1}=gt;if(W){W({dest:Vt,pageIndex:Ot,pageNumber:pn});return}const Un=zn.current[Ot];if(Un){Un.scrollIntoView();return}(0,v.default)(!1,`An internal link leading to page ${pn} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});(0,c.useImperativeHandle)(X,()=>({linkService:fn,pages:zn,viewer:Pr}),[]);function Rr(){xe&&xe()}function xs(){si&&((0,v.default)(!1,si.toString()),ce&&ce(si))}function Cs(){dn({type:"RESET"})}(0,c.useEffect)(Cs,[G,dn]);const ki=(0,c.useCallback)(()=>i(this,void 0,void 0,function*(){if(!G)return null;if(typeof G=="string")return(0,P.isDataURI)(G)?{data:(0,P.dataURItoByteString)(G)}:((0,P.displayCORSWarning)(),{url:G});if(G instanceof N)return{range:G};if((0,P.isArrayBuffer)(G))return{data:G};if(P.isBrowser&&(0,P.isBlob)(G))return{data:yield(0,P.loadFromFile)(G)};if((0,y.default)(typeof G=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),(0,y.default)(H(G),"Invalid parameter object: need either .data, .range or .url"),"url"in G&&typeof G.url=="string"){if((0,P.isDataURI)(G.url)){const{url:gt}=G,Vt=s(G,["url"]),pn=(0,P.dataURItoByteString)(gt);return Object.assign({data:pn},Vt)}(0,P.displayCORSWarning)()}return G}),[G]);(0,c.useEffect)(()=>{const gt=(0,p.default)(ki());return gt.promise.then(Vt=>{dn({type:"RESOLVE",value:Vt})}).catch(Vt=>{dn({type:"REJECT",error:Vt})}),()=>{(0,P.cancelRunningTask)(gt)}},[ki,dn]),(0,c.useEffect)(()=>{if(!(typeof xt>"u")){if(xt===!1){xs();return}Rr()}},[xt]);function qe(){wt&&(we&&we(wt),zn.current=new Array(wt.numPages),fn.current.setDocument(wt))}function Ti(){ai&&((0,v.default)(!1,ai.toString()),re&&re(ai))}(0,c.useEffect)(function(){xi({type:"RESET"})},[xi,xt]),(0,c.useEffect)(function(){if(!xt)return;const Vt=Te?Object.assign(Object.assign({},xt),Te):xt,pn=A.getDocument(Vt);fe&&(pn.onProgress=fe),ge&&(pn.onPassword=ge);const Ot=pn,Un=Ot.promise.then(Ts=>{xi({type:"RESOLVE",value:Ts})}).catch(Ts=>{Ot.destroyed||xi({type:"REJECT",error:Ts})});return()=>{Un.finally(()=>Ot.destroy())}},[Te,xi,xt]),(0,c.useEffect)(()=>{if(!(typeof wt>"u")){if(wt===!1){Ti();return}qe()}},[wt]),(0,c.useEffect)(function(){fn.current.setViewer(Pr.current),fn.current.setExternalLinkRel(de),fn.current.setExternalLinkTarget(ue)},[de,ue]);const ks=(0,c.useCallback)((gt,Vt)=>{zn.current[gt]=Vt},[]),Zt=(0,c.useCallback)(gt=>{delete zn.current[gt]},[]),Bn=(0,c.useMemo)(()=>({imageResourcesPath:ee,linkService:fn.current,onItemClick:W,pdf:wt,registerPage:ks,renderMode:rt,rotate:jn,unregisterPage:Zt}),[ee,W,wt,ks,rt,jn,Zt]),er=(0,c.useMemo)(()=>(0,d.default)(Hn,()=>wt),[Hn,wt]);function Wt(){return(0,l.jsx)(E.default.Provider,{value:Bn,children:ie})}function Oa(){return G?wt==null?(0,l.jsx)(x.default,{type:"loading",children:typeof Q=="function"?Q():Q}):wt===!1?(0,l.jsx)(x.default,{type:"error",children:typeof pe=="function"?pe():pe}):Wt():(0,l.jsx)(x.default,{type:"no-data",children:typeof D=="function"?D():D})}return(0,l.jsx)("div",Object.assign({className:(0,g.default)("react-pdf__Document",ne),ref:$,style:{"--scale-factor":"1"}},er,{children:Oa()}))});return or.default=V,or}var Ml={},ap={},NA;function MS(){if(NA)return ap;NA=1,Object.defineProperty(ap,"__esModule",{value:!0});const e=(0,Dt().createContext)(null);return ap.default=e,ap}var Ka={},op={},jA;function aR(){if(jA)return op;jA=1,Object.defineProperty(op,"__esModule",{value:!0});let h=class{constructor({num:t,gen:i}){this.num=t,this.gen=i}toString(){let t=`${this.num}R`;return this.gen!==0&&(t+=this.gen),t}};return op.default=h,op}var lp={},HA;function oR(){if(HA)return lp;HA=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.default=t;const h=Dt(),e=Tr();function t(i){const s=(0,h.useRef)(void 0),a=s.current;return(0,e.isDefined)(a)?()=>a:()=>{const l=i();return s.current=l,l}}return lp}var Hc={},zA;function Yu(){if(zA)return Hc;zA=1;var h=Hc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.default=i;const e=Dt(),t=h(PS());function i(){return(0,e.useContext)(t.default)}return Hc}var zc={},BA;function IS(){if(BA)return zc;BA=1;var h=zc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(zc,"__esModule",{value:!0}),zc.default=i;const e=Dt(),t=h(MS());function i(){return(0,e.useContext)(t.default)}return zc}var UA;function lR(){if(UA)return Ka;UA=1;var h=Ka.__awaiter||function(g,y,v,w){function A(E){return E instanceof v?E:new v(function(x){x(E)})}return new(v||(v=Promise))(function(E,x){function S(M){try{P(w.next(M))}catch(N){x(N)}}function R(M){try{P(w.throw(M))}catch(N){x(N)}}function P(M){M.done?E(M.value):A(M.value).then(S,R)}P((w=w.apply(g,y||[])).next())})},e=Ka.__rest||function(g,y){var v={};for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&y.indexOf(w)<0&&(v[w]=g[w]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,w=Object.getOwnPropertySymbols(g);A<w.length;A++)y.indexOf(w[A])<0&&Object.prototype.propertyIsEnumerable.call(g,w[A])&&(v[w[A]]=g[w[A]]);return v},t=Ka.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.default=p;const i=bi(),s=t(Ji()),a=t(aR()),l=t(oR()),c=t(Yu()),d=t(IS());function p(g){const y=(0,c.default)(),v=(0,d.default)();(0,s.default)(v,"Unable to find Outline context.");const w=Object.assign(Object.assign(Object.assign({},y),v),g),{item:A,linkService:E,onItemClick:x,pdf:S}=w,R=e(w,["item","linkService","onItemClick","pdf"]);(0,s.default)(S,"Attempted to load an outline, but no document was specified. Wrap <Outline /> in a <Document /> or pass explicit `pdf` prop.");const P=(0,l.default)(()=>typeof A.dest=="string"?S.getDestination(A.dest):A.dest),M=(0,l.default)(()=>h(this,void 0,void 0,function*(){const V=yield P();if(!V)throw new Error("Destination not found.");const[B]=V;return S.getPageIndex(new a.default(B))})),N=(0,l.default)(()=>h(this,void 0,void 0,function*(){return(yield M())+1}));function F(V){V.preventDefault(),(0,s.default)(x||E,"Either onItemClick callback or linkService must be defined in order to navigate to an outline item."),x?Promise.all([P(),M(),N()]).then(([B,Y,X])=>{x({dest:B,pageIndex:Y,pageNumber:X})}):E&&E.goToDestination(A.dest)}function H(){if(!A.items||!A.items.length)return null;const{items:V}=A;return(0,i.jsx)("ul",{children:V.map((B,Y)=>(0,i.jsx)(p,Object.assign({item:B,pdf:S},R),typeof B.dest=="string"?B.dest:Y))})}return(0,i.jsxs)("li",{children:[(0,i.jsx)("a",{href:"#",onClick:F,children:A.title}),H()]})}return Ka}var $A;function uR(){if($A)return Ml;$A=1;var h=Ml.__rest||function(E,x){var S={};for(var R in E)Object.prototype.hasOwnProperty.call(E,R)&&x.indexOf(R)<0&&(S[R]=E[R]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,R=Object.getOwnPropertySymbols(E);P<R.length;P++)x.indexOf(R[P])<0&&Object.prototype.propertyIsEnumerable.call(E,R[P])&&(S[R[P]]=E[R[P]]);return S},e=Ml.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.default=A;const t=bi(),i=Dt(),s=e(Gu()),a=e(o0()),l=e(qu()),c=e(Ji()),d=e(Da()),p=e(MS()),g=e(lR()),y=Tr(),v=e(Yu()),w=e(Xu());function A(E){const x=(0,v.default)(),S=Object.assign(Object.assign({},x),E),{className:R,inputRef:P,onItemClick:M,onLoadError:N,onLoadSuccess:F,pdf:H}=S,V=h(S,["className","inputRef","onItemClick","onLoadError","onLoadSuccess","pdf"]);(0,c.default)(H,"Attempted to load an outline, but no document was specified. Wrap <Outline /> in a <Document /> or pass explicit `pdf` prop.");const[B,Y]=(0,w.default)(),{value:X,error:ie}=B;function ne(){typeof X>"u"||X===!1||F&&F(X)}function pe(){ie&&((0,d.default)(!1,ie.toString()),N&&N(ie))}(0,i.useEffect)(function(){Y({type:"RESET"})},[Y,H]),(0,i.useEffect)(function(){if(!H)return;const ee=(0,s.default)(H.getOutline()),Q=ee;return ee.promise.then(D=>{Y({type:"RESOLVE",value:D})}).catch(D=>{Y({type:"REJECT",error:D})}),()=>(0,y.cancelRunningTask)(Q)},[Y,H]),(0,i.useEffect)(()=>{if(X!==void 0){if(X===!1){pe();return}ne()}},[X]);const de=(0,i.useMemo)(()=>({onItemClick:M}),[M]),ue=(0,i.useMemo)(()=>(0,a.default)(V,()=>X),[V,X]);if(!X)return null;function G(){return X?(0,t.jsx)("ul",{children:X.map(($,ee)=>(0,t.jsx)(g.default,{item:$,pdf:H},typeof $.dest=="string"?$.dest:ee))}):null}return(0,t.jsx)("div",Object.assign({className:(0,l.default)("react-pdf__Outline",R),ref:P},ue,{children:(0,t.jsx)(p.default.Provider,{value:de,children:G()})}))}return Ml}var Il={},up={},WA;function DS(){if(WA)return up;WA=1,Object.defineProperty(up,"__esModule",{value:!0});function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e.filter(Boolean);if(i.length<=1){var s=i[0];return s||null}return function(l){i.forEach(function(c){typeof c=="function"?c(l):c&&(c.current=l)})}}return up.default=h,up}var cp={},VA;function OS(){if(VA)return cp;VA=1,Object.defineProperty(cp,"__esModule",{value:!0});const e=(0,Dt().createContext)(null);return cp.default=e,cp}var Ys={},Bc={},hp={},$r={},Qa={},GA;function cR(){return GA||(GA=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.HEADING_PATTERN=Qa.PDF_ROLE_TO_HTML_ROLE=void 0,Qa.PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Qa.HEADING_PATTERN=/^H(\d+)$/),Qa}var qA;function hR(){if(qA)return $r;qA=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.isPdfRole=e,$r.isStructTreeNode=t,$r.isStructTreeNodeWithOnlyContentChild=i,$r.getRoleAttributes=s,$r.getBaseAttributes=a,$r.getAttributes=l;const h=cR();function e(c){return c in h.PDF_ROLE_TO_HTML_ROLE}function t(c){return"children"in c}function i(c){return t(c)?c.children.length===1&&0 in c.children&&"id"in c.children[0]:!1}function s(c){const d={};if(t(c)){const{role:p}=c,g=p.match(h.HEADING_PATTERN);if(g)d.role="heading",d["aria-level"]=Number(g[1]);else if(e(p)){const y=h.PDF_ROLE_TO_HTML_ROLE[p];y&&(d.role=y)}}return d}function a(c){const d={};if(t(c)){if(c.alt!==void 0&&(d["aria-label"]=c.alt),c.lang!==void 0&&(d.lang=c.lang),i(c)){const[p]=c.children;if(p){const g=a(p);return Object.assign(Object.assign({},d),g)}}}else"id"in c&&(d["aria-owns"]=c.id);return d}function l(c){return c?Object.assign(Object.assign({},s(c)),a(c)):null}return $r}var XA;function dR(){if(XA)return hp;XA=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.default=i;const h=bi(),e=Dt(),t=hR();function i({className:s,node:a}){const l=(0,e.useMemo)(()=>(0,t.getAttributes)(a),[a]),c=(0,e.useMemo)(()=>!(0,t.isStructTreeNode)(a)||(0,t.isStructTreeNodeWithOnlyContentChild)(a)?null:a.children.map((d,p)=>(0,h.jsx)(i,{node:d},p)),[a]);return(0,h.jsx)("span",Object.assign({className:s},l,{children:c}))}return hp}var Uc={},YA;function Md(){if(YA)return Uc;YA=1;var h=Uc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.default=i;const e=Dt(),t=h(OS());function i(){return(0,e.useContext)(t.default)}return Uc}var KA;function fR(){if(KA)return Bc;KA=1;var h=Bc.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.default=g;const e=bi(),t=Dt(),i=h(Gu()),s=h(Ji()),a=h(Da()),l=h(dR()),c=h(Md()),d=h(Xu()),p=Tr();function g(){const y=(0,c.default)();(0,s.default)(y,"Unable to find Page context.");const{onGetStructTreeError:v,onGetStructTreeSuccess:w}=y,[A,E]=(0,d.default)(),{value:x,error:S}=A,{customTextRenderer:R,page:P}=y;function M(){x&&w&&w(x)}function N(){S&&((0,a.default)(!1,S.toString()),v&&v(S))}return(0,t.useEffect)(function(){E({type:"RESET"})},[E,P]),(0,t.useEffect)(function(){if(R||!P)return;const H=(0,i.default)(P.getStructTree()),V=H;return H.promise.then(B=>{E({type:"RESOLVE",value:B})}).catch(B=>{E({type:"REJECT",error:B})}),()=>(0,p.cancelRunningTask)(V)},[R,P,E]),(0,t.useEffect)(()=>{if(x!==void 0){if(x===!1){N();return}M()}},[x]),x?(0,e.jsx)(l.default,{className:"react-pdf__Page__structTree structTree",node:x}):null}return Bc}var QA;function pR(){if(QA)return Ys;QA=1;var h=Ys.__createBinding||(Object.create?function(E,x,S,R){R===void 0&&(R=S);var P=Object.getOwnPropertyDescriptor(x,S);(!P||("get"in P?!x.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return x[S]}}),Object.defineProperty(E,R,P)}:function(E,x,S,R){R===void 0&&(R=S),E[R]=x[S]}),e=Ys.__setModuleDefault||(Object.create?function(E,x){Object.defineProperty(E,"default",{enumerable:!0,value:x})}:function(E,x){E.default=x}),t=Ys.__importStar||function(E){if(E&&E.__esModule)return E;var x={};if(E!=null)for(var S in E)S!=="default"&&Object.prototype.hasOwnProperty.call(E,S)&&h(x,E,S);return e(x,E),x},i=Ys.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.default=A;const s=bi(),a=Dt(),l=i(DS()),c=i(Ji()),d=i(Da()),p=t(Ld),g=i(fR()),y=i(Md()),v=Tr(),w=p.AnnotationMode;function A(E){const x=(0,y.default)();(0,c.default)(x,"Unable to find Page context.");const S=Object.assign(Object.assign({},x),E),{_className:R,canvasBackground:P,devicePixelRatio:M=(0,v.getDevicePixelRatio)(),onRenderError:N,onRenderSuccess:F,page:H,renderForms:V,renderTextLayer:B,rotate:Y,scale:X}=S,{canvasRef:ie}=E;(0,c.default)(H,"Attempted to render page canvas, but no page was specified.");const ne=(0,a.useRef)(null);function pe(){H&&F&&F((0,v.makePageCallback)(H,X))}function de(ee){(0,v.isCancelException)(ee)||((0,d.default)(!1,ee.toString()),N&&N(ee))}const ue=(0,a.useMemo)(()=>H.getViewport({scale:X*M,rotation:Y}),[M,H,Y,X]),G=(0,a.useMemo)(()=>H.getViewport({scale:X,rotation:Y}),[H,Y,X]);(0,a.useEffect)(function(){if(!H)return;H.cleanup();const{current:Q}=ne;if(!Q)return;Q.width=ue.width,Q.height=ue.height,Q.style.width=`${Math.floor(G.width)}px`,Q.style.height=`${Math.floor(G.height)}px`,Q.style.visibility="hidden";const D={annotationMode:V?w.ENABLE_FORMS:w.ENABLE,canvasContext:Q.getContext("2d",{alpha:!1}),viewport:ue};P&&(D.background=P);const W=H.render(D),re=W;return W.promise.then(()=>{Q.style.visibility="",pe()}).catch(de),()=>(0,v.cancelRunningTask)(re)},[P,H,V,ue,G]);const $=(0,a.useCallback)(()=>{const{current:ee}=ne;ee&&(ee.width=0,ee.height=0)},[]);return(0,a.useEffect)(()=>$,[$]),(0,s.jsx)("canvas",{className:`${R}__canvas`,dir:"ltr",ref:(0,l.default)(ie,ne),style:{display:"block",userSelect:"none"},children:B?(0,s.jsx)(g.default,{}):null})}return Ys}var Ks={},JA;function gR(){if(JA)return Ks;JA=1;var h=Ks.__createBinding||(Object.create?function(x,S,R,P){P===void 0&&(P=R);var M=Object.getOwnPropertyDescriptor(S,R);(!M||("get"in M?!S.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return S[R]}}),Object.defineProperty(x,P,M)}:function(x,S,R,P){P===void 0&&(P=R),x[P]=S[R]}),e=Ks.__setModuleDefault||(Object.create?function(x,S){Object.defineProperty(x,"default",{enumerable:!0,value:S})}:function(x,S){x.default=S}),t=Ks.__importStar||function(x){if(x&&x.__esModule)return x;var S={};if(x!=null)for(var R in x)R!=="default"&&Object.prototype.hasOwnProperty.call(x,R)&&h(S,x,R);return e(S,x),S},i=Ks.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.default=E;const s=bi(),a=Dt(),l=i(Gu()),c=i(qu()),d=i(Ji()),p=i(Da()),g=t(Ld),y=i(Md()),v=i(Xu()),w=Tr();function A(x){return"str"in x}function E(){const x=(0,y.default)();(0,d.default)(x,"Unable to find Page context.");const{customTextRenderer:S,onGetTextError:R,onGetTextSuccess:P,onRenderTextLayerError:M,onRenderTextLayerSuccess:N,page:F,pageIndex:H,pageNumber:V,rotate:B,scale:Y}=x;(0,d.default)(F,"Attempted to load page text content, but no page was specified.");const[X,ie]=(0,v.default)(),{value:ne,error:pe}=X,de=(0,a.useRef)(null);(0,p.default)(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function ue(){ne&&P&&P(ne)}function G(){pe&&((0,p.default)(!1,pe.toString()),R&&R(pe))}(0,a.useEffect)(function(){ie({type:"RESET"})},[F,ie]),(0,a.useEffect)(function(){if(!F)return;const fe=(0,l.default)(F.getTextContent()),we=fe;return fe.promise.then(ge=>{ie({type:"RESOLVE",value:ge})}).catch(ge=>{ie({type:"REJECT",error:ge})}),()=>(0,w.cancelRunningTask)(we)},[F,ie]),(0,a.useEffect)(()=>{if(ne!==void 0){if(ne===!1){G();return}ue()}},[ne]);const $=(0,a.useCallback)(()=>{N&&N()},[N]),ee=(0,a.useCallback)(re=>{(0,p.default)(!1,re.toString()),M&&M(re)},[M]);function Q(){const re=de.current;re&&re.classList.add("selecting")}function D(){const re=de.current;re&&re.classList.remove("selecting")}const W=(0,a.useMemo)(()=>F.getViewport({scale:Y,rotation:B}),[F,B,Y]);return(0,a.useLayoutEffect)(function(){if(!F||!ne)return;const{current:fe}=de;if(!fe)return;fe.innerHTML="";const we=F.streamTextContent({includeMarkedContent:!0}),ge={container:fe,textContentSource:we,viewport:W},ce=new g.TextLayer(ge),xe=ce;return ce.render().then(()=>{const Te=document.createElement("div");Te.className="endOfContent",fe.append(Te);const rt=fe.querySelectorAll('[role="presentation"]');if(S){let jn=0;ne.items.forEach((Hn,Si)=>{if(!A(Hn))return;const dn=rt[jn];if(!dn)return;const xt=S(Object.assign({pageIndex:H,pageNumber:V,itemIndex:Si},Hn));dn.innerHTML=xt,jn+=Hn.str&&Hn.hasEOL?2:1})}$()}).catch(ee),()=>(0,w.cancelRunningTask)(xe)},[S,ee,$,F,H,V,ne,W]),(0,s.jsx)("div",{className:(0,c.default)("react-pdf__Page__textContent","textLayer"),onMouseUp:D,onMouseDown:Q,ref:de})}return Ks}var Qs={},ZA;function mR(){if(ZA)return Qs;ZA=1;var h=Qs.__createBinding||(Object.create?function(x,S,R,P){P===void 0&&(P=R);var M=Object.getOwnPropertyDescriptor(S,R);(!M||("get"in M?!S.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return S[R]}}),Object.defineProperty(x,P,M)}:function(x,S,R,P){P===void 0&&(P=R),x[P]=S[R]}),e=Qs.__setModuleDefault||(Object.create?function(x,S){Object.defineProperty(x,"default",{enumerable:!0,value:S})}:function(x,S){x.default=S}),t=Qs.__importStar||function(x){if(x&&x.__esModule)return x;var S={};if(x!=null)for(var R in x)R!=="default"&&Object.prototype.hasOwnProperty.call(x,R)&&h(S,x,R);return e(S,x),S},i=Qs.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.default=E;const s=bi(),a=Dt(),l=i(Gu()),c=i(qu()),d=i(Ji()),p=i(Da()),g=t(Ld),y=i(Yu()),v=i(Md()),w=i(Xu()),A=Tr();function E(){const x=(0,y.default)(),S=(0,v.default)();(0,d.default)(S,"Unable to find Page context.");const R=Object.assign(Object.assign({},x),S),{imageResourcesPath:P,linkService:M,onGetAnnotationsError:N,onGetAnnotationsSuccess:F,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:V,page:B,pdf:Y,renderForms:X,rotate:ie,scale:ne=1}=R;(0,d.default)(Y,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),(0,d.default)(B,"Attempted to load page annotations, but no page was specified."),(0,d.default)(M,"Attempted to load page annotations, but no linkService was specified.");const[pe,de]=(0,w.default)(),{value:ue,error:G}=pe,$=(0,a.useRef)(null);(0,p.default)(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function ee(){ue&&F&&F(ue)}function Q(){G&&((0,p.default)(!1,G.toString()),N&&N(G))}(0,a.useEffect)(function(){de({type:"RESET"})},[de,B]),(0,a.useEffect)(function(){if(!B)return;const we=(0,l.default)(B.getAnnotations()),ge=we;return we.promise.then(ce=>{de({type:"RESOLVE",value:ce})}).catch(ce=>{de({type:"REJECT",error:ce})}),()=>{(0,A.cancelRunningTask)(ge)}},[de,B]),(0,a.useEffect)(()=>{if(ue!==void 0){if(ue===!1){Q();return}ee()}},[ue]);function D(){V&&V()}function W(fe){(0,p.default)(!1,`${fe}`),H&&H(fe)}const re=(0,a.useMemo)(()=>B.getViewport({scale:ne,rotation:ie}),[B,ie,ne]);return(0,a.useEffect)(function(){if(!Y||!B||!M||!ue)return;const{current:we}=$;if(!we)return;const ge=re.clone({dontFlip:!0}),ce={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:we,l10n:null,page:B,structTreeLayer:null,viewport:ge},xe={annotations:ue,annotationStorage:Y.annotationStorage,div:we,imageResourcesPath:P,linkService:M,page:B,renderForms:X,viewport:ge};we.innerHTML="";try{new g.AnnotationLayer(ce).render(xe),D()}catch(Te){W(Te)}return()=>{}},[ue,P,M,B,Y,X,re]),(0,s.jsx)("div",{className:(0,c.default)("react-pdf__Page__annotations","annotationLayer"),ref:$})}return Qs}var eE;function FS(){if(eE)return Il;eE=1;var h=Il.__rest||function(M,N){var F={};for(var H in M)Object.prototype.hasOwnProperty.call(M,H)&&N.indexOf(H)<0&&(F[H]=M[H]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var V=0,H=Object.getOwnPropertySymbols(M);V<H.length;V++)N.indexOf(H[V])<0&&Object.prototype.propertyIsEnumerable.call(M,H[V])&&(F[H[V]]=M[H[V]]);return F},e=Il.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(Il,"__esModule",{value:!0}),Il.default=P;const t=bi(),i=Dt(),s=e(Gu()),a=e(o0()),l=e(qu()),c=e(DS()),d=e(Ji()),p=e(Da()),g=e(OS()),y=e(RS()),v=e(pR()),w=e(gR()),A=e(mR()),E=Tr(),x=e(Yu()),S=e(Xu()),R=1;function P(M){const N=(0,x.default)(),F=Object.assign(Object.assign({},N),M),{_className:H="react-pdf__Page",_enableRegisterUnregisterPage:V=!0,canvasBackground:B,canvasRef:Y,children:X,className:ie,customRenderer:ne,customTextRenderer:pe,devicePixelRatio:de,error:ue="Failed to load the page.",height:G,inputRef:$,loading:ee="Loading page",noData:Q="No page specified.",onGetAnnotationsError:D,onGetAnnotationsSuccess:W,onGetStructTreeError:re,onGetStructTreeSuccess:fe,onGetTextError:we,onGetTextSuccess:ge,onLoadError:ce,onLoadSuccess:xe,onRenderAnnotationLayerError:Te,onRenderAnnotationLayerSuccess:rt,onRenderError:jn,onRenderSuccess:Hn,onRenderTextLayerError:Si,onRenderTextLayerSuccess:dn,pageIndex:xt,pageNumber:si,pdf:Sn,registerPage:xi,renderAnnotationLayer:wt=!0,renderForms:ai=!1,renderMode:fn="canvas",renderTextLayer:zn=!0,rotate:Zi,scale:Ci=R,unregisterPage:Pr,width:Rr}=F,xs=h(F,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Cs,ki]=(0,S.default)(),{value:qe,error:Ti}=Cs,ks=(0,i.useRef)(null);(0,d.default)(Sn,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Zt=(0,E.isProvided)(si)?si-1:xt??null,Bn=si??((0,E.isProvided)(xt)?xt+1:null),er=Zi??(qe?qe.rotate:null),Wt=(0,i.useMemo)(()=>{if(!qe)return null;let Lr=1;const Ps=Ci??R;if(Rr||G){const Fa=qe.getViewport({scale:1,rotation:er});Rr?Lr=Rr/Fa.width:G&&(Lr=G/Fa.height)}return Ps*Lr},[G,qe,er,Ci,Rr]);(0,i.useEffect)(function(){return()=>{(0,E.isProvided)(Zt)&&V&&Pr&&Pr(Zt)}},[V,Sn,Zt,Pr]);function Oa(){if(xe){if(!qe||!Wt)return;xe((0,E.makePageCallback)(qe,Wt))}if(V&&xi){if(!(0,E.isProvided)(Zt)||!ks.current)return;xi(Zt,ks.current)}}function gt(){Ti&&((0,p.default)(!1,Ti.toString()),ce&&ce(Ti))}(0,i.useEffect)(function(){ki({type:"RESET"})},[ki,Sn,Zt]),(0,i.useEffect)(function(){if(!Sn||!Bn)return;const Ps=(0,s.default)(Sn.getPage(Bn)),Fa=Ps;return Ps.promise.then(Mr=>{ki({type:"RESOLVE",value:Mr})}).catch(Mr=>{ki({type:"REJECT",error:Mr})}),()=>(0,E.cancelRunningTask)(Fa)},[ki,Sn,Bn]),(0,i.useEffect)(()=>{if(qe!==void 0){if(qe===!1){gt();return}Oa()}},[qe,Wt]);const Vt=(0,i.useMemo)(()=>qe&&(0,E.isProvided)(Zt)&&Bn&&(0,E.isProvided)(er)&&(0,E.isProvided)(Wt)?{_className:H,canvasBackground:B,customTextRenderer:pe,devicePixelRatio:de,onGetAnnotationsError:D,onGetAnnotationsSuccess:W,onGetStructTreeError:re,onGetStructTreeSuccess:fe,onGetTextError:we,onGetTextSuccess:ge,onRenderAnnotationLayerError:Te,onRenderAnnotationLayerSuccess:rt,onRenderError:jn,onRenderSuccess:Hn,onRenderTextLayerError:Si,onRenderTextLayerSuccess:dn,page:qe,pageIndex:Zt,pageNumber:Bn,renderForms:ai,renderTextLayer:zn,rotate:er,scale:Wt}:null,[H,B,pe,de,D,W,re,fe,we,ge,Te,rt,jn,Hn,Si,dn,qe,Zt,Bn,ai,zn,er,Wt]),pn=(0,i.useMemo)(()=>(0,a.default)(xs,()=>qe&&(Wt?(0,E.makePageCallback)(qe,Wt):void 0)),[xs,qe,Wt]),Ot=`${Zt}@${Wt}/${er}`;function Un(){switch(fn){case"custom":return(0,d.default)(ne,'renderMode was set to "custom", but no customRenderer was passed.'),(0,t.jsx)(ne,{},`${Ot}_custom`);case"none":return null;case"canvas":default:return(0,t.jsx)(v.default,{canvasRef:Y},`${Ot}_canvas`)}}function Ts(){return zn?(0,t.jsx)(w.default,{},`${Ot}_text`):null}function Id(){return wt?(0,t.jsx)(A.default,{},`${Ot}_annotations`):null}function Dd(){return(0,t.jsxs)(g.default.Provider,{value:Vt,children:[Un(),Ts(),Id(),X]})}function Od(){return Bn?Sn===null||qe===void 0||qe===null?(0,t.jsx)(y.default,{type:"loading",children:typeof ee=="function"?ee():ee}):Sn===!1||qe===!1?(0,t.jsx)(y.default,{type:"error",children:typeof ue=="function"?ue():ue}):Dd():(0,t.jsx)(y.default,{type:"no-data",children:typeof Q=="function"?Q():Q})}return(0,t.jsx)("div",Object.assign({className:(0,l.default)(H,ie),"data-page-number":Bn,ref:(0,c.default)($,ks),style:{"--scale-factor":`${Wt}`,backgroundColor:B||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},pn,{children:Od()}))}return Il}var Dl={},tE;function yR(){if(tE)return Dl;tE=1;var h=Dl.__rest||function(p,g){var y={};for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&g.indexOf(v)<0&&(y[v]=p[v]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,v=Object.getOwnPropertySymbols(p);w<v.length;w++)g.indexOf(v[w])<0&&Object.prototype.propertyIsEnumerable.call(p,v[w])&&(y[v[w]]=p[v[w]]);return y},e=Dl.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.default=d;const t=bi(),i=e(qu()),s=e(Ji()),a=e(FS()),l=Tr(),c=e(Yu());function d(p){const g=(0,c.default)(),y=Object.assign(Object.assign({},g),p),{className:v,linkService:w,onItemClick:A,pageIndex:E,pageNumber:x,pdf:S}=y;(0,s.default)(S,"Attempted to load a thumbnail, but no document was specified. Wrap <Thumbnail /> in a <Document /> or pass explicit `pdf` prop.");const R=(0,l.isProvided)(x)?x-1:E??null,P=x??((0,l.isProvided)(E)?E+1:null);function M(F){F.preventDefault(),!(!(0,l.isProvided)(R)||!P)&&((0,s.default)(A||w,"Either onItemClick callback or linkService must be defined in order to navigate to an outline item."),A?A({pageIndex:R,pageNumber:P}):w&&w.goToPage(P))}const N=h(p,["className","onItemClick"]);return(0,t.jsx)("a",{className:(0,i.default)("react-pdf__Thumbnail",v),href:P?"#":void 0,onClick:M,children:(0,t.jsx)(a.default,Object.assign({},N,{_className:"react-pdf__Thumbnail__page",_enableRegisterUnregisterPage:!1,renderAnnotationLayer:!1,renderTextLayer:!1}))})}return Dl}var nE;function vR(){if(nE)return et;nE=1;var h=et.__createBinding||(Object.create?function(A,E,x,S){S===void 0&&(S=x);var R=Object.getOwnPropertyDescriptor(E,x);(!R||("get"in R?!E.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return E[x]}}),Object.defineProperty(A,S,R)}:function(A,E,x,S){S===void 0&&(S=x),A[S]=E[x]}),e=et.__setModuleDefault||(Object.create?function(A,E){Object.defineProperty(A,"default",{enumerable:!0,value:E})}:function(A,E){A.default=E}),t=et.__importStar||function(A){if(A&&A.__esModule)return A;var E={};if(A!=null)for(var x in A)x!=="default"&&Object.prototype.hasOwnProperty.call(A,x)&&h(E,A,x);return e(E,A),E},i=et.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(et,"__esModule",{value:!0}),et.PasswordResponses=et.usePageContext=et.useOutlineContext=et.useDocumentContext=et.Thumbnail=et.Page=et.Outline=et.Document=et.pdfjs=void 0;const s=t(Ld);et.pdfjs=s;const a=i(sR());et.Document=a.default;const l=i(uR());et.Outline=l.default;const c=i(FS());et.Page=c.default;const d=i(yR());et.Thumbnail=d.default;const p=i(Yu());et.useDocumentContext=p.default;const g=i(IS());et.useOutlineContext=g.default;const y=i(Md());et.usePageContext=y.default;const v=i(LS());return et.PasswordResponses=v.default,(0,Tr().displayWorkerWarning)(),s.GlobalWorkerOptions.workerSrc="pdf.worker.mjs",et}var iE;function _R(){if(iE)return Dc;iE=1;var h=Dc.__awaiter||function(i,s,a,l){function c(d){return d instanceof a?d:new a(function(p){p(d)})}return new(a||(a=Promise))(function(d,p){function g(w){try{v(l.next(w))}catch(A){p(A)}}function y(w){try{v(l.throw(w))}catch(A){p(A)}}function v(w){w.done?d(w.value):c(w.value).then(g,y)}v((l=l.apply(i,s||[])).next())})};Object.defineProperty(Dc,"__esModule",{value:!0});const e=vR();e.pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${e.pdfjs.version}/pdf.worker.mjs`;const t=i=>h(void 0,void 0,void 0,function*(){const s=URL.createObjectURL(i),a=e.pdfjs.getDocument(s);let l="";try{const c=yield a.promise,d=c.numPages;for(let p=1;p<=d;p++){const v=(yield(yield c.getPage(p)).getTextContent()).items.map(w=>"str"in w?w.str:"").join(" ");l+=v}}catch(c){throw new Error(`Failed to extract text from PDF: ${c}`)}finally{URL.revokeObjectURL(s),a.destroy()}return l});return Dc.default=t,Dc}var wR=_R();const AR=oE(wR),ER="http://127.0.0.1:8000",bR={backendUrl:ER},rE=()=>{const[h,e]=q.useState(null),[t,i]=q.useState(null),[s,a]=q.useState(null),l=yE(),c=async g=>{var v;const y=(v=g.target.files)==null?void 0:v[0];if(!y){i("No file selected."),e(null),a(null);return}if(y.size>5*1024*1024){i("File size exceeds the 5MB limit."),e(null),a(null);return}if(y.type!=="application/pdf"){i("Only PDF files are allowed."),e(null),a(null);return}try{e(y),i(null),a(URL.createObjectURL(y))}catch(w){console.error("Failed to load PDF:",w),i("Failed to load PDF.")}},d=async()=>{if(h)try{const g=await AR(h);try{const y=await fetch(`${bR.backendUrl}/classifytext`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:g})});if(!y.ok)throw new Error("Failed to send text to backend");const w=(await y.json()).formatted_text;console.log(w),l("/song_page",{state:{formattedText:w}})}catch(y){i(y.message)}}catch(g){console.error("Failed to extract text from PDF:",g),i("Failed to extract text from PDF.")}else i("Please upload a PDF file.")},p=Ox.useRef(null);return ze.jsxs("div",{className:"container",children:[ze.jsx("script",{src:"particles.js"}),ze.jsx("h1",{className:"white-shadowed-text",children:" TunedIN "}),ze.jsx("h3",{className:"white-shadowed-text",children:"A project generating entertaining and emotionally fitting background music from text-derived sentiments while displaying usually-boring reading material in flashcard-style. It doubles as a tool aiding in content-generation (podcasts, storytime videos) in deciding on music track progression."}),ze.jsx("button",{onClick:()=>{var g;return(g=p.current)==null?void 0:g.click()},className:"white-background shadowed-text",children:"Select PDF File"}),ze.jsx("button",{onClick:d,className:"float-right white-background shadowe d-text",children:"Submit"}),ze.jsx("input",{type:"file",ref:p,onChange:c,accept:"application/pdf",style:{display:"none"}}),t&&ze.jsx("p",{className:"mt-2 text-red-500",children:t}),s&&ze.jsx("div",{style:{height:"600px",marginTop:"50px"},children:ze.jsx("iframe",{src:s,width:"100%",height:"100%"})})]})},SR=()=>{const[h,e]=q.useState(0),t=["happy-background","sad-background","angry-background","relaxed-background"],i=["https://raw.githubusercontent.com/ty4g1/music-library/main/audio/1975%20-%20Josh%20Kirsch%20%20Media%20Right%20Productions%20%20Royalty%20Free%20Music%20-%20No%20Copyright%20Music%20%20YT%20Music.wav","https://raw.githubusercontent.com/ty4g1/music-library/main/audio/7th%20Floor%20Tango%20-%20Silent%20Partner%20%20Royalty%20Free%20Music%20-%20No%20Copyright%20Music%20%20YouTube%20Music.wav",,"https://raw.githubusercontent.com/ty4g1/music-library/main/audio/8th%20World%20Wonder%20-%20RKVC%20%20Royalty%20Free%20Music%20-%20No%20Copyright%20Music.wav","https://raw.githubusercontent.com/ty4g1/music-library/main/audio/A%20Free%20Night%20In%20Bushwick%20-%20William%20Rosati%20%20Royalty%20Free%20Music%20-%20No%20Copyright%20Music.wav"],s=q.useRef(i.map(()=>new Audio)),a=c=>{const d=s.current[h],p=s.current[c];if(d&&p){p.volume=0,p.play();const g=3e3,y=50,w=1/(g/y);let A=1;const E=setInterval(()=>{A-=w,A<=0&&(clearInterval(E),d.pause(),d.currentTime=0),d.volume=Math.max(A,0),p.volume=Math.min(1-A,1)},y)}e(c)},l=c=>{const d=c==="left"?(h-1+t.length)%t.length:(h+1)%t.length;a(d)};return q.useEffect(()=>{s.current.forEach((d,p)=>{d.src=i[p]||""});const c=s.current[0];return c&&(c.volume=1,c.play().catch(d=>console.error("Audio playback error:",d))),()=>{s.current.forEach(d=>{d.pause(),d.currentTime=0})}},[]),ze.jsxs("div",{className:"container",children:[ze.jsx("h1",{className:"shadowed-text",children:"Let's get listening. "}),ze.jsx("div",{className:"carousel",style:{display:"flex",overflow:"hidden",width:"100%"},children:ze.jsx("div",{className:"slides",style:{display:"flex",transform:`translateX(-${h*100}%)`,transition:"transform 0.5s ease-in-out"},children:t.map((c,d)=>ze.jsx("div",{className:c,style:{minWidth:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"24px",color:"white"},children:`Background for ${c.split("-")[0]} text`},d))})}),ze.jsxs("div",{className:"arrows",children:[ze.jsx("button",{onClick:()=>l("left"),style:{position:"absolute",top:"50%",left:"1rem",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.2)",border:"2px solid gray",borderRadius:"50%",width:"50px",height:"50px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:""}),ze.jsx("button",{onClick:()=>l("right"),style:{position:"absolute",top:"50%",right:"1rem",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.2)",border:"2px solid gray",borderRadius:"50%",width:"50px",height:"50px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:""})]}),ze.jsx("div",{className:"prompt",style:{textAlign:"center",marginTop:"1rem"},children:ze.jsxs("p",{children:["Press the ",ze.jsx("strong",{children:"Left"})," or ",ze.jsx("strong",{children:"Right"})," arrows or ",ze.jsx("strong",{children:"Space"})," key to navigate!"]})})]})};Bx.createRoot(document.getElementById("root")).render(ze.jsx(q.StrictMode,{children:ze.jsx(tk,{children:ze.jsxs(LC,{children:[ze.jsx(dp,{path:"/",element:ze.jsx(rE,{})}),ze.jsx(dp,{path:"/upload_page",element:ze.jsx(rE,{})}),ze.jsx(dp,{path:"/highlight_page",element:ze.jsx(SR,{})})]})})}));
